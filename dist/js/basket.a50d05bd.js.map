{"version":3,"sources":["webpack:///./src/views/Shop/Basket.vue?261b","webpack:///./src/views/Shop/Basket/OptimiseBasket.vue?bae4","webpack:///src/views/Shop/Basket/OptimiseBasket.vue","webpack:///./src/views/Shop/Basket/OptimiseBasket.vue?5533","webpack:///./src/views/Shop/Basket/OptimiseBasket.vue?84da","webpack:///./src/views/Shop/Basket/RequestQuoteButton.vue?9c94","webpack:///src/views/Shop/Basket/RequestQuoteButton.vue","webpack:///./src/views/Shop/Basket/RequestQuoteButton.vue?0554","webpack:///./src/views/Shop/Basket/RequestQuoteButton.vue","webpack:///./src/views/Shop/Basket/BasketRowInner.vue?9f37","webpack:///./src/views/Shop/Basket/BasketRowInner/SuggestedPrices.vue?8ca1","webpack:///src/views/Shop/Basket/BasketRowInner/SuggestedPrices.vue","webpack:///./src/views/Shop/Basket/BasketRowInner/SuggestedPrices.vue?6921","webpack:///./src/views/Shop/Basket/BasketRowInner/SuggestedPrices.vue?18fa","webpack:///./src/views/Shop/Basket/BasketRowInner/SimilarProducts.vue?bdcd","webpack:///./src/helpers/suppliers.js","webpack:///src/views/Shop/Basket/BasketRowInner/SimilarProducts.vue","webpack:///./src/views/Shop/Basket/BasketRowInner/SimilarProducts.vue?8101","webpack:///./src/views/Shop/Basket/BasketRowInner/SimilarProducts.vue?b804","webpack:///./src/views/Shop/Basket/BasketRowInner/SavingsSummary.vue?004c","webpack:///src/views/Shop/Basket/BasketRowInner/SavingsSummary.vue","webpack:///./src/views/Shop/Basket/BasketRowInner/SavingsSummary.vue?406f","webpack:///./src/views/Shop/Basket/BasketRowInner/SavingsSummary.vue?64f5","webpack:///src/views/Shop/Basket/BasketRowInner.vue","webpack:///./src/views/Shop/Basket/BasketRowInner.vue?f3cc","webpack:///./src/views/Shop/Basket/BasketRowInner.vue?1745","webpack:///src/views/Shop/Basket.vue","webpack:///./src/views/Shop/Basket.vue?7573","webpack:///./src/views/Shop/Basket.vue?ee8c","webpack:///./src/views/Shop/Basket/BasketRowInner/SimilarProducts.vue?f10d","webpack:///./src/views/Shop/Basket/BasketRowInner/SavingsSummary.vue?8612","webpack:///./src/views/Shop/Basket/OptimiseBasket.vue?518a","webpack:///./src/views/Shop/Basket/BasketRowInner/SuggestedPrices.vue?bbe8","webpack:///./src/views/Shop/Basket.vue?d334","webpack:///./src/views/Shop/Basket/BasketRowInner.vue?5919"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","on","goBackToShop","slot","_v","order","type","_e","suppliers","key","tableUpdateKey","isLoading","columns","basket","scopedSlots","_u","fn","name","record","itemType","getProductPageUrl","_s","$event","preventDefault","editOrder","editSpecification","specification","image","row","getImageSrc","quantity","decrementProductQuantity","product","selectedPriceId","e","setProductQuantity","target","value","id","incrementProductQuantity","decrementPastOrderQuantity","setPastOrderQuantity","incrementPastOrderQuantity","decrementSpecificationQuantity","setSpecificationQuantity","incrementSpecificationQuantity","supplier","isLoadingPrices","prices","selectedPrice","filterOption","selectPriceById","_l","price","i","supplier_name","cost","getSavingType","formatCostInPence2dp","getPriceToShow","cost_currency","getSavings","co2e","getTotalCo2e","actions","staticRenderFns","scenarios","formatCo2e","itemsAllocated","length","optimise","minimise","mixins","Orders","data","methods","Math","round","val","fieldToMinimise","setBasket","_","map","first","orderBy","item","computed","itemData","minPricesScenario","orderedByPrice","minPricesScenarioPrices","filter","minPricesScenarioCo2es","minCo2esScenario","orderedByCo2e","minCo2esScenarioPrices","minCo2esScenarioCo2es","component","requested","isSaving","requestQuote","buttonText","vm","window","setTimeout","innerRows","getExpandIcon","icon","summary","title","suggestedPriceRange","suggestedPriceRangeForOrder","suggestedPriceRangeForSimilarProducts","savingsRange","suggestedPriceCo2eRange","similarProductCo2e","innerRow","pricesWithSavings","limitCertifications","supplier_certifications","certification","getCertificationKey","howManyMoreCertifications","toggleShowMoreCertificationsForPrice","showMoreCertificationsForPriceIds","includes","savings","getSupplierCo2e","props","benchmarkPrice","average","co2eToReturn","priceId","certs","slice","random","isLoadingSuggestedProducts","similarProducts","productName","orderDate","formatDate","similarity","formatSupplierName","supplierName","Dates","push","dataIndex","suggestedProducts","product_name","order_date","p","comparisons","comparison","components","section","rows","co2es","console","log","summed","minSaving","maxSaving","minPriceFormatted","maxPriceFormatted","costs","minPrice","maxPrice","minCo2e","maxCo2e","minCo2eFormatted","maxCo2eFormatted","floor","innerColumns","isLoadingSuppliers","created","loadSuppliers","loadTruepricesForSpecification","spec","loadTruepricesForOrder","isSupplierSame","savingComparedToBefore","lowestPrice","savingFromBenchmark","setWizardStage","loadOrder","loadSpecification","getOrderUrl","$router","selectPrice","updateBasketSelectedPrice","basketItem"],"mappings":"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","file":"js/basket.a50d05bd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shop-basket\"},[_c('a-layout',[_c('a-layout',{staticStyle:{\"padding\":\"7px 30px\"}},[_c('div',{staticClass:\"wrapper\"},[_c('a-page-header',{attrs:{\"title\":\"Basket\"},on:{\"back\":_vm.goBackToShop}},[_c('template',{slot:\"extra\"},[_c('a-button',{attrs:{\"icon\":\"shopping-cart\",\"type\":\"primary\"}},[_vm._v(\"Checkout\")])],1)],2)],1),(_vm.order && (_vm.type === 'order' || _vm.type === 'specification'))?_c('edit-order-modal',{attrs:{\"suppliers\":_vm.suppliers}}):_vm._e(),_c('div',{key:_vm.tableUpdateKey,staticClass:\"table-wrapper\"},[(!_vm.isLoading)?_c('a-table',{staticClass:\"axpi-table\",attrs:{\"columns\":_vm.columns,\"pagination\":false,\"data-source\":_vm.basket,\"loading\":_vm.isLoading},scopedSlots:_vm._u([{key:\"name\",fn:function(name, record){return _c('div',{},[(record.itemType == 'product')?_c('router-link',{attrs:{\"to\":_vm.getProductPageUrl(record)}},[_vm._v(_vm._s(name)+\" \")]):_vm._e(),(record.itemType == 'order')?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.editOrder(record.order)}}},[_vm._v(_vm._s(name)+\" \")]):_vm._e(),(record.itemType == 'specification')?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.editSpecification(record.specification)}}},[_vm._v(_vm._s(name)+\" \")]):_vm._e()],1)}},{key:\"image\",fn:function(image, row){return _c('div',{},[_c('a-avatar',{attrs:{\"size\":\"large\",\"src\":_vm.getImageSrc(row)}})],1)}},{key:\"quantity\",fn:function(quantity, record){return _c('div',{},[(record.itemType === 'product')?_c('div',{staticClass:\"quantity-changer\"},[_c('a-input-group',{attrs:{\"compact\":\"\"}},[_c('a-button',{attrs:{\"icon\":\"minus\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.decrementProductQuantity({product: record.product, selectedPriceId: record.selectedPriceId}); })($event)}}}),_c('a-input',{staticClass:\"quantity-input\",attrs:{\"type\":\"number\",\"value\":record.quantity},on:{\"change\":function (e) { return _vm.setProductQuantity({quantity: e.target.value, id: record['id'], selectedPriceId: record.selectedPriceId}); }}}),_c('a-button',{attrs:{\"icon\":\"plus\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.incrementProductQuantity({product: record.product, selectedPriceId: record.selectedPriceId}); })($event)}}})],1)],1):_vm._e(),(record.itemType === 'order')?_c('div',{staticClass:\"quantity-changer\"},[_c('a-input-group',{attrs:{\"compact\":\"\"}},[_c('a-button',{attrs:{\"icon\":\"minus\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.decrementPastOrderQuantity(record.order); })($event)}}}),_c('a-input',{staticClass:\"quantity-input\",attrs:{\"type\":\"number\",\"value\":record.quantity},on:{\"change\":function (e) { return _vm.setPastOrderQuantity({quantity: e.target.value, id: record['id']}); }}}),_c('a-button',{attrs:{\"icon\":\"plus\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.incrementPastOrderQuantity(record.order); })($event)}}})],1)],1):_vm._e(),(record.itemType === 'specification')?_c('div',{staticClass:\"quantity-changer\"},[_c('a-input-group',{attrs:{\"compact\":\"\"}},[_c('a-button',{attrs:{\"icon\":\"minus\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.decrementSpecificationQuantity(record.specification); })($event)}}}),_c('a-input',{staticClass:\"quantity-input\",attrs:{\"type\":\"number\",\"value\":record.quantity},on:{\"change\":function (e) { return _vm.setSpecificationQuantity({quantity: e.target.value, id: record['id']}); }}}),_c('a-button',{attrs:{\"icon\":\"plus\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.incrementSpecificationQuantity(record.specification); })($event)}}})],1)],1):_vm._e()])}},{key:\"supplier\",fn:function(supplier, record){return _c('div',{},[(!record.isLoadingPrices && record.prices && record.selectedPrice)?_c('a-select',{staticStyle:{\"width\":\"200px\"},attrs:{\"value\":record.selectedPrice.id,\"option-filter-prop\":\"children\",\"filter-option\":_vm.filterOption,\"show-search\":\"\"},on:{\"change\":function (e) { return _vm.selectPriceById(record, e); }}},_vm._l((record.prices),function(price,i){return _c('a-select-option',{key:i,attrs:{\"value\":price.id}},[_vm._v(\" \"+_vm._s(price.supplier_name)+\" \")])}),1):_c('span',[(record.isLoadingPrices)?_c('a-spin',{attrs:{\"size\":\"small\"}}):_c('span',[_vm._v(\"No suppliers\")])],1)],1)}},{key:\"cost\",fn:function(cost, record){return _c('div',{},[(record.isLoadingPrices)?_c('a-spin',{attrs:{\"size\":\"small\"}}):_vm._e(),(!record.isLoadingPrices)?_c('div',[(_vm.getSavingType(record) === 'Suggested')?_c('div',[_c('span',[_vm._v(\" \"+_vm._s(record.selectedPrice ? _vm.formatCostInPence2dp({ cost: _vm.getPriceToShow(record.selectedPrice.price, record.quantity, record.itemType), cost_currency: 'USD' }) : '-')+\" \")])]):_vm._e(),(_vm.getSavingType(record) === 'Exact')?_c('div',[_c('span',[_vm._v(\" \"+_vm._s(record.selectedPrice ? _vm.formatCostInPence2dp({ cost: record.order.cost, cost_currency: 'USD' }) : '-')+\" \")])]):_vm._e(),(record.prices && record.selectedPrice)?_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[_c('span',[_vm._v(_vm._s(_vm.getSavings(record) ? _vm.formatCostInPence2dp({ cost: _vm.getSavings(record), cost_currency: 'USD' }) : '-'))])]):_vm._e()]):_vm._e()],1)}},{key:\"cost-tags\",fn:function(cost, record){return _c('div',{},[(record.isLoadingPrices)?_c('a-spin',{attrs:{\"size\":\"small\"}}):_vm._e(),(!record.isLoadingPrices)?_c('div',[(_vm.getSavingType(record) === 'Suggested')?_c('div',[(record.prices && record.selectedPrice)?_c('a-tag',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"color\":\"blue\"}},[_vm._v(\"Suggested \")]):_vm._e()],1):_vm._e(),(_vm.getSavingType(record) === 'Exact')?_c('div',[_c('a-tag',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"color\":\"blue\"}},[_vm._v(\"Exact \")])],1):_vm._e(),(record.prices && record.selectedPrice)?_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[_c('a-tag',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"color\":(_vm.getSavings(record) && _vm.getSavings(record) > 0) ? 'green' : 'red'}},[_vm._v(\"Savings \")])],1):_vm._e()]):_vm._e()],1)}},{key:\"co2e\",fn:function(co2e, record){return _c('div',{},[(record.isLoadingPrices)?_c('a-spin',{attrs:{\"size\":\"small\"}}):_c('span',[(_vm.getTotalCo2e(record))?_c('span',[_vm._v(_vm._s(_vm.getTotalCo2e(record))+\" kg\")]):_c('a-tag',{attrs:{\"color\":\"red\"}},[_vm._v(\"Unknown\")])],1)],1)}},{key:\"actions\",fn:function(actions, row){return _c('div',{},[_c('div',{staticClass:\"actions\"},[(row.itemType !== 'product')?_c('request-quote-button'):_vm._e()],1)])}},{key:\"expandedRowRender\",fn:function(record){return _c('div',{},[_c('basket-row-inner',{attrs:{\"row\":record}})],1)}}],null,false,3448665797)}):_vm._e()],1),_c('div',{staticClass:\"optimise-wrapper\"},[_c('optimise-basket')],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"Scenarios\")]),_c('div',{staticClass:\"table-wrapper\"},[_c('a-table',{staticClass:\"axpi-table\",attrs:{\"data-source\":_vm.scenarios,\"pagination\":false,\"columns\":_vm.columns},scopedSlots:_vm._u([{key:\"expectedCost\",fn:function(cost){return _c('div',{},[_vm._v(\" \"+_vm._s(_vm.formatCostInPence2dp({cost: cost, cost_currency: 'USD'}))+\" \")])}},{key:\"co2e\",fn:function(co2e){return _c('div',{},[(co2e)?_c('span',[_vm._v(_vm._s(_vm.formatCo2e(co2e))+\" kg\")]):_c('span',[_vm._v(\"Unknown\")])])}},{key:\"itemsAllocated\",fn:function(itemsAllocated){return _c('div',{},[_c('div',{staticClass:\"bullet-chart\"},[_c('div',{staticClass:\"left\"},[_c('a-progress',{attrs:{\"percent\":(itemsAllocated/_vm.basket.length)*100,\"show-info\":false}})],1),_c('div',{staticClass:\"right\"},[_vm._v(\" \"+_vm._s(itemsAllocated)+\"/\"+_vm._s(_vm.basket.length)+\" \")])])])}},{key:\"actions\",fn:function(actions,row){return _c('div',{},[_c('div',{staticClass:\"actions\"},[_c('a-button',{on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.optimise(row.minimise); })($event)}}},[_vm._v(\"Select\")])],1)])}}])})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h2>Scenarios</h2>\n\n    <div class=\"table-wrapper\">\n      <a-table class=\"axpi-table\"\n               :data-source=\"scenarios\"\n               :pagination=\"false\"\n               :columns=\"columns\">\n\n        <div slot=\"expectedCost\" slot-scope=\"cost\">\n          {{ formatCostInPence2dp({cost: cost, cost_currency: 'USD'}) }}\n        </div>\n\n        <div slot=\"co2e\" slot-scope=\"co2e\">\n          <span v-if=\"co2e\">{{ formatCo2e(co2e) }} kg</span>\n          <span v-else>Unknown</span>\n        </div>\n\n        <div slot=\"itemsAllocated\" slot-scope=\"itemsAllocated\">\n          <div class=\"bullet-chart\">\n            <div class=\"left\">\n              <a-progress :percent=\"(itemsAllocated/basket.length)*100\" :show-info=\"false\"/>\n            </div>\n            <div class=\"right\">\n              {{ itemsAllocated }}/{{ basket.length }}\n            </div>\n          </div>\n        </div>\n\n        <div slot=\"actions\" slot-scope=\"actions,row\">\n          <div class=\"actions\">\n            <a-button @click.prevent=\"() => optimise(row.minimise)\">Select</a-button>\n          </div>\n        </div>\n\n      </a-table>\n    </div>\n  </div>\n</template>\n\n<script>\nconst _ = require('lodash');\nimport Orders from \"../../../mixins/Orders\";\nimport {mapGetters, mapActions} from 'vuex';\n\nconst columns = [\n  {\n    title: 'Scenario',\n    dataIndex: 'name'\n  },\n  {\n    title: 'Expected Cost',\n    dataIndex: 'expectedCost',\n    scopedSlots: {customRender: 'expectedCost'}\n  },\n  {\n    title: 'CO2e',\n    dataIndex: 'co2e',\n    scopedSlots: {customRender: 'co2e'}\n  },\n  {\n    dataIndex: 'itemsAllocated',\n    title: 'Items Allocated',\n    key: 'itemsAllocated',\n    scopedSlots: {customRender: 'itemsAllocated'}\n  },\n  {\n    title: '',\n    scopedSlots: {customRender: 'actions'}\n  }\n];\n\nexport default {\n  name: \"OptimiseWrapper\",\n  mixins: [Orders],\n  data() {\n    return {\n      columns\n    }\n  },\n  methods: {\n    ...mapActions('shop', {\n      setBasket: 'setBasket'\n    }),\n\n    formatCo2e(val) {\n      return Math.round(val * 100) / 100;\n    },\n\n    optimise(fieldToMinimise) {\n      if (fieldToMinimise === 'cost') {\n        this.setBasket(_.map(this.basket, item => {\n          return {\n            ...item,\n            selectedPrice: _.first(_.orderBy(item.prices, 'price'))\n          }\n        }));\n      }\n      if (fieldToMinimise === 'co2e') {\n        this.setBasket(_.map(this.basket, item => {\n          return {\n            ...item,\n            selectedPrice: _.first(_.orderBy(item.prices, 'co2e'))\n          }\n        }));\n      }\n    }\n  },\n  computed: {\n    ...mapGetters('shop', {\n      basket: 'basket'\n    }),\n\n\n    itemData() {\n      return _.map(this.basket, item => {\n        if (item.itemType == 'product') {\n          return _.map(item.prices, price => ({\n            price: price.price * item.quantity,\n            co2e: price.co2e * item.quantity\n          }))\n        }\n        return item.prices;\n      });\n    },\n\n    minPricesScenario() {\n      return _.map(this.itemData, prices => {\n        let orderedByPrice = _.orderBy(prices, 'price');\n        return _.first(orderedByPrice);\n      })\n    },\n\n    minPricesScenarioPrices() {\n      let prices = _.map(this.minPricesScenario, 'price');\n      return _.filter(prices, p => p);\n    },\n\n    minPricesScenarioCo2es() {\n      let prices = _.map(this.minPricesScenario, 'co2e');\n      return _.filter(prices, p => p);\n    },\n\n    minCo2esScenario() {\n      return _.map(this.itemData, prices => {\n        let orderedByCo2e = _.orderBy(prices, 'co2e');\n        return _.first(orderedByCo2e);\n      })\n    },\n\n    minCo2esScenarioPrices() {\n      let prices = _.map(this.minCo2esScenario, 'price');\n      return _.filter(prices, p => p);\n    },\n\n    minCo2esScenarioCo2es() {\n      let prices = _.map(this.minCo2esScenario, 'co2e');\n      return _.filter(prices, p => p);\n    },\n\n    scenarios() {\n      return [\n        {\n          name: 'Best Price',\n          minimise: 'cost',\n          expectedCost: _.sum(this.minPricesScenarioPrices),\n          co2e: _.sum(this.minPricesScenarioCo2es),\n          itemsAllocated: this.minPricesScenarioPrices.length\n        },\n        {\n          name: 'Environmentally Friendly',\n          minimise: 'co2e',\n          expectedCost: _.sum(this.minCo2esScenarioPrices),\n          co2e: _.sum(this.minCo2esScenarioCo2es),\n          itemsAllocated: this.minCo2esScenarioCo2es.length\n        }\n      ];\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.actions {\n  text-align: right;\n}\n\n.bullet-chart {\n  display: flex;\n\n  .left {\n    flex: 1;\n  }\n\n  .right {\n    padding-left: 20px;\n    flex-shrink: 1;\n  }\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptimiseBasket.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptimiseBasket.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OptimiseBasket.vue?vue&type=template&id=1bc6efad&scoped=true&\"\nimport script from \"./OptimiseBasket.vue?vue&type=script&lang=js&\"\nexport * from \"./OptimiseBasket.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OptimiseBasket.vue?vue&type=style&index=0&id=1bc6efad&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1bc6efad\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-dropdown-button',{attrs:{\"disabled\":_vm.requested||_vm.isSaving,\"trigger\":['click']},on:{\"click\":function($event){$event.preventDefault();return _vm.requestQuote($event)}}},[_vm._v(\" \"+_vm._s(_vm.buttonText)+\" \"),_c('a-icon',{attrs:{\"slot\":\"icon\",\"type\":\"down\"},slot:\"icon\"}),_c('a-menu',{attrs:{\"slot\":\"overlay\"},slot:\"overlay\"},[_c('a-menu-item',{key:\"1\"},[_c('a-icon',{attrs:{\"type\":\"clock-circle\"}}),_vm._v(\" Create order window \")],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-dropdown-button :disabled=\"requested||isSaving\"\n                     @click.prevent=\"requestQuote\"\n                     :trigger=\"['click']\">\n    {{ buttonText }}\n\n    <a-icon slot=\"icon\" type=\"down\" />\n    <a-menu slot=\"overlay\">\n      <a-menu-item key=\"1\">\n        <a-icon type=\"clock-circle\"/>\n        Create order window\n      </a-menu-item>\n    </a-menu>\n  </a-dropdown-button>\n</template>\n\n<script>\nexport default {\n  name: \"RequestQuoteButton\",\n  data() {\n    return {\n      isSaving: false,\n      requested: false\n    }\n  },\n  computed: {\n    buttonText() {\n     if (this.isSaving) {\n         return 'Requesting Quote...';\n     }\n\n      if (this.requested) {\n        return 'Quote Requested';\n      }\n      return 'Request Quote';\n    },\n  },\n  methods: {\n    requestQuote() {\n      let vm = this;\n      vm.isSaving = true;\n      window.setTimeout(function () {\n        vm.isSaving = false;\n        vm.requested = true;\n      }, 1000);\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RequestQuoteButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RequestQuoteButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RequestQuoteButton.vue?vue&type=template&id=12ca9830&scoped=true&\"\nimport script from \"./RequestQuoteButton.vue?vue&type=script&lang=js&\"\nexport * from \"./RequestQuoteButton.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12ca9830\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-table',{staticClass:\"basketRowInnerTable\",attrs:{\"columns\":_vm.columns,\"data-source\":_vm.innerRows,\"pagination\":false,\"show-header\":false,\"expandIconAsCell\":false,\"expand-icon\":_vm.getExpandIcon,\"expand-icon-column-index\":4},scopedSlots:_vm._u([{key:\"icon\",fn:function(icon){return _c('div',{},[_c('a-icon',{staticClass:\"rowIcon\",attrs:{\"type\":icon,\"theme\":\"twoTone\"}})],1)}},{key:\"name\",fn:function(name){return _c('div',{},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(name))])])}},{key:\"summary\",fn:function(summary, record){return _c('div',{},[_c('div',{staticClass:\"summary-column\"},[(record.title == 'Suggested Prices')?_c('div',[_c('span',{staticStyle:{\"margin-right\":\"5px\"}},[_vm._v(\" \"+_vm._s(_vm.suggestedPriceRange)+\" \")])]):_vm._e(),(record.title == 'Similar Products')?_c('div',[(_vm.row.itemType == 'order')?_c('span',[_vm._v(\" \"+_vm._s(_vm.suggestedPriceRangeForOrder)+\" \")]):_vm._e(),(_vm.row.itemType == 'product')?_c('span',[_vm._v(\" \"+_vm._s(_vm.suggestedPriceRangeForSimilarProducts)+\" \")]):_vm._e()]):_vm._e(),(record.title == 'Savings Summary')?_c('div',[_c('span',{staticStyle:{\"margin-right\":\"5px\"}},[_vm._v(\" \"+_vm._s(_vm.savingsRange)+\" \")])]):_vm._e()])])}},{key:\"summary-tags\",fn:function(summary, record){return _c('div',{},[(record.title == 'Suggested Prices')?_c('div',[(_vm.row.itemType !== 'product')?_c('a-tag',{staticStyle:{\"margin-right\":\"0\"},attrs:{\"color\":\"blue\"}},[_vm._v(\"Suggested\")]):_vm._e()],1):_vm._e(),(record.title == 'Similar Products')?_c('div',[(_vm.row.itemType !== 'product')?_c('a-progress',{attrs:{\"type\":\"circle\",\"width\":30,\"percent\":100}}):_vm._e()],1):_vm._e()])}},{key:\"additional_summary\",fn:function(summary, record){return _c('div',{},[(record.title == 'Suggested Prices')?_c('div',[_c('span',{staticStyle:{\"margin-right\":\"5px\"}},[_vm._v(\" \"+_vm._s(_vm.suggestedPriceCo2eRange)+\" \")])]):_vm._e(),(record.title == 'Similar Products')?_c('div',[(!_vm.similarProductCo2e)?_c('a-tag',{attrs:{\"color\":\"red\"}},[_vm._v(\"Unknown\")]):_vm._e(),(_vm.similarProductCo2e)?_c('span',[_vm._v(_vm._s(_vm.similarProductCo2e))]):_vm._e()],1):_vm._e(),(record.title == 'Savings Summary')?_c('div',[_c('a-tag',{attrs:{\"color\":\"red\"}},[_vm._v(\"Unknown\")])],1):_vm._e()])}},{key:\"expandedRowRender\",fn:function(innerRow){return _c('div',{staticClass:\"basket-row-inner-expanded-row-render\"},[(innerRow.title == 'Suggested Prices')?_c('suggested-prices',{attrs:{\"row\":_vm.row}}):_vm._e(),(innerRow.title == 'Similar Products')?_c('similar-products',{attrs:{\"row\":_vm.row}}):_vm._e(),(innerRow.title == 'Savings Summary')?_c('savings-summary',{attrs:{\"row\":_vm.row}}):_vm._e()],1)}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-table',{staticClass:\"suggested-prices-row\",attrs:{\"slot\":\"expandedRowRender\",\"columns\":_vm.columns,\"data-source\":_vm.pricesWithSavings,\"pagination\":false},slot:\"expandedRowRender\",scopedSlots:_vm._u([{key:\"supplier\",fn:function(supplier, record){return _c('div',{},[_c('span',{staticStyle:{\"margin-right\":\"15px\"}},[_vm._v(_vm._s(supplier))]),_vm._l((_vm.limitCertifications(record.supplier_certifications, record.id)),function(certification,i){return _c('a-tag',{key:_vm.getCertificationKey(i),attrs:{\"color\":\"blue\"}},[_vm._v(\" \"+_vm._s(certification.name)+\" \")])}),(_vm.howManyMoreCertifications(record.supplier_certifications, record.id) > 0)?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.toggleShowMoreCertificationsForPrice(record); })($event)}}},[_vm._v(\" + \"+_vm._s(_vm.howManyMoreCertifications(record.supplier_certifications, record.id))+\" more \")]):_vm._e(),(_vm.showMoreCertificationsForPriceIds.includes(record.id))?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.toggleShowMoreCertificationsForPrice(record); })($event)}}},[_vm._v(\" Show less \")]):_vm._e()],2)}},{key:\"cost\",fn:function(cost, record){return _c('div',{},[_vm._v(\" \"+_vm._s(record.price ? _vm.formatCostInPence2dp({ cost: record.price, cost_currency: 'USD' }) : '-')+\" \")])}},{key:\"savings\",fn:function(savings){return _c('div',{},[_vm._v(\" \"+_vm._s(savings ? _vm.formatCostInPence2dp({ cost: savings, cost_currency: 'USD' }) : '-')+\" \")])}},{key:\"co2e\",fn:function(co2e){return _c('div',{},[(_vm.getSupplierCo2e(co2e, _vm.row))?_c('span',[_vm._v(\" \"+_vm._s(_vm.getSupplierCo2e(co2e, _vm.row))+\" kg \")]):_c('a-tag',{attrs:{\"color\":\"red\"}},[_vm._v(\"Unknown\")])],1)}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-table class=\"suggested-prices-row\"\n           slot=\"expandedRowRender\"\n           :columns=\"columns\"\n           :data-source=\"pricesWithSavings\"\n           :pagination=\"false\"\n  >\n    <div slot=\"supplier\" slot-scope=\"supplier, record\">\n      <span style=\"margin-right: 15px;\">{{ supplier }}</span>\n      <a-tag color=\"blue\" v-for=\"(certification, i) in limitCertifications(record.supplier_certifications, record.id)\"\n             :key=\"getCertificationKey(i)\">\n        {{ certification.name }}\n      </a-tag>\n      <a href=\"#\" @click.prevent=\"() => toggleShowMoreCertificationsForPrice(record)\"\n         v-if=\"howManyMoreCertifications(record.supplier_certifications, record.id) > 0\">\n        + {{ howManyMoreCertifications(record.supplier_certifications, record.id) }} more\n      </a>\n      <a href=\"#\" @click.prevent=\"() => toggleShowMoreCertificationsForPrice(record)\"\n         v-if=\"showMoreCertificationsForPriceIds.includes(record.id)\">\n        Show less\n      </a>\n    </div>\n    <div slot=\"cost\" slot-scope=\"cost, record\">\n      {{\n        record.price ? formatCostInPence2dp({\n          cost: record.price,\n          cost_currency: 'USD'\n        }) : '-'\n      }}\n    </div>\n    <div slot=\"savings\" slot-scope=\"savings\">\n      {{\n        savings ? formatCostInPence2dp({\n          cost: savings,\n          cost_currency: 'USD'\n        }) : '-'\n      }}\n    </div>\n    <div slot=\"co2e\" slot-scope=\"co2e\">\n                  <span v-if=\"getSupplierCo2e(co2e, row)\">\n                    {{ getSupplierCo2e(co2e, row) }} kg\n                  </span>\n      <a-tag color=\"red\" v-else>Unknown</a-tag>\n    </div>\n  </a-table>\n</template>\n\n<script>\nimport Orders from \"../../../../mixins/Orders\";\n\nconst _ = require('lodash');\n\nconst columns = [\n  {title: 'Supplier', dataIndex: 'supplier_name', key: 'supplier_name', scopedSlots: {customRender: 'supplier'}},\n  {title: 'Cost', dataIndex: 'cost', key: 'cost', scopedSlots: {customRender: 'cost'}},\n  {title: 'Savings', dataIndex: 'savings', key: 'savings', scopedSlots: {customRender: 'savings'}},\n  {title: 'CO2e', dataIndex: 'co2e', key: 'co2e', scopedSlots: {customRender: 'co2e'}},\n];\n\nexport default {\n  name: \"SuggestedPrices\",\n  mixins: [Orders],\n  props: ['row'],\n  data() {\n    return {\n      columns,\n      showMoreCertificationsForPriceIds: []\n    }\n  },\n  computed: {\n    benchmarkPrice() {\n      let prices = _.map(this.row.prices, 'price');\n      let average = _.mean(prices) * 1.3;\n\n      if (this.row.order && this.row.order.id == 3) {\n        return 16183.59 * 100;\n      }\n\n      return average;\n    },\n\n    pricesWithSavings() {\n      return _.map(this.row.prices, r => {\n        return {\n          savings: (this.benchmarkPrice - r.price),\n          ...r\n        }\n      });\n    }\n  },\n  methods: {\n    getSupplierCo2e(co2e, item) {\n      let co2eToReturn = co2e;\n      if (item.itemType === 'product') {\n        co2eToReturn = co2eToReturn * item.quantity;\n      }\n      return co2eToReturn ? Math.round(co2eToReturn * 100) / 100 : 0;\n    },\n\n    limitCertifications(certs, priceId = null) {\n      if (this.showMoreCertificationsForPriceIds.includes(priceId)) {\n        return certs;\n      }\n      return certs.slice(0, 2);\n    },\n\n    howManyMoreCertifications(certs, priceId) {\n      if (this.showMoreCertificationsForPriceIds.includes(priceId)) {\n        return 0;\n      }\n      return (certs.length - 2);\n    },\n\n    getCertificationKey(i) {\n      return 'certification-' + Math.random() + '-' + i;\n    },\n\n    toggleShowMoreCertificationsForPrice(price) {\n      this.showMoreCertificationsForPriceIds = _.xor(this.showMoreCertificationsForPriceIds, [price.id]);\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.suggested-prices-row {\n  th {\n    padding-top: 5px !important;\n  }\n\n  td {\n    //border-bottom: 1px solid #e8e8e8 !important;\n  }\n}\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuggestedPrices.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuggestedPrices.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SuggestedPrices.vue?vue&type=template&id=34e356f6&\"\nimport script from \"./SuggestedPrices.vue?vue&type=script&lang=js&\"\nexport * from \"./SuggestedPrices.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SuggestedPrices.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-table',{staticClass:\"similar-products-row\",attrs:{\"slot\":\"expandedRowRender\",\"columns\":_vm.columns,\"loading\":_vm.row.isLoadingSuggestedProducts,\"data-source\":_vm.similarProducts,\"pagination\":false},slot:\"expandedRowRender\",scopedSlots:_vm._u([{key:\"productName\",fn:function(productName){return _c('div',{},[_vm._v(\" \"+_vm._s(productName)+\" \"),(_vm.row.itemType == 'order')?_c('a-tag',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"color\":\"blue\"}},[_vm._v(\"Past Order\")]):_vm._e()],1)}},{key:\"orderDate\",fn:function(orderDate){return _c('div',{},[_vm._v(\" \"+_vm._s(orderDate ? _vm.formatDate(orderDate) : '-')+\" \")])}},{key:\"cost\",fn:function(cost, order){return _c('div',{},[_vm._v(\" \"+_vm._s(_vm.formatCostInPence2dp(order))+\" \")])}},{key:\"similarity\",fn:function(similarity){return _c('div',{},[_c('a-progress',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"circle\",\"width\":38,\"percent\":similarity}})],1)}}])},[_c('div',{attrs:{\"slot\":\"compare\"},slot:\"compare\"},[_c('a-button',{staticStyle:{\"float\":\"right\"},attrs:{\"icon\":\"eye\"}},[_vm._v(\"Compare\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\n    formatSupplierName(supplierName) {\n        if (supplierName === 'Courtney Colour') {\n            return 'ASL Supplier 1';\n        }\n        if (supplierName === 'Razer Graphix') {\n            return 'ASL Supplier 1';\n        }\n        if (supplierName === 'Eco Design - Eco Print') {\n            return 'ASL Supplier 3';\n        }\n        if (supplierName === 'FG Print') {\n            return 'ASL Supplier 4';\n        }\n        return supplierName;\n    }\n}","<template>\n  <a-table class=\"similar-products-row\"\n           slot=\"expandedRowRender\"\n           :columns=\"columns\"\n           :loading=\"row.isLoadingSuggestedProducts\"\n           :data-source=\"similarProducts\"\n           :pagination=\"false\">\n    <div slot=\"productName\" slot-scope=\"productName\">\n      {{ productName }}\n      <a-tag v-if=\"row.itemType == 'order'\" style=\"margin-left: 5px;\" color=\"blue\">Past Order</a-tag>\n    </div>\n    <div slot=\"orderDate\" slot-scope=\"orderDate\">\n      {{ orderDate ? formatDate(orderDate) : '-' }}\n    </div>\n    <div slot=\"cost\" slot-scope=\"cost, order\">\n      {{ formatCostInPence2dp(order) }}\n    </div>\n    <div slot=\"similarity\" slot-scope=\"similarity\">\n      <a-progress type=\"circle\"\n                  :width=\"38\"\n                  style=\"float: right;\"\n                  :percent=\"similarity\"/>\n    </div>\n    <div slot=\"compare\">\n      <a-button icon=\"eye\" style=\"float: right;\">Compare</a-button>\n    </div>\n  </a-table>\n</template>\n\n<script>\nimport Dates from \"../../../../mixins/Dates\";\nimport Orders from \"../../../../mixins/Orders\";\nimport suppliers from \"../../../../helpers/suppliers\";\n\nconst _ = require('lodash');\n\nexport default {\n  name: \"SimilarProducts\",\n  props: ['row'],\n  mixins: [Dates, Orders],\n  data() {\n    return {}\n  },\n  computed: {\n    columns() {\n      let columns = [\n        {\n          title: 'Name',\n          dataIndex: 'product_name',\n          scopedSlots: {customRender: 'productName'}\n        },\n        {\n          title: 'Quantity',\n          dataIndex: 'quantity'\n        },\n        {\n          title: 'Supplier',\n          dataIndex: 'supplier.name'\n        }\n      ];\n      if (this.row.itemType == 'order') {\n        columns.push({\n          title: 'Order Date',\n          dataIndex: 'order_date',\n          scopedSlots: {customRender: 'orderDate'}\n        });\n      }\n      columns.push({\n        title: 'Cost',\n        dataIndex: 'cost',\n        scopedSlots: {customRender: 'cost'}\n      });\n      columns.push({\n        title: '',\n        dataIndex: 'similarity',\n        scopedSlots: {customRender: 'similarity'}\n      });\n      columns.push({\n        title: '',\n        scopedSlots: {customRender: 'compare'}\n      });\n\n      return columns;\n    },\n\n    similarProducts() {\n      if (this.row.itemType == 'order') {\n        return [\n          {\n            ...this.row.order,\n            supplier: {name: suppliers.formatSupplierName(this.row.order.supplier.name)},\n            similarity: 100\n          },\n          {\n            product_name: 'Smirnoff Poster',\n            quantity: 1215983,\n            supplier: {name: 'ASL Supplier 2'},\n            order_date: '2020-01-13',\n            // similarity: Math.round(80 + (Math.random() * 15)),\n            similarity: 87,\n            cost: 15622 * 100,\n            cost_currency: 'USD'\n          }\n        ]\n      }\n      if (this.row.itemType == 'product') {\n        if (!this.row.suggestedProducts) {\n          return [];\n        }\n        let orderedByCost = _.orderBy(this.row.suggestedProducts, 'cost');\n        return _.map(orderedByCost, (product, i) => {\n          let p = {\n            product_name: product.name,\n            quantity: this.row.quantity,\n            supplier: {name: suppliers.formatSupplierName(product.supplier_name)},\n            // similarity: Math.round(80 + (Math.random() * 15)),\n            similarity: (i === 0 ? 93 : Math.round((70 + (Math.random()*15)))),\n            cost: product.cost * this.row.quantity,\n            cost_currency: product.cost_currency\n          }\n          if (product.order_date) {\n            p.order_date = product.order_date;\n          }\n          return p;\n        });\n      }\n      return [];\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.similar-products-row {\n  th {\n    padding-top: 5px !important;\n  }\n}\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimilarProducts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimilarProducts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SimilarProducts.vue?vue&type=template&id=6b681508&\"\nimport script from \"./SimilarProducts.vue?vue&type=script&lang=js&\"\nexport * from \"./SimilarProducts.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SimilarProducts.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-table',{staticClass:\"similar-products-row\",attrs:{\"slot\":\"expandedRowRender\",\"columns\":_vm.columns,\"data-source\":_vm.comparisons,\"pagination\":false},slot:\"expandedRowRender\",scopedSlots:_vm._u([{key:\"comparison\",fn:function(comparison, record){return _c('div',{},[_vm._v(\" \"+_vm._s(comparison)+\" \"),(record.similarity)?_c('a-progress',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"circle\",\"width\":37,\"percent\":record.similarity}}):_vm._e()],1)}},{key:\"cost\",fn:function(cost, record){return _c('div',{},[_vm._v(\" \"+_vm._s(record.cost ? _vm.formatCostInPence2dp({ cost: record.cost, cost_currency: 'USD' }) : '-')+\" \")])}},{key:\"savings\",fn:function(savings, record){return _c('div',{},[_c('span',[_vm._v(_vm._s(record.cost ? _vm.formatCostInPence2dp({ cost: record.savings, cost_currency: 'USD' }) : '-'))]),(_vm.row.itemType !== 'product' && record.comparison !== 'Similar Match')?_c('a-tag',{staticStyle:{\"margin-left\":\"15px\"},attrs:{\"color\":(record.savings && record.savings > 0) ? 'green' : 'red'}},[_vm._v(\"P&L \")]):_vm._e(),(_vm.row.itemType !== 'product' && record.comparison == 'Similar Match')?_c('a-tag',{staticStyle:{\"margin-left\":\"15px\"},attrs:{\"color\":(record.savings && record.savings > 0) ? 'green' : 'red'}},[_vm._v(\"Cost Avoidance \")]):_vm._e(),(_vm.row.itemType == 'product')?_c('a-tag',{staticStyle:{\"margin-left\":\"15px\"},attrs:{\"color\":(record.savings && record.savings > 0) ? 'green' : 'red'}},[_vm._v(\" Cost Avoidance \")]):_vm._e()],1)}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-table class=\"similar-products-row\"\n           slot=\"expandedRowRender\"\n           :columns=\"columns\"\n           :data-source=\"comparisons\"\n           :pagination=\"false\">\n    <div slot=\"comparison\" slot-scope=\"comparison, record\">\n      {{ comparison }}\n      <a-progress type=\"circle\"\n                  v-if=\"record.similarity\"\n                  :width=\"37\"\n                  style=\"margin-left: 10px\"\n                  :percent=\"record.similarity\"/>\n    </div>\n    <div slot=\"cost\" slot-scope=\"cost, record\">\n      {{\n        record.cost ? formatCostInPence2dp({\n          cost: record.cost,\n          cost_currency: 'USD'\n        }) : '-'\n      }}\n    </div>\n    <div slot=\"savings\" slot-scope=\"savings, record\">\n      <span>{{\n          record.cost ? formatCostInPence2dp({\n            cost: record.savings,\n            cost_currency: 'USD'\n          }) : '-'\n        }}</span>\n      <a-tag style=\"margin-left: 15px;\" v-if=\"row.itemType !== 'product' && record.comparison !== 'Similar Match'\"\n             :color=\"(record.savings && record.savings > 0) ? 'green' : 'red'\">P&L\n      </a-tag>\n      <a-tag style=\"margin-left: 15px;\" v-if=\"row.itemType !== 'product' && record.comparison == 'Similar Match'\"\n             :color=\"(record.savings && record.savings > 0) ? 'green' : 'red'\">Cost Avoidance\n      </a-tag>\n      <a-tag style=\"margin-left: 15px;\" v-if=\"row.itemType == 'product'\"\n             :color=\"(record.savings && record.savings > 0) ? 'green' : 'red'\">\n        Cost Avoidance\n      </a-tag>\n    </div>\n  </a-table>\n</template>\n\n<script>\nimport Dates from \"../../../../mixins/Dates\";\nimport Orders from \"../../../../mixins/Orders\";\n\nconst _ = require('lodash');\n\nconst columns = [\n  {\n    title: 'Comparison',\n    dataIndex: 'comparison',\n    scopedSlots: {customRender: 'comparison'}\n  },\n  {\n    title: 'Cost',\n    dataIndex: 'cost',\n    key: 'cost',\n    scopedSlots: {customRender: 'cost'}\n  },\n  {\n    title: 'Savings',\n    dataIndex: 'savings',\n    key: 'savings',\n    scopedSlots: {customRender: 'savings'}\n  }\n];\nexport default {\n  name: \"SavingsSummary\",\n  props: ['row'],\n  mixins: [Dates, Orders],\n  data() {\n    return {\n      columns\n    }\n  },\n  computed: {\n    benchmarkPrice() {\n      if (this.row.itemType == 'product' && this.row.suggestedProducts.length) {\n        let costs = _.map(this.row.suggestedProducts, 'cost');\n        return _.min(costs) * this.row.quantity;\n      }\n\n      if (this.row.order && this.row.order.id == 3) {\n        return 16183.59 * 100;\n      }\n\n      let prices = _.map(this.row.prices, 'price');\n      let average = _.mean(prices) * 1.3;\n      return average;\n    },\n\n    comparisons() {\n      let comparisons = [];\n\n      if (this.row.itemType == 'product') {\n        comparisons.push({\n          comparison: this.row.suggestedProducts.length ? 'Similar Match' : 'Benchmark',\n          similarity: 93,\n          cost: this.benchmarkPrice,\n          savings: this.row.selectedPrice ? (this.benchmarkPrice - (this.row.selectedPrice.price * this.row.quantity)) : 0\n        });\n      }\n\n      if (this.row.itemType !== 'product') {\n        comparisons.push({\n          comparison: 'Historic TruePrice',\n          cost: this.benchmarkPrice,\n          savings: this.row.selectedPrice ? (this.benchmarkPrice - this.row.selectedPrice.price) : 0\n        });\n      }\n\n      if (this.row.order) {\n        comparisons.push({\n          comparison: 'Exact Match',\n          cost: this.row.order.cost,\n          // savings: (this.benchmarkPrice - this.row.order.cost)\n          savings: this.row.selectedPrice ? (this.row.order.cost - this.row.selectedPrice.price) : 0\n        });\n        comparisons.push({\n          comparison: 'Similar Match',\n          cost: 15622 * 100,\n          savings: this.row.selectedPrice ? (15622*100 - this.row.selectedPrice.price) : 0,\n          similarity: 87\n        });\n      }\n\n      return comparisons;\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.similar-products-row {\n  th {\n    padding-top: 5px !important;\n  }\n\n  .text-danger {\n    color: #f5222d;\n  }\n\n  .text-success {\n    color: #52c41a;\n  }\n}\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SavingsSummary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SavingsSummary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SavingsSummary.vue?vue&type=template&id=873c24ae&\"\nimport script from \"./SavingsSummary.vue?vue&type=script&lang=js&\"\nexport * from \"./SavingsSummary.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SavingsSummary.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <a-table :columns=\"columns\" :data-source=\"innerRows\" :pagination=\"false\" :show-header=\"false\"\n             class=\"basketRowInnerTable\"\n             :expandIconAsCell=\"false\"\n             :expand-icon=\"getExpandIcon\"\n             :expand-icon-column-index=\"4\"\n    >\n      <div slot=\"icon\" slot-scope=\"icon\">\n        <a-icon class=\"rowIcon\" :type=\"icon\" theme=\"twoTone\"/>\n      </div>\n\n      <div slot=\"name\" slot-scope=\"name\">\n        <span class=\"name\">{{ name }}</span>\n      </div>\n\n      <div slot=\"summary\" slot-scope=\"summary, record\">\n        <div class=\"summary-column\">\n          <div v-if=\"record.title == 'Suggested Prices'\">\n          <span style=\"margin-right: 5px;\">\n            {{ suggestedPriceRange }}\n          </span>\n            <!--            <a-tag color=\"blue\" style=\"margin-right: 0;\">Suggested</a-tag>-->\n          </div>\n\n          <div v-if=\"record.title == 'Similar Products'\">\n            <span v-if=\"row.itemType == 'order'\">\n              {{ suggestedPriceRangeForOrder }}\n            </span>\n            <span v-if=\"row.itemType == 'product'\">\n              {{ suggestedPriceRangeForSimilarProducts }}\n            </span>\n\n            <!--            <a-progress type=\"circle\"-->\n            <!--                        :width=\"30\"-->\n            <!--                        style=\"margin-left: 15px\"-->\n            <!--                        :percent=\"100\"/>-->\n\n            <!--          <span style=\"margin-left: 10px;\">100% match</span>-->\n            <!--          <span></span>-->\n          </div>\n\n          <div v-if=\"record.title == 'Savings Summary'\">\n          <span style=\"margin-right: 5px;\">\n            {{ savingsRange }}\n          </span>\n            <!--          <a-tag color=\"blue\">Suggested</a-tag>-->\n          </div>\n        </div>\n      </div>\n\n      <div slot=\"summary-tags\" slot-scope=\"summary, record\">\n        <div v-if=\"record.title == 'Suggested Prices'\">\n          <a-tag v-if=\"row.itemType !== 'product'\" color=\"blue\" style=\"margin-right: 0;\">Suggested</a-tag>\n        </div>\n        <div v-if=\"record.title == 'Similar Products'\">\n          <a-progress type=\"circle\" v-if=\"row.itemType !== 'product'\"\n                      :width=\"30\"\n                      :percent=\"100\"/>\n        </div>\n      </div>\n\n      <div slot=\"additional_summary\" slot-scope=\"summary, record\">\n        <div v-if=\"record.title == 'Suggested Prices'\">\n          <span style=\"margin-right: 5px;\">\n            {{ suggestedPriceCo2eRange }}\n          </span>\n        </div>\n        <div v-if=\"record.title == 'Similar Products'\">\n          <a-tag color=\"red\" v-if=\"!similarProductCo2e\">Unknown</a-tag>\n          <span v-if=\"similarProductCo2e\">{{ similarProductCo2e }}</span>\n        </div>\n        <div v-if=\"record.title == 'Savings Summary'\">\n          <a-tag color=\"red\">Unknown</a-tag>\n        </div>\n      </div>\n\n      <div slot=\"expandedRowRender\" slot-scope=\"innerRow\" class=\"basket-row-inner-expanded-row-render\">\n        <suggested-prices v-if=\"innerRow.title == 'Suggested Prices'\"\n                          :row=\"row\"></suggested-prices>\n        <similar-products v-if=\"innerRow.title == 'Similar Products'\"\n                          :row=\"row\"></similar-products>\n        <savings-summary v-if=\"innerRow.title == 'Savings Summary'\"\n                         :row=\"row\"></savings-summary>\n      </div>\n\n    </a-table>\n    <!--    {{ row }}-->\n  </div>\n</template>\n\n<script>\nimport SuggestedPrices from \"./BasketRowInner/SuggestedPrices\";\nimport SimilarProducts from \"./BasketRowInner/SimilarProducts\";\nimport SavingsSummary from \"./BasketRowInner/SavingsSummary\";\nimport Orders from \"../../../mixins/Orders\";\n\nconst _ = require('lodash');\n\nexport default {\n  name: \"BasketRowInner\",\n  components: {SavingsSummary, SimilarProducts, SuggestedPrices},\n  mixins: [Orders],\n  props: ['row'],\n  data() {\n    return {\n      columns: [\n        {\n          dataIndex: 'icon',\n          scopedSlots: {customRender: 'icon'},\n          width: 50\n        },\n        {\n          dataIndex: 'title',\n          scopedSlots: {customRender: 'name'},\n          // width: 595\n        },\n        {\n          dataIndex: 'summary',\n          scopedSlots: {customRender: 'summary'}\n        },\n        {\n          dataIndex: 'summary',\n          // width: 50,\n          scopedSlots: {customRender: 'summary-tags'}\n        },\n        {\n          dataIndex: 'additional_summary',\n          scopedSlots: {customRender: 'additional_summary'}\n        },\n        {}\n      ]\n    }\n  },\n  methods: {\n    getExpandIcon({expanded, record, onExpand}) {\n      return record.section !== 'Lifespan' ? (\n          <a-button style=\"font-weight: 500; padding-left: 0; padding-right; 0; float: right;\"\n                    type=\"link\"\n                    {...{\n                      on: {\n                        click: onExpand.bind(this, [expanded, record])\n                      }\n                    }}\n          >\n            <span>{expanded ? 'Hide' : 'Expand'}</span>\n            <a-icon style=\"font-size: 10px; font-weight: 500;\" type={expanded ? 'up' : 'down'}></a-icon>\n          </a-button>\n      ) : <a-button style=\"opacity: 0; cursor: default;\"></a-button>;\n    }\n  },\n  computed: {\n    innerRows() {\n      let rows = [\n        {\n          icon: 'thunderbolt',\n          title: 'Suggested Prices'\n        }\n      ];\n      if (this.row.itemType === 'order' || this.row.itemType === 'product') {\n        rows.push({\n          icon: 'gold',\n          title: 'Similar Products'\n        });\n      }\n      rows.push({\n        icon: 'dollar',\n        title: 'Savings Summary'\n      });\n      return rows;\n    },\n\n    similarProductCo2e() {\n      // if (this.row.suggestedProducts) {\n      let co2es = _.map(this.row.suggestedProducts, 'co2e');\n      co2es = _.filter(co2es, co2e => co2e);\n      console.log('co2es');\n      console.log(co2es);\n      if (co2es.length) {\n        // let totals = _.map(co2es, 'co2e');\n        // return _.sum(totals, 'co2e.total') + ' kg';\n        let summed = _.sum(co2es);\n        if (summed) {\n          return (Math.floor(_.sum(co2es) * this.row.quantity * 100) / 100) + ' kg';\n        }\n        return null;\n      }\n      return null;\n    },\n\n    benchmarkPrice() {\n      // let prices = _.map(this.row.prices, 'price');\n      // let average = _.mean(prices) * 1.3;\n      // return average;\n      if (this.row.itemType == 'product' && this.row.suggestedProducts.length) {\n        let costs = _.map(this.row.suggestedProducts, 'cost');\n        return _.min(costs) * this.row.quantity;\n      }\n\n      if (this.row.order && this.row.order.id == 3) {\n        return 16183.59 * 100;\n      }\n\n      let prices = _.map(this.row.prices, 'price');\n      let average = _.mean(prices) * 1.3;\n      return average;\n    },\n\n    comparisons() {\n      let comparisons = [\n        {\n          comparison: 'Benchmark',\n          cost: this.benchmarkPrice,\n          savings: this.row.selectedPrice ? (this.benchmarkPrice - this.row.selectedPrice.price) : 0\n        }\n      ];\n\n      if (this.row.order) {\n        comparisons.push({\n          comparison: 'Exact Match',\n          cost: this.row.order.cost,\n          // savings: (this.benchmarkPrice - this.row.order.cost)\n          savings: this.row.selectedPrice ? (this.row.order.cost - this.row.selectedPrice.price) : 0\n        });\n        comparisons.push({\n          comparison: 'Similar Match',\n          cost: 15622 * 100,\n          savings: this.row.selectedPrice ? (15622*100 - this.row.selectedPrice.price) : 0,\n          similarity: 87\n        });\n      }\n\n      return comparisons;\n    },\n\n    savingsRange() {\n      let ordered = _.orderBy(this.comparisons, 'savings');\n      let minSaving = _.first(ordered);\n      let maxSaving = _.last(ordered);\n\n      if (minSaving !== maxSaving) {\n        let minPriceFormatted = this.formatCostInPence2dp({\n          cost: minSaving.savings,\n          cost_currency: 'USD'\n        });\n\n        let maxPriceFormatted = this.formatCostInPence2dp({\n          cost: maxSaving.savings,\n          cost_currency: 'USD'\n        });\n\n        return minPriceFormatted + ' → ' + maxPriceFormatted;\n      } else {\n        return this.formatCostInPence2dp({\n          cost: minSaving.savings,\n          cost_currency: 'USD'\n        });\n      }\n    },\n\n    suggestedPriceRangeForOrder() {\n      if (this.row.order) {\n        let costs = [\n          this.row.order.cost\n        ];\n        if (this.row.order.id == 3) {\n          costs.push(\n              15622 * 100\n          );\n        }\n        let minPrice = _.min(costs);\n        let maxPrice = _.max(costs);\n\n        if (minPrice !== maxPrice) {\n          let minPriceFormatted = this.formatCostInPence2dp({\n            cost: minPrice,\n            cost_currency: 'USD'\n          });\n\n          let maxPriceFormatted = this.formatCostInPence2dp({\n            cost: maxPrice,\n            cost_currency: 'USD'\n          });\n\n          return minPriceFormatted + ' → ' + maxPriceFormatted;\n        } else {\n          return this.formatCostInPence2dp({\n            cost: minPrice,\n            cost_currency: 'USD'\n          });\n        }\n      }\n      return '';\n    },\n\n    suggestedPriceRangeForSimilarProducts() {\n      if (!this.row.suggestedProducts || this.row.suggestedProducts.length === 0) {\n        return '';\n      }\n      let ordered = _.orderBy(this.row.suggestedProducts, 'cost');\n      let minPrice = _.first(ordered);\n      let maxPrice = _.last(ordered);\n\n      if (minPrice !== maxPrice) {\n        let minPriceFormatted = this.formatCostInPence2dp({\n          cost: minPrice.cost * this.row.quantity,\n          cost_currency: 'USD'\n        });\n\n        let maxPriceFormatted = this.formatCostInPence2dp({\n          cost: maxPrice.cost * this.row.quantity,\n          cost_currency: 'USD'\n        });\n\n        return minPriceFormatted + ' → ' + maxPriceFormatted;\n      } else {\n        return this.formatCostInPence2dp({\n          cost: minPrice.cost * this.row.quantity,\n          cost_currency: 'USD'\n        });\n      }\n    },\n\n    suggestedPriceRange() {\n      let prices = this.row.prices;\n      if (prices && prices.length) {\n        let ordered = _.orderBy(prices, 'price');\n        let minPrice = _.first(ordered);\n        let maxPrice = _.last(ordered);\n\n        if (minPrice !== maxPrice) {\n          let minPriceFormatted = this.formatCostInPence2dp({\n            cost: minPrice.price,\n            cost_currency: 'USD'\n          });\n\n          let maxPriceFormatted = this.formatCostInPence2dp({\n            cost: maxPrice.price,\n            cost_currency: 'USD'\n          });\n\n          return minPriceFormatted + ' → ' + maxPriceFormatted;\n        } else {\n          return this.formatCostInPence2dp({\n            cost: minPrice.price,\n            cost_currency: 'USD'\n          });\n        }\n      }\n      return '-';\n    },\n\n    suggestedPriceCo2eRange() {\n      let prices = this.row.prices;\n      if (prices && prices.length) {\n        let ordered = _.orderBy(prices, 'co2e');\n        let minCo2e = _.first(ordered).co2e;\n        let maxCo2e = _.last(ordered).co2e;\n\n        if (minCo2e !== maxCo2e) {\n          let minCo2eFormatted = Math.floor(minCo2e * 100) / 100\n          let maxCo2eFormatted = Math.floor(maxCo2e * 100) / 100\n\n          return minCo2eFormatted + ' → ' + maxCo2eFormatted + ' kg';\n        } else {\n          return Math.floor(minCo2e * 100) / 100 + ' kg';\n        }\n      }\n      return '-';\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.basketRowInnerTable {\n  .rowIcon {\n    font-size: 28px;\n    padding-top: 5px;\n    padding-bottom: 5px;\n  }\n\n  .ant-table-expanded-row, .ant-table-expanded-row:hover {\n    background: #eee;\n\n    .ant-table-placeholder {\n      background: #eee;\n    }\n  }\n\n  .name {\n    font-weight: 500;\n  }\n\n  tr:hover {\n    td {\n      background: none !important;\n    }\n  }\n\n  tr:last-child {\n    td {\n      border-bottom: none !important;\n    }\n  }\n\n  .ant-table-tbody > tr > td {\n    //border-bottom: none !important;\n    border-bottom: 1px solid #e8e8e8 !important;\n  }\n\n  .ant-table-expanded-row {\n    tr {\n      th {\n        //border-bottom: 0;\n      }\n\n      td {\n        border-bottom: 0 solid #e8e8e8 !important;\n      }\n\n      &:last-child {\n        td {\n          border-bottom: 0 !important;\n        }\n      }\n    }\n  }\n}\n\n\n.summary-column {\n  text-align: right;\n  //padding-right: 30px;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasketRowInner.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasketRowInner.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BasketRowInner.vue?vue&type=template&id=41225cd3&\"\nimport script from \"./BasketRowInner.vue?vue&type=script&lang=js&\"\nexport * from \"./BasketRowInner.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BasketRowInner.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"shop-basket\">\n    <a-layout>\n      <a-layout style=\"padding: 7px 30px\">\n\n        <div class=\"wrapper\">\n          <a-page-header title=\"Basket\" @back=\"goBackToShop\">\n            <template slot=\"extra\">\n              <a-button icon=\"shopping-cart\" type=\"primary\">Checkout</a-button>\n            </template>\n          </a-page-header>\n        </div>\n\n        <edit-order-modal :suppliers=\"suppliers\" v-if=\"order && (type === 'order' || type === 'specification')\">\n        </edit-order-modal>\n\n        <div class=\"table-wrapper\" :key=\"tableUpdateKey\">\n          <a-table v-if=\"!isLoading\" class=\"axpi-table\"\n                   :columns=\"columns\"\n                   :pagination=\"false\"\n                   :data-source=\"basket\"\n                   :loading=\"isLoading\"\n          >\n            <div slot=\"name\" slot-scope=\"name, record\">\n              <router-link v-if=\"record.itemType == 'product'\"\n                           :to=\"getProductPageUrl(record)\">{{ name }}\n              </router-link>\n              <a v-if=\"record.itemType == 'order'\" href=\"#\" @click.prevent=\"editOrder(record.order)\">{{ name }}\n              </a>\n              <a v-if=\"record.itemType == 'specification'\" href=\"#\"\n                 @click.prevent=\"editSpecification(record.specification)\">{{ name }}\n              </a>\n            </div>\n\n            <div slot=\"image\" slot-scope=\"image, row\">\n              <a-avatar\n                  size=\"large\"\n                  :src=\"getImageSrc(row)\"\n              />\n            </div>\n\n            <div slot=\"quantity\" slot-scope=\"quantity, record\">\n              <!-- Product -->\n              <div v-if=\"record.itemType === 'product'\" class=\"quantity-changer\">\n                <a-input-group compact>\n                  <a-button\n                      @click.prevent=\"() => decrementProductQuantity({product: record.product, selectedPriceId: record.selectedPriceId})\"\n                      icon=\"minus\">\n                  </a-button>\n                  <!--                  <div>{{ record.quantity }}</div>-->\n                  <a-input type=\"number\" class=\"quantity-input\"\n                           @change=\"e => setProductQuantity({quantity: e.target.value, id: record['id'], selectedPriceId: record.selectedPriceId})\"\n                           :value=\"record.quantity\"></a-input>\n                  <a-button\n                      @click.prevent=\"() => incrementProductQuantity({product: record.product, selectedPriceId: record.selectedPriceId})\"\n                      icon=\"plus\"></a-button>\n                </a-input-group>\n              </div>\n              <!-- / Product -->\n              <!-- Order -->\n              <div v-if=\"record.itemType === 'order'\" class=\"quantity-changer\">\n                <a-input-group compact>\n                  <a-button @click.prevent=\"() => decrementPastOrderQuantity(record.order)\"\n                            icon=\"minus\">\n                  </a-button>\n                  <a-input type=\"number\" class=\"quantity-input\"\n                           @change=\"e => setPastOrderQuantity({quantity: e.target.value, id: record['id']})\"\n                           :value=\"record.quantity\"></a-input>\n                  <a-button @click.prevent=\"() => incrementPastOrderQuantity(record.order)\"\n                            icon=\"plus\"></a-button>\n                </a-input-group>\n              </div>\n              <!-- / Order -->\n              <!-- Specification -->\n              <div v-if=\"record.itemType === 'specification'\" class=\"quantity-changer\">\n                <a-input-group compact>\n                  <a-button @click.prevent=\"() => decrementSpecificationQuantity(record.specification)\"\n                            icon=\"minus\">\n                  </a-button>\n                  <a-input type=\"number\" class=\"quantity-input\"\n                           @change=\"e => setSpecificationQuantity({quantity: e.target.value, id: record['id']})\"\n                           :value=\"record.quantity\"></a-input>\n                  <a-button @click.prevent=\"() => incrementSpecificationQuantity(record.specification)\"\n                            icon=\"plus\"></a-button>\n                </a-input-group>\n              </div>\n              <!-- / Specification -->\n            </div>\n\n            <div slot=\"supplier\" slot-scope=\"supplier, record\">\n              <a-select :value=\"record.selectedPrice.id\"\n                        v-if=\"!record.isLoadingPrices && record.prices && record.selectedPrice\"\n                        option-filter-prop=\"children\"\n                        :filter-option=\"filterOption\"\n                        show-search\n                        @change=\"(e) => selectPriceById(record, e)\"\n                        style=\"width: 200px\">\n                <a-select-option v-for=\"(price, i) in record.prices\"\n                                 :value=\"price.id\"\n                                 :key=\"i\">\n                  {{ price.supplier_name }}\n                </a-select-option>\n              </a-select>\n              <span v-else>\n                <a-spin size=\"small\" v-if=\"record.isLoadingPrices\"></a-spin>\n                <span v-else>No suppliers</span>\n              </span>\n              <!--              <a-dropdown>-->\n              <!--                <a class=\"ant-dropdown-link\" @click=\"e => e.preventDefault()\">-->\n              <!--                  {{ record.selectedPrice ? record.selectedPrice.supplier_name : 'Select supplier' }}-->\n              <!--                  <a-icon type=\"down\"/>-->\n              <!--                </a>-->\n              <!--                <a-menu slot=\"overlay\">-->\n              <!--                  <a-menu-item v-for=\"(price, i) in record.prices\" :key=\"i\">-->\n              <!--                    <a href=\"#\" @click.prevent=\"() => selectPrice(record, price)\">{{ price.supplier_name }}</a>-->\n              <!--                  </a-menu-item>-->\n              <!--                </a-menu>-->\n              <!--              </a-dropdown>-->\n            </div>\n\n            <div slot=\"cost\" slot-scope=\"cost, record\">\n              <a-spin v-if=\"record.isLoadingPrices\" size=\"small\"></a-spin>\n              <div v-if=\"!record.isLoadingPrices\">\n\n                <!-- Suggested -->\n                <div v-if=\"getSavingType(record) === 'Suggested'\">\n              <span>\n              {{\n                  record.selectedPrice ? formatCostInPence2dp({\n                    cost: getPriceToShow(record.selectedPrice.price, record.quantity, record.itemType),\n                    cost_currency: 'USD'\n                  }) : '-'\n                }}\n              </span>\n<!--                  <a-tag-->\n<!--                      v-if=\"record.prices && record.itemType !== 'product' && record.selectedPrice\"-->\n<!--                      color=\"blue\" style=\"margin-left: 5px;\">Suggested-->\n<!--                  </a-tag>-->\n                </div>\n                <!-- / Suggested -->\n\n                <!-- Exact -->\n                <div v-if=\"getSavingType(record) === 'Exact'\">\n              <span>\n              {{\n                  record.selectedPrice ? formatCostInPence2dp({\n                    cost: record.order.cost,\n                    cost_currency: 'USD'\n                  }) : '-'\n                }}\n              </span>\n<!--                  <a-tag-->\n<!--                      color=\"blue\" style=\"margin-left: 5px;\">Exact-->\n<!--                  </a-tag>-->\n                </div>\n                <!-- / Exact -->\n\n                <!-- Savings -->\n                <div style=\"margin-top: 10px;\"\n                     v-if=\"record.prices && record.selectedPrice\">\n                  <span>{{\n                      getSavings(record) ? formatCostInPence2dp({\n                        cost: getSavings(record),\n                        cost_currency: 'USD'\n                      }) : '-'\n                    }}</span>\n<!--                  <a-tag-->\n<!--                      :color=\"(getSavings(record) && getSavings(record) > 0) ? 'green' : 'red'\"-->\n<!--                      style=\"margin-left: 5px;\">Savings-->\n<!--                  </a-tag>-->\n                </div>\n                <!-- / Savings -->\n\n              </div>\n            </div>\n\n            <div slot=\"cost-tags\" slot-scope=\"cost, record\">\n              <a-spin v-if=\"record.isLoadingPrices\" size=\"small\"></a-spin>\n              <div v-if=\"!record.isLoadingPrices\">\n                <div v-if=\"getSavingType(record) === 'Suggested'\">\n                  <a-tag\n                      v-if=\"record.prices && record.selectedPrice\"\n                      color=\"blue\" style=\"margin-left: 5px;\">Suggested\n                  </a-tag>\n                </div>\n                <div v-if=\"getSavingType(record) === 'Exact'\">\n                  <a-tag\n                      color=\"blue\" style=\"margin-left: 5px;\">Exact\n                  </a-tag>\n                </div>\n                <div style=\"margin-top: 10px;\"\n                     v-if=\"record.prices && record.selectedPrice\">\n                  <a-tag\n                      :color=\"(getSavings(record) && getSavings(record) > 0) ? 'green' : 'red'\"\n                      style=\"margin-left: 5px;\">Savings\n                  </a-tag>\n                </div>\n              </div>\n            </div>\n\n            <div slot=\"co2e\" slot-scope=\"co2e, record\">\n              <a-spin v-if=\"record.isLoadingPrices\" size=\"small\"></a-spin>\n              <span v-else>\n                <span v-if=\"getTotalCo2e(record)\">{{ getTotalCo2e(record) }} kg</span>\n                <a-tag color=\"red\" v-else>Unknown</a-tag>\n              </span>\n            </div>\n\n            <div slot=\"actions\" slot-scope=\"actions, row\">\n              <div class=\"actions\">\n                <request-quote-button v-if=\"row.itemType !== 'product'\"></request-quote-button>\n              </div>\n            </div>\n\n            <div slot=\"expandedRowRender\" slot-scope=\"record\">\n              <basket-row-inner :row=\"record\"></basket-row-inner>\n            </div>\n\n            <!--            <a-table slot=\"expandedRowRender\" slot-scope=\"record\" :columns=\"record.innerColumns\" :data-source=\"record.innerRows\" :pagination=\"false\">-->\n\n            <!--            </a-table>-->\n\n            <!--            <a-table-->\n            <!--                slot=\"expandedRowRender\"-->\n            <!--                slot-scope=\"record\"-->\n            <!--                :columns=\"innerColumns\"-->\n            <!--                :data-source=\"record.prices\"-->\n            <!--                :pagination=\"false\"-->\n            <!--            >-->\n            <!--              <div slot=\"cost\" slot-scope=\"cost, record\">-->\n            <!--                {{-->\n            <!--                  record.price ? formatCostInPence2dp({-->\n            <!--                    cost: record.price,-->\n            <!--                    cost_currency: 'USD'-->\n            <!--                  }) : '-'-->\n            <!--                }}-->\n            <!--              </div>-->\n            <!--              <div slot=\"co2e\" slot-scope=\"co2e\">-->\n            <!--                <span v-if=\"getSupplierCo2e(co2e, record)\">-->\n            <!--                  {{ getSupplierCo2e(co2e, record) }} kg-->\n            <!--                </span>-->\n            <!--                <a-tag color=\"red\" v-else>Unknown</a-tag>-->\n            <!--              </div>-->\n            <!--            </a-table>-->\n          </a-table>\n        </div>\n\n        <div class=\"optimise-wrapper\">\n          <optimise-basket></optimise-basket>\n        </div>\n\n      </a-layout>\n    </a-layout>\n  </div>\n</template>\n\n<script>\nimport Orders from \"../../mixins/Orders\";\nimport {mapGetters, mapActions} from 'vuex';\nimport OptimiseBasket from \"./Basket/OptimiseBasket\";\nimport RequestQuoteButton from \"./Basket/RequestQuoteButton\";\nimport EditOrderModal from \"../../components/Orders/EditOrderModal\";\nimport axios from \"axios\";\nimport eventBus from \"../../event-bus\";\nimport BasketRowInner from \"./Basket/BasketRowInner\";\n\nconst _ = require('lodash');\n\nconst innerColumns = [\n  {title: 'Supplier', dataIndex: 'supplier_name', key: 'supplier_name'},\n  {title: 'Cost', dataIndex: 'cost', key: 'cost', scopedSlots: {customRender: 'cost'}},\n  {title: 'CO2e', dataIndex: 'co2e', key: 'co2e', scopedSlots: {customRender: 'co2e'}},\n];\n\nexport default {\n  name: \"Basket\",\n  mixins: [Orders],\n  components: {BasketRowInner, RequestQuoteButton, OptimiseBasket, EditOrderModal},\n  data() {\n    return {\n      innerColumns,\n      columns: [\n        {\n          title: '',\n          width: 20,\n          scopedSlots: {customRender: 'image'}\n        },\n        {\n          title: 'Name',\n          dataIndex: 'name',\n          width: 200,\n          scopedSlots: {customRender: 'name'}\n        },\n        {\n          title: 'Quantity',\n          dataIndex: 'quantity',\n          scopedSlots: {customRender: \"quantity\"},\n          width: 140\n        },\n        {\n          title: 'Supplier',\n          dataIndex: 'supplier',\n          scopedSlots: {customRender: \"supplier\"},\n          width: 130\n        },\n        {\n          title: 'Cost',\n          dataIndex: 'cost',\n          scopedSlots: {customRender: \"cost\"},\n          width: 110\n        },\n        {\n          title: '',\n          dataIndex: 'cost',\n          scopedSlots: {customRender: \"cost-tags\"},\n          width: 180\n        },\n        {\n          title: 'CO2e',\n          dataIndex: 'co2e',\n          scopedSlots: {customRender: \"co2e\"},\n          width: 100\n        },\n        {\n          title: \"\",\n          scopedSlots: {customRender: \"actions\"},\n          width: 10\n        }\n      ],\n      suppliers: [],\n      isLoadingSuppliers: false\n    }\n  },\n  created() {\n    this.loadSuppliers();\n\n    let vm = this;\n\n    eventBus.$on('specification-updated', function (params) {\n      let p = _.find(vm.basket, item => {\n        return (\n            item.itemType === 'specification'\n            && item.id === params.id\n        );\n      });\n      vm.loadTruepricesForSpecification({\n        spec: {id: params.id},\n        quantity: p.quantity\n      });\n    });\n\n    eventBus.$on('order-updated', function (params) {\n      let p = _.find(vm.basket, item => {\n        return (\n            item.itemType === 'order'\n            && item.id === params.id\n        );\n      });\n      vm.loadTruepricesForOrder({\n        order: {id: params.id},\n        quantity: p.quantity\n      });\n    });\n  },\n  methods: {\n    ...mapActions('shop', {\n      incrementProductQuantity: 'incrementProductQuantity',\n      decrementProductQuantity: 'decrementProductQuantity',\n      setProductQuantity: 'setProductQuantity',\n\n      incrementPastOrderQuantity: 'incrementPastOrderQuantity',\n      decrementPastOrderQuantity: 'decrementPastOrderQuantity',\n      setPastOrderQuantity: 'setPastOrderQuantity',\n\n      incrementSpecificationQuantity: 'incrementSpecificationQuantity',\n      decrementSpecificationQuantity: 'decrementSpecificationQuantity',\n      setSpecificationQuantity: 'setSpecificationQuantity',\n\n      updateBasketSelectedPrice: 'updateBasketSelectedPrice',\n      loadTruepricesForSpecification: 'loadTruepricesForSpecification',\n      loadTruepricesForOrder: 'loadTruepricesForOrder'\n    }),\n\n    ...mapActions('orderEditor', {\n      setWizardStage: 'setWizardStage',\n      loadOrder: 'loadOrder',\n      loadSpecification: 'loadSpecification'\n    }),\n\n    getSavingType(row) {\n      let prices = _.map(row.prices, 'price');\n      let benchmarkPrice = _.mean(prices) * 1.3;\n\n      // let savingFromBenchmark = (benchmarkPrice - row.selectedPrice.price);\n\n      if (row.order && row.order.cost) {\n        // let savingComparedToBefore = (row.order.cost - row.selectedPrice.price);\n        let isSupplierSame = row.order.supplier_id == row.selectedPrice.supplier_id;\n        if (row.order.cost < benchmarkPrice && isSupplierSame) {\n          return 'Exact';\n        }\n      }\n\n      return 'Suggested';\n    },\n\n    getSavings(row) {\n      let prices = _.map(row.prices, 'price');\n      let benchmarkPrice = _.mean(prices) * 1.3;\n\n      let savingFromBenchmark = (benchmarkPrice - row.selectedPrice.price);\n\n      if (row.order && row.order.cost) {\n        let savingComparedToBefore = (row.order.cost - row.selectedPrice.price);\n\n        // let isSupplierSame = row.order.supplier_id == row.selectedPrice.supplier_id;\n        if (row.order.cost < benchmarkPrice) {\n          return savingComparedToBefore;\n        }\n      }\n\n      if (row.suggestedProducts && row.suggestedProducts.length) {\n        let orderedByCost = _.orderBy(row.suggestedProducts, 'cost');\n        let lowestPrice = _.first(orderedByCost).cost;\n        let savingComparedToBefore = (lowestPrice - row.selectedPrice.price);\n        if (lowestPrice < benchmarkPrice) {\n          return savingComparedToBefore * row.quantity;\n        }\n      }\n\n      return savingFromBenchmark;\n\n      // return (benchmarkPrice - row.selectedPrice.price);\n    },\n\n    loadSuppliers() {\n      let vm = this;\n      vm.isLoadingSuppliers = true;\n      axios\n          .get(window.API_BASE + \"/suppliers\")\n          .then((r) => {\n            vm.suppliers = r.data;\n            vm.isLoadingSuppliers = false;\n          })\n          .catch((e) => {\n            console.log(e);\n            vm.isLoadingSuppliers = false;\n            vm.$message.error(\"Error loading suppliers\");\n          });\n    },\n\n    editOrder(order) {\n      this.setWizardStage(0);\n      this.loadOrder(order.id);\n    },\n\n    editSpecification(specification) {\n      this.setWizardStage(0);\n      this.loadSpecification(\n          specification.id\n      );\n    },\n\n    getPriceToShow(price, quantity, itemType) {\n      if (itemType === 'product') {\n        return price * quantity;\n      }\n      return price;\n    },\n\n    getTotalCo2e(item) {\n      let co2e = 0;\n      if (item.itemType === 'product' && item.selectedPrice && item.selectedPrice.co2e) {\n        co2e = Math.round((item.quantity * item.selectedPrice.co2e) * 100) / 100;\n      } else if (item.selectedPrice && item.selectedPrice.co2e) {\n        co2e = Math.round(item.selectedPrice.co2e * 100) / 100;\n      }\n      return co2e ? co2e : 0;\n    },\n\n    getSupplierCo2e(co2e, item) {\n      let co2eToReturn = co2e;\n      if (item.itemType === 'product') {\n        co2eToReturn = co2eToReturn * item.quantity;\n      }\n      return co2eToReturn ? Math.round(co2eToReturn * 100) / 100 : 0;\n    },\n\n    filterOption(input, option) {\n      return (\n          option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n      );\n    },\n\n    getProductPageUrl(product) {\n      return '/products/' + product['id'] + '?fromBasket=1';\n    },\n\n    getOrderUrl(order) {\n      return '/orders/' + order.id;\n    },\n\n    goBackToShop() {\n      this.$router.push('/shop');\n    },\n\n    getImageSrc(item) {\n      if (item['product'] && item['product']['imageURLs'] && item['product']['imageURLs'].length) {\n        return item['product']['imageURLs'][0];\n      }\n      return '/img/icons/basket-order-icon.png';\n    },\n\n    selectPrice(record, price) {\n      this.updateBasketSelectedPrice({\n        selectedPrice: price,\n        basketItem: record\n      });\n    },\n\n    selectPriceById(record, priceId) {\n      this.updateBasketSelectedPrice({\n        selectedPrice: _.find(record.prices, {id: priceId}),\n        basketItem: record\n      });\n    },\n\n    getExpandIcon({expanded, record, onExpand}) {\n      return (\n          <a-button style=\"font-weight: 500; padding-left: 0; padding-right; 0; float: right;\"\n                    type=\"link\"\n                    {...{\n                      on: {\n                        click: onExpand.bind(this, [expanded, record])\n                      }\n                    }}\n          >\n            <span>{expanded ? 'Hide' : 'Expand'}</span>\n            <a-icon style=\"font-size: 10px; font-weight: 500;\" type={expanded ? 'up' : 'down'}></a-icon>\n          </a-button>\n      );\n    }\n  },\n  computed: {\n    ...mapGetters('shop', {\n      basket: 'basket',\n      isLoading: 'isLoading',\n      tableUpdateKey: 'tableUpdateKey'\n    }),\n\n    ...mapGetters('orderEditor', {\n      order: 'order',\n      type: 'type'\n    })\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.shop-basket {\n\n}\n\n.wrapper {\n  max-height: 100%;\n  overflow-y: scroll;\n}\n\n.quantity-changer {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  .quantity-input {\n    width: calc(100% - 32px - 32px);\n    -moz-appearance: textfield;\n    text-align: center;\n    padding-left: 7px;\n\n    &::-webkit-outer-spin-button,\n    &::-webkit-inner-spin-button {\n      -webkit-appearance: none;\n      margin: 0;\n    }\n  }\n}\n\n.ant-table-expanded-row-level-1 {\n  .ant-table-wrapper {\n    margin-top: -13px !important;\n    margin-bottom: 0;\n  }\n}\n\n.actions {\n  text-align: right;\n}\n\n.optimise-wrapper {\n  margin-top: 60px;\n  margin-bottom: 40px;\n}\n\n.text-success {\n  color: #52c41a;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Basket.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Basket.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Basket.vue?vue&type=template&id=23f4c497&scoped=true&\"\nimport script from \"./Basket.vue?vue&type=script&lang=js&\"\nexport * from \"./Basket.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Basket.vue?vue&type=style&index=0&id=23f4c497&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23f4c497\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimilarProducts.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SavingsSummary.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptimiseBasket.vue?vue&type=style&index=0&id=1bc6efad&scoped=true&lang=scss&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuggestedPrices.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Basket.vue?vue&type=style&index=0&id=23f4c497&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasketRowInner.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}