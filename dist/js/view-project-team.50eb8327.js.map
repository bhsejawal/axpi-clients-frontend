{"version":3,"sources":["webpack:///./src/views/Projects/LeftSidebar.vue?cecc","webpack:///src/views/Projects/LeftSidebar.vue","webpack:///./src/views/Projects/LeftSidebar.vue?61a3","webpack:///./src/views/Projects/LeftSidebar.vue?e3b0","webpack:///./src/views/Projects/Team.vue?30ce","webpack:///./src/views/Projects/Team/AddTeamMemberButtonAndModal.vue?7721","webpack:///./src/views/Projects/Team.vue?1dd6","webpack:///./src/views/Projects/Team/AddTeamMemberButtonAndModal.vue?3556","webpack:///src/views/Projects/Team/AddTeamMemberButtonAndModal.vue","webpack:///./src/views/Projects/Team/AddTeamMemberButtonAndModal.vue?5193","webpack:///./src/views/Projects/Team/AddTeamMemberButtonAndModal.vue?e6ae","webpack:///./src/views/Projects/Team/TeamListItem.vue?28b3","webpack:///src/views/Projects/Team/TeamListItem.vue","webpack:///./src/views/Projects/Team/TeamListItem.vue?8356","webpack:///./src/views/Projects/Team/TeamListItem.vue","webpack:///src/views/Projects/Team.vue","webpack:///./src/views/Projects/Team.vue?f62d","webpack:///./src/views/Projects/Team.vue?98b8","webpack:///./src/views/Projects/LeftSidebar.vue?1b87"],"names":["render","_vm","this","_h","$createElement","_c","_self","style","background","borderRight","attrs","staticClass","class","isOverview","overviewHref","_v","isTeam","teamHref","isChat","chatHref","isActions","actionsHref","isOrders","ordersHref","staticRenderFns","name","props","methods","saveAndExit","$router","push","computed","isScenarios","$route","scenarioHref","optimisation","id","project","component","isLoading","isLoadingTeam","isDeleting","isLoadingRoles","key","updateKey","staticStyle","_s","projectId","on","fetchTeam","_e","team","scopedSlots","_u","fn","item","roles","$event","preventDefault","showModal","model","value","callback","$$v","visible","expression","isSaving","stage","fetch","searchQuery","reloadKey","columns","rowSelection","record","data","pagination","loading","searchQueryIsDirty","handleTableChange","canSave","assignPermissions","isLoadingFleshedUsers","_l","userId","i","getFleshedUser","roleOptions","userRolesMap","$set","goBack","save","serverErrors","selectedUserIds","fleshedUsers","watch","loadRoles","vm","determineSearchParams","results_per_page","q","r","console","log","e","$message","error","fetchFleshedUsers","user_ids","_","find","debounce","pager","current","pageSize","page","sort_field","sorter","field","sort_order","order","canAssignPermissions","map","label","role","length","onChange","getCheckboxProps","slot","cancelEditing","isEditing","edit","removeTeamMember","formatTeamMemberProjectRoles","roleCheckboxOptions","projectRoleIds","user","getAvatar","mixins","Images","project_role_ids","success","$emit","join","components","Forms","created","params","loadProject","fetchRoles","refresh","backToAllProjects","setErrors"],"mappings":"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","file":"js/view-project-team.50eb8327.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-layout-sider',{style:({ background: '#f7fafc', borderRight: '1px solid #e3e8ee' }),attrs:{\"width\":\"170\",\"theme\":\"dark\",\"collapsed-width\":0,\"trigger\":null}},[_c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"sidebar-menu\"},[_c('a',{class:{'selected': _vm.isOverview},attrs:{\"href\":_vm.overviewHref}},[_vm._v(\"Overview\")]),_c('a',{class:{'selected': _vm.isTeam},attrs:{\"href\":_vm.teamHref}},[_vm._v(\"Team\")]),_c('a',{class:{'selected': _vm.isChat},attrs:{\"href\":_vm.chatHref}},[_vm._v(\"Chat\")]),_c('a',{class:{'selected': _vm.isActions},attrs:{\"href\":_vm.actionsHref}},[_vm._v(\"Actions\")]),_c('a',{class:{'selected': _vm.isOrders},attrs:{\"href\":_vm.ordersHref}},[_vm._v(\"Orders\")])]),_c('div',{staticClass:\"sidebar-footer\"})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-layout-sider width=\"170\" theme=\"dark\"\n                  :style=\"{ background: '#f7fafc', borderRight: '1px solid #e3e8ee' }\"\n                  :collapsed-width=\"0\" :trigger=\"null\">\n    <div class=\"wrapper\">\n      <div class=\"sidebar-menu\">\n        <a :href=\"overviewHref\" :class=\"{'selected': isOverview}\">Overview</a>\n        <a :href=\"teamHref\" :class=\"{'selected': isTeam}\">Team</a>\n        <a :href=\"chatHref\" :class=\"{'selected': isChat}\">Chat</a>\n        <a :href=\"actionsHref\" :class=\"{'selected': isActions}\">Actions</a>\n        <a :href=\"ordersHref\" :class=\"{'selected': isOrders}\">Orders</a>\n        <!--        <a :href=\"reviewHref\" :class=\"{'selected': isReview}\">Review</a>-->\n      </div>\n      <div class=\"sidebar-footer\">\n<!--        <a-button block type=\"primary\" @click=\"saveAndExit\">Save and exit</a-button>-->\n      </div>\n    </div>\n  </a-layout-sider>\n</template>\n\n<script>\nexport default {\n  name: \"LeftSidebar\",\n  props: ['project'],\n  methods: {\n    saveAndExit() {\n      this.$router.push('/projects');\n    }\n  },\n  computed: {\n    isScenarios() {\n      return this.$route.name === 'Optimisation Scenarios';\n    },\n\n    scenarioHref() {\n      if (this.optimisation) {\n        return '/optimisations/' + this.optimisation.id + '/scenarios';\n      }\n      return '#';\n    },\n\n    isOverview() {\n      return this.$route.name === 'View Project';\n    },\n\n    overviewHref() {\n      if (this.project) {\n        return '/projects/' + this.project.id;\n      }\n      return '#';\n    },\n\n    isTeam() {\n      return this.$route.name === 'Project Team';\n    },\n\n    teamHref() {\n      if (this.project) {\n        return '/projects/' + this.project.id + '/team';\n      }\n      return '#';\n    },\n\n    isChat() {\n      return this.$route.name === 'Project Chat';\n    },\n\n    chatHref() {\n      if (this.project) {\n        return '/projects/' + this.project.id + '/chat';\n      }\n      return '#';\n    },\n\n    isActions() {\n      return this.$route.name === 'Project Actions';\n    },\n\n    actionsHref() {\n      if (this.project) {\n        return '/projects/' + this.project.id + '/actions';\n      }\n      return '#';\n    },\n\n    isOrders() {\n      return this.$route.name === 'Project Orders';\n    },\n\n    ordersHref() {\n      if (this.project) {\n        return '/projects/' + this.project.id + '/orders';\n      }\n      return '#';\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.wrapper {\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n}\n\n.sidebar-menu {\n  flex: 1;\n}\n\n.sidebar-menu {\n  padding-top: 20px;\n\n  a {\n    width: 100%;\n    display: block;\n    margin-bottom: 19px;\n    font-size: 15px;\n    color: #4F566B;\n    padding-left: 20px;\n    padding-right: 20px;\n    position: relative;\n\n    &.selected {\n      font-weight: bold;\n\n      &:before {\n        content: \"\";\n        box-shadow: 0 0 10px #9ecaed;\n        position: absolute;\n        left: 0;\n        top: 0;\n        bottom: 0;\n        width: 2px;\n        background-color: #3735b3;\n      }\n    }\n  }\n}\n\n.sidebar-footer {\n  flex-shrink: 1;\n  padding: 10px 10px;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeftSidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeftSidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LeftSidebar.vue?vue&type=template&id=4241466c&scoped=true&\"\nimport script from \"./LeftSidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./LeftSidebar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LeftSidebar.vue?vue&type=style&index=0&id=4241466c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4241466c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Team.vue?vue&type=style&index=0&id=591346bb&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddTeamMemberButtonAndModal.vue?vue&type=style&index=0&id=031953f6&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"projects\"},[_c('loading-screen',{attrs:{\"is-loading\":_vm.isLoading||_vm.isLoadingTeam||_vm.isDeleting||_vm.isLoadingRoles}}),_c('a-layout',[_c('left-sidebar',{attrs:{\"project\":_vm.project}}),_c('a-layout',{key:_vm.updateKey,staticStyle:{\"padding\":\"7px 30px\"}},[(_vm.project)?_c('div',{staticClass:\"page-header\"},[_c('h1',{staticClass:\"page-title\"},[_vm._v(\" \"+_vm._s(_vm.project.name)+\" \")]),_c('div',{staticClass:\"actions\"},[_c('add-team-member-button-and-modal',{attrs:{\"project-id\":_vm.projectId},on:{\"reload\":_vm.fetchTeam}})],1)]):_vm._e(),_c('div',[_c('a-list',{staticClass:\"project-list\",attrs:{\"loading\":_vm.isLoadingTeam,\"item-layout\":\"horizontal\",\"data-source\":_vm.team},scopedSlots:_vm._u([{key:\"renderItem\",fn:function(item){return _c('team-list-item',{attrs:{\"roles\":_vm.roles,\"project-id\":_vm.projectId,\"item\":item},on:{\"reload\":_vm.fetchTeam}})}}])}),_c('div',{staticClass:\"footer-actions\"})],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"plus\"},on:{\"click\":function($event){$event.preventDefault();return _vm.showModal($event)}}},[_vm._v(\" Add Team Members \")]),_c('a-modal',{attrs:{\"width\":700,\"centered\":true,\"title\":\"Add Team Members To Project\",\"footer\":null},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[_c('loading-screen',{attrs:{\"is-loading\":_vm.isSaving}}),(_vm.stage === 1)?_c('div',[_c('div',{staticStyle:{\"margin-bottom\":\"20px\",\"text-align\":\"left\"}},[_c('a-input-search',{staticStyle:{\"width\":\"300px\"},attrs:{\"placeholder\":\"Search users\"},on:{\"search\":_vm.fetch},model:{value:(_vm.searchQuery),callback:function ($$v) {_vm.searchQuery=$$v},expression:\"searchQuery\"}})],1),_c('a-table',{key:_vm.reloadKey,staticClass:\"axpi-table\",attrs:{\"columns\":_vm.columns,\"row-selection\":_vm.rowSelection,\"row-key\":function (record) { return record['id']; },\"data-source\":_vm.data,\"pagination\":_vm.pagination,\"loading\":_vm.loading || _vm.searchQueryIsDirty || _vm.isLoadingRoles},on:{\"change\":_vm.handleTableChange}}),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin-top\":\"15px\"}},[_c('a-button',{attrs:{\"disabled\":!_vm.canSave,\"type\":\"primary\"},on:{\"click\":_vm.assignPermissions}},[_vm._v(\"Next \")])],1)],1):_vm._e(),(_vm.stage === 2)?_c('div',[(_vm.isLoadingFleshedUsers)?_c('div',[_c('div',{staticClass:\"text-center\"},[_c('a-spin')],1)]):_vm._e(),(!_vm.isLoadingFleshedUsers)?_c('div',[_vm._l((_vm.selectedUserIds),function(userId,i){return _c('div',{key:i,staticClass:\"user-permission-block\"},[(_vm.getFleshedUser(userId))?_c('div',[_c('b',[_vm._v(_vm._s(_vm.getFleshedUser(userId).name))]),_c('div',{staticClass:\"checkbox-group-wrapper\"},[_c('a-checkbox-group',{attrs:{\"options\":_vm.roleOptions},model:{value:(_vm.userRolesMap[userId]),callback:function ($$v) {_vm.$set(_vm.userRolesMap, userId, $$v)},expression:\"userRolesMap[userId]\"}})],1)]):_c('div',[_c('b',{staticClass:\"text-danger\"},[_vm._v(\"Can't find fleshed user\")])])])}),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin-top\":\"15px\"}},[_c('a-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"default\"},on:{\"click\":_vm.goBack}},[_vm._v(\" Back \")]),_c('a-button',{attrs:{\"disabled\":!_vm.canSave,\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\" Save \")])],1)],2):_vm._e()]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <a-button type=\"primary\" icon=\"plus\" @click.prevent=\"showModal\">\n      Add Team Members\n    </a-button\n    >\n    <a-modal\n        :width=\"700\"\n        v-model=\"visible\"\n        :centered=\"true\"\n        title=\"Add Team Members To Project\"\n        :footer=\"null\"\n    >\n      <loading-screen :is-loading=\"isSaving\"></loading-screen>\n\n      <!-- Users table -->\n      <div v-if=\"stage === 1\">\n        <div style=\"margin-bottom: 20px; text-align: left\">\n          <a-input-search\n              placeholder=\"Search users\"\n              v-model=\"searchQuery\"\n              style=\"width: 300px\"\n              @search=\"fetch\"\n          />\n        </div>\n\n        <a-table\n            :key=\"reloadKey\"\n            class=\"axpi-table\"\n            :columns=\"columns\"\n            :row-selection=\"rowSelection\"\n            :row-key=\"(record) => record['id']\"\n            :data-source=\"data\"\n            :pagination=\"pagination\"\n            :loading=\"loading || searchQueryIsDirty || isLoadingRoles\"\n            @change=\"handleTableChange\"\n        >\n        </a-table>\n\n        <div style=\"text-align: right; margin-top: 15px\">\n          <a-button :disabled=\"!canSave\" type=\"primary\" @click=\"assignPermissions\"\n          >Next\n          </a-button>\n        </div>\n      </div>\n      <!-- / Users table -->\n\n      <!-- Permissions selector -->\n      <div v-if=\"stage === 2\">\n\n        <!-- Is loading fleshed users -->\n        <div v-if=\"isLoadingFleshedUsers\">\n          <div class=\"text-center\">\n            <a-spin></a-spin>\n          </div>\n        </div>\n        <!-- / Is loading fleshed users -->\n\n        <!-- Fleshed users loaded -->\n        <div v-if=\"!isLoadingFleshedUsers\">\n\n          <!-- Users -->\n          <div v-for=\"(userId, i) in selectedUserIds\" :key=\"i\" class=\"user-permission-block\">\n            <div v-if=\"getFleshedUser(userId)\">\n              <b>{{ getFleshedUser(userId).name }}</b>\n              <div class=\"checkbox-group-wrapper\">\n                <a-checkbox-group v-model=\"userRolesMap[userId]\" :options=\"roleOptions\"/>\n              </div>\n            </div>\n            <div v-else>\n              <b class=\"text-danger\">Can't find fleshed user</b>\n            </div>\n          </div>\n          <!-- / Users -->\n\n          <!-- Actions -->\n          <div style=\"text-align: right; margin-top: 15px\">\n            <a-button type=\"default\" @click=\"goBack\" style=\"margin-right: 10px;\">\n              Back\n            </a-button>\n\n            <a-button :disabled=\"!canSave\" type=\"primary\" @click=\"save\">\n              Save\n            </a-button>\n          </div>\n          <!-- / Actions -->\n\n        </div>\n        <!-- / Fleshed users loaded -->\n      </div>\n      <!-- / Permissions selector -->\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nconst _ = require(\"lodash\");\n\nconst columns = [\n  {\n    title: \"Name\",\n    dataIndex: \"name\",\n    sorter: true,\n  },\n  {\n    title: \"Email\",\n    dataIndex: \"email\",\n    sorter: true,\n  },\n];\n\nexport default {\n  name: \"AddTeamMemberToButtonAndModal\",\n  props: [\"projectId\"],\n  data() {\n    return {\n      visible: false,\n\n      isSaving: false,\n      serverErrors: [],\n\n      loading: false,\n      data: [],\n      pagination: {},\n      searchQuery: \"\",\n      searchQueryIsDirty: false,\n      selectedUserIds: [],\n\n      isLoadingRoles: false,\n      roles: [],\n\n      isLoadingFleshedUsers: false,\n      fleshedUsers: [],\n      userRolesMap: {},\n\n      columns,\n\n      reloadKey: 1,\n      stage: 1\n    };\n  },\n  watch: {\n    searchQuery: function () {\n      this.searchQueryIsDirty = true;\n      this.fetch();\n    },\n  },\n  methods: {\n    showModal() {\n      this.visible = true;\n      this.data = [];\n      this.pagination = {};\n      this.searchQueryIsDirty = false;\n      this.selectedUserIds = [];\n\n      this.userRolesMap = [];\n\n      this.stage = 1;\n      this.reloadKey += 1;\n      this.loadRoles();\n      this.fetch();\n    },\n\n    save() {\n      let vm = this;\n      vm.isSaving = true;\n      axios\n          .post(\n              window.API_BASE +\n              \"/projects/\" +\n              this.projectId +\n              \"/team/add-users\",\n              {\n                user_ids: this.selectedUserIds,\n                user_roles_map: this.userRolesMap\n              }\n          )\n          .then(() => {\n            vm.visible = false;\n            vm.isSaving = false;\n            vm.$message.success(\"Team members added successfully\");\n            vm.$emit(\"reload\");\n          })\n          .catch((e) => {\n            console.log(e);\n            vm.isSaving = false;\n            vm.$message.error(\"Error adding team members\");\n          });\n    },\n\n    determineSearchParams(params) {\n      return {\n        results_per_page: 10,\n        q: this.searchQuery,\n        ...params,\n      };\n    },\n\n    loadRoles() {\n      let vm = this;\n      vm.isLoadingRoles = true;\n      axios.get(window.API_BASE + '/project-roles').then(r => {\n        vm.roles = r.data;\n        vm.isLoadingRoles = false;\n      }).catch(e => {\n        console.log(e);\n        vm.isLoadingRoles = false;\n        vm.roles = [];\n        vm.$message.error('Error loading roles');\n      });\n    },\n\n    fetchFleshedUsers() {\n      let vm = this;\n      vm.isLoadingFleshedUsers = true;\n      vm.fleshedUsers = [];\n      axios.post(window.API_BASE + '/users/get-from-ids', {\n        user_ids: vm.selectedUserIds\n      }).then(r => {\n        vm.isLoadingFleshedUsers = false;\n        vm.fleshedUsers = r.data;\n      }).catch(e => {\n        console.log(e);\n        vm.isLoadingFleshedUsers = false;\n      });\n    },\n\n    getFleshedUser(userId) {\n      return _.find(this.fleshedUsers, {id: userId});\n    },\n\n    fetch: _.debounce(function (params = {}) {\n      this.loading = true;\n      axios\n          .post(\n              window.API_BASE + \"/users/search\",\n              this.determineSearchParams(params)\n          )\n          .then((r) => {\n            const pagination = {...this.pagination};\n            // Read total count from server\n            pagination.total = r.data.total;\n            this.loading = false;\n            this.data = r.data.data;\n            this.pagination = pagination;\n            this.searchQueryIsDirty = false;\n          })\n          .catch((e) => {\n            console.log(e);\n            this.$message.error(\"Error searching users\");\n          });\n    }, 500),\n\n    handleTableChange(pagination, filters, sorter) {\n      const pager = {...this.pagination};\n      pager.current = pagination.current;\n      this.pagination = pager;\n      this.fetch({\n        results_per_page: pagination.pageSize,\n        page: pagination.current,\n        sort_field: sorter.field,\n        sort_order: sorter.order,\n        ...filters,\n      });\n    },\n\n    assignPermissions() {\n      if (this.canAssignPermissions) {\n        this.stage += 1;\n      }\n      this.fetchFleshedUsers();\n    },\n\n    goBack() {\n      this.stage -= 1;\n    }\n  },\n\n  computed: {\n    roleOptions() {\n      return _.map(this.roles, role => {\n        return {\n          label: role.name,\n          value: role.id\n        }\n      });\n    },\n\n    canAssignPermissions() {\n      return this.selectedUserIds.length > 0;\n    },\n\n    canSave() {\n      return this.selectedUserIds.length > 0;\n    },\n\n    rowSelection() {\n      return {\n        onChange: (selectedRowKeys) => {\n          this.selectedUserIds = selectedRowKeys;\n          // console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\n        },\n        getCheckboxProps: (record) => ({\n          props: {\n            disabled: record.name === \"Disabled User\", // Column configuration not to be checked\n            name: record.name,\n          },\n        }),\n      };\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.user-permission-block {\n  margin-bottom: 20px;\n\n  .checkbox-group-wrapper {\n    margin-top: 5px;\n  }\n}\n\n.text-center {\n  text-align: center;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddTeamMemberButtonAndModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddTeamMemberButtonAndModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddTeamMemberButtonAndModal.vue?vue&type=template&id=031953f6&scoped=true&\"\nimport script from \"./AddTeamMemberButtonAndModal.vue?vue&type=script&lang=js&\"\nexport * from \"./AddTeamMemberButtonAndModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddTeamMemberButtonAndModal.vue?vue&type=style&index=0&id=031953f6&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"031953f6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-list-item',[(_vm.isEditing)?_c('div',{attrs:{\"slot\":\"actions\"},slot:\"actions\"},[_c('loading-screen',{attrs:{\"is-loading\":_vm.isSaving}}),_c('a-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){$event.preventDefault();return _vm.save($event)}}},[_vm._v(\"Save \")]),_c('a-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){$event.preventDefault();return _vm.cancelEditing($event)}}},[_vm._v(\"Cancel \")])],1):_vm._e(),(!_vm.isEditing)?_c('a',{attrs:{\"slot\":\"actions\"},on:{\"click\":function($event){$event.preventDefault();return _vm.edit($event)}},slot:\"actions\"},[_vm._v(\"Edit\")]):_vm._e(),(!_vm.isEditing)?_c('a',{staticClass:\"text-danger\",attrs:{\"slot\":\"actions\"},on:{\"click\":function($event){$event.preventDefault();return _vm.removeTeamMember(_vm.item)}},slot:\"actions\"},[_vm._v(\"Remove\")]):_vm._e(),_c('a-list-item-meta',[_c('div',{attrs:{\"slot\":\"description\"},slot:\"description\"},[(!_vm.isEditing)?_c('div',[_vm._v(\" \"+_vm._s(_vm.formatTeamMemberProjectRoles(_vm.item))+\" \")]):_vm._e(),(_vm.isEditing)?_c('div',[_c('a-checkbox-group',{attrs:{\"options\":_vm.roleCheckboxOptions},model:{value:(_vm.projectRoleIds),callback:function ($$v) {_vm.projectRoleIds=$$v},expression:\"projectRoleIds\"}})],1):_vm._e()]),_c('a',{attrs:{\"slot\":\"title\",\"href\":\"#\"},slot:\"title\"},[_vm._v(_vm._s(_vm.item.user.name))]),_c('a-avatar',{attrs:{\"slot\":\"avatar\",\"size\":\"large\",\"src\":_vm.getAvatar(_vm.item.user)},slot:\"avatar\"})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-list-item>\n    <div slot=\"actions\" v-if=\"isEditing\">\n      <loading-screen :is-loading=\"isSaving\"></loading-screen>\n      <a-button type=\"primary\" @click.prevent=\"save\" style=\"margin-right: 10px;\">Save\n      </a-button>\n      <a-button type=\"danger\" @click.prevent=\"cancelEditing\">Cancel\n      </a-button>\n    </div>\n    <a v-if=\"!isEditing\" slot=\"actions\" @click.prevent=\"edit\">Edit</a>\n    <a v-if=\"!isEditing\" slot=\"actions\" class=\"text-danger\" @click.prevent=\"removeTeamMember(item)\">Remove</a>\n    <a-list-item-meta>\n      <div slot=\"description\">\n        <div v-if=\"!isEditing\">\n          {{ formatTeamMemberProjectRoles(item) }}\n        </div>\n        <div v-if=\"isEditing\">\n          <a-checkbox-group\n              v-model=\"projectRoleIds\"\n              :options=\"roleCheckboxOptions\"\n          />\n        </div>\n      </div>\n      <a slot=\"title\" href=\"#\">{{ item.user.name }}</a>\n      <a-avatar\n          slot=\"avatar\"\n          size=\"large\"\n          :src=\"getAvatar(item.user)\"\n      />\n    </a-list-item-meta>\n  </a-list-item>\n</template>\n\n<script>\nimport Images from \"../../../mixins/Images\";\nimport axios from \"axios\";\n\nconst _ = require('lodash');\n\nexport default {\n  name: \"TeamListItem\",\n  props: ['item', 'projectId', 'roles'],\n  mixins: [Images],\n  data() {\n    return {\n      isEditing: false,\n      projectRoleIds: [],\n      isSaving: false\n    }\n  },\n  computed: {\n    roleCheckboxOptions() {\n      return _.map(this.roles, role => ({\n        label: role.name,\n        value: role.id\n      }))\n    }\n  },\n  methods: {\n    edit() {\n      this.isEditing = true;\n      this.projectRoleIds = _.map(this.item.project_roles, 'id');\n    },\n\n    cancelEditing() {\n      this.isEditing = false\n    },\n\n    save() {\n      let vm = this;\n      vm.isSaving = true;\n      axios.put(window.API_BASE + '/projects/' + this.projectId + '/team/' + this.item.id, {\n        project_role_ids: this.projectRoleIds\n      }).then(() => {\n        vm.$message.success('Team member updated successfully');\n        vm.isEditing = false;\n        vm.isSaving = false;\n        vm.$emit('reload');\n      }).catch(e => {\n        console.log(e);\n        vm.isSaving = false;\n        vm.$message.error('Error updating team member');\n      });\n    },\n\n    formatTeamMemberProjectRoles(teamMember) {\n      let roles = [];\n      _.each(teamMember.project_roles, role => {\n        roles.push(role.name);\n      });\n      if (roles.length) {\n        return roles.join(', ');\n      }\n      return 'No roles assigned';\n    },\n\n    removeTeamMember(teamMember) {\n      let vm = this;\n      vm.isDeleting = true;\n      axios.delete(window.API_BASE + '/projects/' + this.projectId + '/team/' + teamMember.id).then(() => {\n        vm.$message.success('Team member removed successfully');\n        vm.isDeleting = false;\n        // vm.fetchTeam();\n        vm.$emit('reload');\n      }).catch(e => {\n        console.log(e);\n        vm.isDeleting = false;\n        vm.$message.error('Error removing team member');\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamListItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamListItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TeamListItem.vue?vue&type=template&id=6be683bc&scoped=true&\"\nimport script from \"./TeamListItem.vue?vue&type=script&lang=js&\"\nexport * from \"./TeamListItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6be683bc\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"projects\">\n    <loading-screen :is-loading=\"isLoading||isLoadingTeam||isDeleting||isLoadingRoles\"></loading-screen>\n    <a-layout>\n      <left-sidebar :project=\"project\"></left-sidebar>\n      <a-layout style=\"padding: 7px 30px\" :key=\"updateKey\">\n\n        <div class=\"page-header\" v-if=\"project\">\n          <h1 class=\"page-title\">\n            {{ project.name }}\n          </h1>\n          <div class=\"actions\">\n            <add-team-member-button-and-modal :project-id=\"projectId\"\n                                              @reload=\"fetchTeam\"\n            ></add-team-member-button-and-modal>\n          </div>\n        </div>\n\n        <div>\n\n          <a-list\n              class=\"project-list\"\n              :loading=\"isLoadingTeam\"\n              item-layout=\"horizontal\"\n              :data-source=\"team\"\n          >\n            <team-list-item @reload=\"fetchTeam\"\n                            :roles=\"roles\"\n                            :project-id=\"projectId\"\n                slot=\"renderItem\" slot-scope=\"item\" :item=\"item\"></team-list-item>\n          </a-list>\n\n          <!-- Footer actions -->\n          <div class=\"footer-actions\">\n<!--            <add-team-member-button-and-modal :project-id=\"projectId\"-->\n<!--                                              @reload=\"fetchTeam\"-->\n<!--            ></add-team-member-button-and-modal>-->\n          </div>\n          <!-- / Footer actions -->\n\n        </div>\n\n      </a-layout>\n    </a-layout>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport {mapGetters, mapActions} from \"vuex\";\nimport LeftSidebar from \"./LeftSidebar\";\nimport Forms from \"../../mixins/Forms\";\nimport AddTeamMemberButtonAndModal from \"./Team/AddTeamMemberButtonAndModal\";\nimport Images from \"../../mixins/Images\";\nimport TeamListItem from \"./Team/TeamListItem\";\n\n// const _ = require('lodash');\n\nexport default {\n  name: \"Team\",\n  components: {TeamListItem, AddTeamMemberButtonAndModal, LeftSidebar},\n  mixins: [Forms, Images],\n  created() {\n    this.projectId = this.$route.params.id;\n    this.loadProject(this.$route.params.id);\n    this.fetchTeam();\n    this.fetchRoles();\n  },\n  watch: {\n    $route() {\n      this.projectId = this.$route.params.id;\n      this.loadProject(this.$route.params.id);\n    }\n  },\n  data() {\n    return {\n      projectId: null,\n      updateKey: 1,\n      team: [],\n      isLoadingTeam: false,\n      isDeleting: false,\n      isLoadingRoles: false,\n      roles: []\n    }\n  },\n  computed: {\n    ...mapGetters('projectEditor', {\n      isLoading: 'isLoading',\n      project: 'project'\n    })\n  },\n  methods: {\n    refresh() {\n      this.loadProject(this.$route.params.id);\n    },\n\n    ...mapActions('projectEditor', {\n      loadProject: 'loadProject'\n    }),\n\n    backToAllProjects() {\n      this.$router.push('/projects');\n    },\n\n    fetchTeam() {\n      let vm = this;\n      vm.isLoadingTeam = true;\n      vm.serverErrors = [];\n      axios.get(window.API_BASE + '/projects/' + this.projectId + '/team').then(r => {\n        vm.isLoadingTeam = false;\n        vm.team = r.data;\n      }).catch(e => {\n        console.log(e);\n        vm.isLoadingTeam = false;\n        vm.setErrors(e);\n        vm.$message.error('Error loading team');\n      });\n    },\n\n    fetchRoles() {\n      let vm = this;\n      vm.isLoadingRoles = true;\n      axios.get(window.API_BASE + '/project-roles').then(r => {\n        vm.roles = r.data;\n        vm.isLoadingRoles = false;\n      }).catch(e => {\n        console.log(e);\n        vm.isLoadingRoles = false;\n        vm.roles = [];\n        vm.$message.error('Error loading roles');\n      });\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.projects {\n  height: 100%;\n}\n\n.page-header {\n  padding-top: 15px;\n  .actions {\n    padding-top: 7px;\n  }\n}\n\n.footer-actions {\n  margin-top: 30px;\n}\n\n.project-list {\n  margin-top: 30px;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Team.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Team.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Team.vue?vue&type=template&id=591346bb&scoped=true&\"\nimport script from \"./Team.vue?vue&type=script&lang=js&\"\nexport * from \"./Team.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Team.vue?vue&type=style&index=0&id=591346bb&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"591346bb\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeftSidebar.vue?vue&type=style&index=0&id=4241466c&scoped=true&lang=scss&\""],"sourceRoot":""}