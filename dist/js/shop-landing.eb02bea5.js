(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop-landing"],{"19df":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("landing-page-carousel"),s("landing-page-carousels")],1)},o=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"carousel-margin-bottom":t.carouselImages.length<2}},[t.isLoading?s("div",[s("a-spin")],1):t._e(),t.isLoading?t._e():s("carousel",{attrs:{autoplay:!0,"autoplay-timeout":3e3,"per-page":1}},t._l(t.carouselImages,(function(e,a){return s("slide",{key:a},[s("div",{staticClass:"carousel-text"},[s("h1",[t._v(t._s(e.title))]),s("h2",[t._v(t._s(e.subtitle))])]),s("img",{staticClass:"carousel-image",attrs:{src:t.getImageSrc(e.image),alt:e.alt}})])})),1)],1)},i=[],n=s("bc3a"),c=s.n(n),l=s("4e40"),u={name:"LandingPageCarousel",mixins:[l["a"]],data:function(){return{isLoading:!1,carouselImages:[]}},created:function(){this.loadCarouselImages()},methods:{loadCarouselImages:function(){var t=this;t.isLoading=!0,c.a.get(window.API_BASE+"/shop-landing-page/carousel-images").then((function(e){t.isLoading=!1,t.carouselImages=e.data})).catch((function(e){console.log(e),t.isLoading=!1,t.$message.error("Error loading carousel images")}))}}},d=u,g=(s("ee76"),s("2877")),p=Object(g["a"])(d,r,i,!1,null,"301a0a0c",null),f=p.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"carousels-wrapper"},[t.isLoading?s("div",[s("a-spin")],1):t._e(),t.isLoading?t._e():s("div",t._l(t.carousels,(function(t,e){return s("product-carousel",{key:e,attrs:{carousel:t}})})),1)])},m=[],v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"title"},[s("div",{staticClass:"left"},[s("h2",[t._v(t._s(t.carousel.name))])]),s("div",{staticClass:"right"},[s("a-button",{staticClass:"left-button",attrs:{type:"default",shape:"circle",icon:"left",size:"large"},on:{click:function(e){return e.preventDefault(),t.scrollLeft(e)}}}),s("a-button",{attrs:{type:"default",shape:"circle",icon:"right",size:"large"},on:{click:function(e){return e.preventDefault(),t.scrollRight(e)}}})],1)]),s("div",[0===t.products.length?s("a-alert",{attrs:{message:"No products to show",banner:""}}):t._e(),s("div",{ref:"carousel",staticClass:"carousel-container"},t._l(t.products,(function(t,e){return s("div",{key:e,staticClass:"carousel-card"},[s("product-card",{attrs:{product:t}})],1)})),0)],1)])},_=[],C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"suggested-product-card-wrapper"},[t.isLoading?s("div",[s("a-spin")],1):s("div",{staticClass:"suggested-product-card",on:{click:function(e){return e.preventDefault(),t.navigateToProduct(t.productFleshed["product"])}}},[s("div",{staticClass:"top",style:{backgroundImage:"url("+t.getImageSrc(t.productFleshed["product"])+")"}}),s("div",{staticClass:"bottom"},[s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v(" "+t._s(t.truncate(t.productFleshed["product"].name,50))+" ")]),s("div",{staticClass:"category"},[t._v(" "+t._s(t.getCategory(t.productFleshed["product"]))+" ")])]),s("div",{staticClass:"right"},[t.isLoadingPrices?s("a-spin",{attrs:{size:"small"}}):s("span",[t._v(t._s(t.priceRange))])],1)])])])},L=[],b=(s("fb6a"),s("2d20")),P=s("2ef0"),y={name:"ProductCard",props:["product"],mixins:[b["a"]],data:function(){return{productFleshed:null,isLoading:!0,prices:[],isLoadingPrices:!0}},created:function(){this.loadProductDetails(),this.loadPrices()},computed:{priceRange:function(){var t=this.prices;if(t&&t.length){var e=P.orderBy(t,"price"),s=P.first(e),a=P.last(e);if(s!==a){var o=this.formatCostInPence2dp({cost:s.price,cost_currency:"USD"}),r=this.formatCostInPence2dp({cost:a.price,cost_currency:"USD"});return o+" - "+r}return this.formatCostInPence2dp({cost:s.price,cost_currency:"USD"})}return"-"}},methods:{loadProductDetails:function(){var t=this;t.isLoading=!0,c.a.get(window.API_BASE+"/products/"+this.product.product_id).then((function(e){t.isLoading=!1,t.productFleshed=e.data})).catch((function(e){console.log(e),t.isLoading=!1,t.$message.error("Error loading product details")}))},loadPrices:function(){var t=this;t.isLoadingPrices=!0,c.a.get(window.API_BASE+"/products/"+this.product.product_id+"/prices").then((function(e){t.isLoadingPrices=!1,t.prices=e.data})).catch((function(e){console.log(e),t.isLoadingPrices=!1,t.$message.error("Error loading product prices")}))},getImageSrc:function(t){if(t["imageURLs"]&&t["imageURLs"].length)return t["imageURLs"][0]},truncate:function(t,e){return t&&t.length>e?t.slice(0,e)+"...":t},getCategory:function(t){return t.taxonomyCategory?t.taxonomyCategory[t.taxonomyCategory.length-1]:"Miscellaneous"},navigateToProduct:function(t){var e=t.id;e||(e=t["_id"]),this.$router.push("/products/"+e)}}},w=y,I=(s("8ba0"),Object(g["a"])(w,C,L,!1,null,"eebada2c",null)),E=I.exports,$={name:"ProductCarousel",components:{ProductCard:E},props:["carousel"],methods:{scrollLeft:function(){var t=400,e=this.$refs["carousel"],s=e.scrollLeft;s-t<=0?e.scrollTo({left:0,top:0,behaviour:"smooth"}):e.scrollTo({left:s-t,top:0,behaviour:"smooth"})},scrollRight:function(){var t=400,e=this.$refs["carousel"],s=e.scrollLeft,a=e.scrollWidth;s+t>=a?e.scrollTo({left:a,top:0,behaviour:"smooth"}):e.scrollTo({left:s+t,top:0,behaviour:"smooth"})}},computed:{products:function(){return this.carousel.shop_landing_carousel_products}}},x=$,S=(s("2ebd"),Object(g["a"])(x,v,_,!1,null,"131d8561",null)),k=S.exports,A={name:"LandingPageCarousels",components:{ProductCarousel:k},data:function(){return{isLoading:!1,carousels:[]}},created:function(){this.loadCarousels()},methods:{loadCarousels:function(){var t=this;t.isLoading=!0,c.a.get(window.API_BASE+"/shop-landing-page/carousels").then((function(e){t.isLoading=!1,t.carousels=e.data})).catch((function(e){console.log(e),t.isLoading=!1,t.$message.error("Error loading carousels")}))}}},D=A,R=(s("260f"),Object(g["a"])(D,h,m,!1,null,"03b002f3",null)),F=R.exports,T={name:"Landing",components:{LandingPageCarousels:F,LandingPageCarousel:f}},U=T,j=Object(g["a"])(U,a,o,!1,null,"73b9ef34",null);e["default"]=j.exports},"260f":function(t,e,s){"use strict";s("7b36")},"2ebd":function(t,e,s){"use strict";s("f5de")},"6d0a":function(t,e,s){},"7b36":function(t,e,s){},"8ba0":function(t,e,s){"use strict";s("a36c")},a36c:function(t,e,s){},ee76:function(t,e,s){"use strict";s("6d0a")},f5de:function(t,e,s){}}]);
//# sourceMappingURL=shop-landing.eb02bea5.js.map