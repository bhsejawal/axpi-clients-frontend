{"version":3,"sources":["webpack:///./src/views/Intelligence/Insights.vue?4010","webpack:///./src/views/Intelligence/DashboardStats.vue?efa4","webpack:///./src/views/Intelligence.vue?dc8c","webpack:///./src/components/Orders/InlineFilter.vue?6796","webpack:///./src/components/Orders/InlineFilter.vue?4db5","webpack:///src/components/Orders/InlineFilter.vue","webpack:///./src/components/Orders/InlineFilter.vue?97ed","webpack:///./src/components/Orders/InlineFilter.vue?0d13","webpack:///./src/views/Intelligence.vue?667a","webpack:///./src/views/Intelligence/Insights.vue?9c51","webpack:///src/views/Intelligence/Insights.vue","webpack:///./src/views/Intelligence/Insights.vue?a267","webpack:///./src/views/Intelligence/Insights.vue?7a1f","webpack:///./src/views/Intelligence/DashboardStats.vue?cbd6","webpack:///src/views/Intelligence/DashboardStats.vue","webpack:///./src/views/Intelligence/DashboardStats.vue?2afe","webpack:///./src/views/Intelligence/DashboardStats.vue?8ff4","webpack:///./src/views/Intelligence/IntelligenceFilters.vue?70b2","webpack:///src/views/Intelligence/IntelligenceFilters.vue","webpack:///./src/views/Intelligence/IntelligenceFilters.vue?e29d","webpack:///./src/views/Intelligence/IntelligenceFilters.vue","webpack:///src/views/Intelligence.vue","webpack:///./src/views/Intelligence.vue?12ed","webpack:///./src/views/Intelligence.vue?8b01"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isFilterEnabled","on","toggleFilterEnabled","_v","_s","label","type","staticStyle","model","value","callback","$$v","details","expression","_l","option","i","key","_e","staticRenderFns","name","props","data","watchingEnabled","created","filters","id","$nextTick","computed","_","includes","filters_enabled","methods","xor","$emit","watch","newVal","component","handleFilterUpdated","setFilters","$event","preventDefault","viewAllClusters","reloadKey","activeTab","isLoading","insight","handleInsightClicked","description","amount","opportunities","allInsights","fetch","getSearchParams","each","vm","r","console","log","e","$message","error","$router","push","allInsightsCollapsed","collapsed","clusterInsights","flatten","insightsToShow","groupedByType","insights","groupedByErpOrderId","potentialSavings","max","map","insightsForErpOrder","insightType","insightCards","numberOfOpportunities","insight_type","pricingOutliersCard","demandAggregationCard","alternativeProductCard","contractNegotiationCard","stockpilingAdvisedCard","expandedDemandIncreasesCard","unmatchedOrdersCard","filter","insightCard","stats","dateRange","formatCost","cost","cost_currency","mixins","Orders","length","Object","keys","slot","clear","hasUnsavedChanges","save","filtersLocal","dateRangeOptions","components","hasUnsavedChangesFromEvent","hasUnsaved","incrementReloadKey","date_range"],"mappings":"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","file":"js/intelligence.00cd935a.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Insights.vue?vue&type=style&index=0&id=078d0cd9&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardStats.vue?vue&type=style&index=0&id=f33e5174&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intelligence.vue?vue&type=style&index=0&id=7133ef9c&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InlineFilter.vue?vue&type=style&index=0&id=3a2d8a40&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"filter-wrapper\"},[_c('div',{staticClass:\"filter-header\"},[_c('a-checkbox',{attrs:{\"checked\":_vm.isFilterEnabled},on:{\"change\":_vm.toggleFilterEnabled}},[_vm._v(\" \"+_vm._s(_vm.label)+\" \")])],1),(_vm.isFilterEnabled)?_c('div',{staticClass:\"filter\"},[(_vm.type === 'categorical')?_c('a-select',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.details),callback:function ($$v) {_vm.details=$$v},expression:\"details\"}},_vm._l((_vm.options),function(option,i){return _c('a-select-option',{key:i,attrs:{\"value\":option.value}},[_vm._v(\" \"+_vm._s(option.label)+\" \")])}),1):_vm._e()],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"filter-wrapper\">\n    <div class=\"filter-header\">\n      <a-checkbox @change=\"toggleFilterEnabled\" :checked=\"isFilterEnabled\">\n        {{ label }}\n      </a-checkbox>\n    </div>\n    <div v-if=\"isFilterEnabled\" class=\"filter\">\n      <a-select style=\"width: 100%;\" v-if=\"type === 'categorical'\" v-model=\"details\">\n        <a-select-option v-for=\"(option, i) in options\" :key=\"i\" :value=\"option.value\">\n          {{ option.label }}\n        </a-select-option>\n      </a-select>\n    </div>\n  </div>\n</template>\n\n<script>\nconst _ = require('lodash');\nexport default {\n  name: \"InlineFilter\",\n  props: ['filters', 'id', 'label', 'type', 'options'],\n  data() {\n    return {\n      details: null,\n      watchingEnabled: false\n    }\n  },\n  created() {\n    this.details = this.filters[this.id];\n    this.$nextTick(() => {\n      this.watchingEnabled = true;\n    })\n  },\n  computed: {\n    isFilterEnabled() {\n      return _.includes(this.filters.filters_enabled, this.id);\n    }\n  },\n  methods: {\n    toggleFilterEnabled() {\n      this.filters.filters_enabled = _.xor(this.filters.filters_enabled, [this.id]);\n      this.$emit('filter-updated');\n    }\n  },\n  watch: {\n    details(newVal) {\n      if (this.watchingEnabled) {\n        this.filters[this.id] = newVal;\n        this.$emit('filter-updated');\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.filter-body {\n  padding-top: 10px;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InlineFilter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InlineFilter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InlineFilter.vue?vue&type=template&id=3a2d8a40&scoped=true&\"\nimport script from \"./InlineFilter.vue?vue&type=script&lang=js&\"\nexport * from \"./InlineFilter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InlineFilter.vue?vue&type=style&index=0&id=3a2d8a40&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a2d8a40\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"intellegence\"},[_c('div',{staticClass:\"page-header\"},[_c('h1',{staticClass:\"page-title\"},[_vm._v(\"Axiom Insights\")]),_c('div',{staticClass:\"actions\"},[_c('intelligence-filters',{attrs:{\"filters\":_vm.filters},on:{\"filter-updated\":_vm.handleFilterUpdated,\"set-filters\":_vm.setFilters}}),_c('a-button',{attrs:{\"icon\":\"pie-chart\",\"type\":\"primary\"},on:{\"click\":function($event){$event.preventDefault();return _vm.viewAllClusters($event)}}},[_vm._v(\"All Clusters \")])],1)]),_c('div',{staticClass:\"stats\"},[_c('dashboard-stats',{key:_vm.reloadKey,attrs:{\"filters\":_vm.filters}})],1),_c('div',{staticClass:\"insights\"},[_c('insights',{key:_vm.reloadKey,attrs:{\"filters\":_vm.filters}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-tabs',{model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},[_c('a-tab-pane',{key:\"all-insights\",attrs:{\"tab\":\"All Insights\"}}),_c('a-tab-pane',{key:\"price-insights\",attrs:{\"tab\":\"Price Insights\"}}),_c('a-tab-pane',{key:\"demand-insights\",attrs:{\"tab\":\"Demand Insights\"}})],1),(_vm.isLoading)?_c('div',{staticClass:\"loader\"},[_c('a-spin'),_c('span',{staticClass:\"loader-description\"},[_vm._v(\"Loading all insights...\")])],1):_vm._e(),(!_vm.isLoading)?_c('div',{staticClass:\"insights\"},[_c('a-row',{attrs:{\"gutter\":20}},_vm._l((_vm.insightsToShow),function(insight,i){return _c('a-col',{key:i,attrs:{\"span\":6}},[_c('a-card',{staticClass:\"insight-card\",attrs:{\"hoverable\":true},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.handleInsightClicked(insight); })($event)}}},[_c('a-statistic',{attrs:{\"title\":insight.description,\"prefix\":\"$\",\"precision\":0,\"value\":insight.amount}}),_c('div',{staticClass:\"insight-card-bottom\"},[_c('div',{staticClass:\"left\"},[_vm._v(\" \"+_vm._s(insight.opportunities)+\" \"+_vm._s(insight.opportunities == 1 ? 'opportunity' : 'opportunities')+\" \")]),_c('div',{staticClass:\"right\"},[_vm._v(\" View \"),_c('a-icon',{attrs:{\"type\":\"right\"}})],1)])],1)],1)}),1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <a-tabs v-model=\"activeTab\">\n      <a-tab-pane key=\"all-insights\" tab=\"All Insights\"></a-tab-pane>\n      <a-tab-pane key=\"price-insights\" tab=\"Price Insights\"></a-tab-pane>\n      <a-tab-pane key=\"demand-insights\" tab=\"Demand Insights\"></a-tab-pane>\n      <!--            <a-tab-pane key=\"contract-insights\" tab=\"Contract Insights\"> </a-tab-pane>-->\n    </a-tabs>\n\n    <!-- Loading -->\n    <div v-if=\"isLoading\" class=\"loader\">\n      <a-spin></a-spin>\n      <span class=\"loader-description\">Loading all insights...</span>\n    </div>\n    <!-- / Loading -->\n\n    <!-- Insights -->\n    <div class=\"insights\" v-if=\"!isLoading\">\n\n      <a-row :gutter=\"20\">\n        <a-col :span=\"6\" v-for=\"(insight, i) in insightsToShow\" :key=\"i\">\n          <a-card class=\"insight-card\" :hoverable=\"true\"\n                  @click.prevent=\"() => handleInsightClicked(insight)\">\n            <a-statistic :title=\"insight.description\"\n                         prefix=\"$\"\n                         :precision=\"0\"\n                         :value=\"insight.amount\"/>\n\n            <div class=\"insight-card-bottom\">\n              <div class=\"left\">\n                {{ insight.opportunities }}\n                {{ insight.opportunities == 1 ? 'opportunity' : 'opportunities' }}\n              </div>\n              <div class=\"right\">\n                View\n                <a-icon type=\"right\"/>\n              </div>\n            </div>\n          </a-card>\n        </a-col>\n      </a-row>\n\n    </div>\n    <!-- / Insights -->\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nconst _ = require('lodash');\n\nexport default {\n  props: ['filters'],\n\n  data() {\n    return {\n      activeTab: \"all-insights\",\n      isLoading: false,\n      allInsights: []\n    };\n  },\n\n  created() {\n    this.fetch();\n  },\n\n  methods: {\n    getSearchParams() {\n      let filters = {};\n\n      _.each(this.filters['filters_enabled'], key => {\n        filters[key] = this.filters[key];\n      });\n\n      return filters;\n    },\n\n    fetch() {\n      let vm = this;\n      vm.isLoading = true;\n      axios.post(window.API_BASE + '/intelligence/all-insights', this.getSearchParams()).then(r => {\n        vm.isLoading = false;\n        vm.allInsights = r.data;\n      }).catch(e => {\n        console.log(e);\n        vm.isLoading = false;\n        vm.allInsights = null;\n        vm.$message.error('Error loading all insights');\n      });\n    },\n\n    handleInsightClicked(insight) {\n      this.$router.push('/intelligence/clusters?insight_type=' + insight['insight_type']);\n    }\n  },\n\n  computed: {\n    allInsightsCollapsed() {\n      let collapsed = [];\n      _.each(this.allInsights, (clusterInsights) => {\n        collapsed.push(clusterInsights);\n        collapsed = _.flatten(collapsed);\n      });\n      return collapsed;\n    },\n\n    insightsToShow() {\n      let insightCards = [];\n\n      let groupedByType = _.groupBy(this.allInsightsCollapsed, 'insight_type');\n      _.each(groupedByType, (insights, insightType) => {\n        console.log(insights);\n        let groupedByErpOrderId = _.groupBy(insights, 'erp_order_id');\n        // let numberOfOpportunities = Object.keys(groupedByErpOrderId).length;\n\n        let groupedByClusterId = _.groupBy(insights, 'cluster_id');\n        // console.log(groupedByClusterId);\n        let numberOfOpportunities = Object.keys(groupedByClusterId).length;\n\n        let potentialSavings = 0;\n        _.each(groupedByErpOrderId, insightsForErpOrder => {\n          potentialSavings += _.max(_.map(insightsForErpOrder, 'potential_savings'));\n        });\n\n        let description = 'Unknown';\n        if (insightType === 'pricing') {\n          description = 'Pricing Outliers';\n        }\n\n        insightCards.push({\n          // cluster_id: clusterId,\n          amount: potentialSavings,\n          opportunities: numberOfOpportunities,\n          insight_type: insightType,\n          description: description\n        });\n      });\n\n      // Add in 0-value insights\n      let pricingOutliersCard = _.find(insightCards, {'insight_type': 'pricing'});\n      if (!pricingOutliersCard) {\n        insightCards.push({\n          amount: 0, opportunities: 0, insight_type: 'pricing', description: 'Pricing Outliers'\n        });\n      }\n\n      let demandAggregationCard = _.find(insightCards, {'insight_type': 'demand-aggregration'});\n      if (!demandAggregationCard) {\n        insightCards.push({\n          amount: 0, opportunities: 0, insight_type: 'demand-aggregation', description: 'Demand Aggregation'\n        });\n      }\n\n      let alternativeProductCard = _.find(insightCards, {'insight_type': 'alternative-product'});\n      if (!alternativeProductCard) {\n        insightCards.push({\n          amount: 0, opportunities: 0, insight_type: 'alternative-product', description: 'Alternative Product'\n        });\n      }\n\n      let contractNegotiationCard = _.find(insightCards, {'insight_type': 'contract-negotiation'});\n      if (!contractNegotiationCard) {\n        insightCards.push({\n          amount: 0, opportunities: 0, insight_type: 'contract-negotiation', description: 'Contract Negotiation'\n        });\n      }\n\n      let stockpilingAdvisedCard = _.find(insightCards, {'insight_type': 'stockpiling-advised'});\n      if (!stockpilingAdvisedCard) {\n        insightCards.push({\n          amount: 0, opportunities: 0, insight_type: 'stockpiling-advised', description: 'Stockpiling Advised'\n        });\n      }\n\n      let expandedDemandIncreasesCard = _.find(insightCards, {'insight_type': 'expected-demand-increases'});\n      if (!expandedDemandIncreasesCard) {\n        insightCards.push({\n          amount: 0,\n          opportunities: 0,\n          insight_type: 'expected-demand-increases',\n          description: 'Expected Demand Increases'\n        });\n      }\n\n      let unmatchedOrdersCard = _.find(insightCards, {'insight_type': 'unmatched-orders'});\n      if (!unmatchedOrdersCard) {\n        insightCards.push({\n          amount: 0, opportunities: 0, insight_type: 'unmatched-orders', description: 'Unmatched Orders'\n        });\n      }\n\n      return _.filter(insightCards, insightCard => {\n        if (this.activeTab === 'all-insights') {\n          return true;\n        } else if (this.activeTab === 'price-insights') {\n          return ['pricing'].includes(insightCard['insight_type']);\n        } else if (this.activeTab === 'demand-insights') {\n          return !['pricing'].includes(insightCard['insight_type']);\n        }\n        return false;\n      });\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.loader {\n  text-align: center;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  border: 1px solid #ECECEC;\n}\n\n.loader-description {\n  margin-left: 10px;\n}\n\n.insight-card {\n  margin-bottom: 22px;\n}\n\n.insight-card-bottom {\n  padding-top: 25px;\n  display: flex;\n  flex-direction: row;\n\n  .left {\n    flex-grow: 1;\n  }\n\n  .right {\n    flex-shrink: 1;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Insights.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Insights.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Insights.vue?vue&type=template&id=078d0cd9&scoped=true&\"\nimport script from \"./Insights.vue?vue&type=script&lang=js&\"\nexport * from \"./Insights.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Insights.vue?vue&type=style&index=0&id=078d0cd9&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"078d0cd9\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isLoading)?_c('div',{staticClass:\"loader stats-wrapper\"},[_c('a-spin'),_c('span',{staticClass:\"loader-description\"},[_vm._v(\"Loading stats...\")])],1):_vm._e(),(!_vm.isLoading && _vm.stats)?_c('div',{staticClass:\"stats-wrapper\"},[_c('a-row',{attrs:{\"gutter\":20}},[_c('a-col',{attrs:{\"span\":6}},[_c('table',{staticClass:\"axpi-basic-table\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"colspan\":\"2\"}},[_c('div',{staticClass:\"table-header-wrapper\"},[_c('div',{staticClass:\"table-header-left\"},[_c('b',[_vm._v(\"Data Overview\")]),_c('br'),_vm._v(\" Current Data \")]),_c('div',{staticClass:\"table-header-right\"},[_c('a-icon',{attrs:{\"type\":\"database\"}})],1)])])])]),_c('tbody',[_c('tr',[_c('td',[_vm._v(\"Suppliers\")]),_c('td',[_vm._v(\" \"+_vm._s(_vm.stats['number_of_suppliers'])+\" \")])]),_c('tr',[_c('td',[_vm._v(\"Business Units\")]),_c('td',[_vm._v(\" \"+_vm._s(_vm.stats['number_of_organisational_units'])+\" \")])]),_c('tr',[_c('td',[_vm._v(\"Categories\")]),_c('td',[_vm._v(\" \"+_vm._s(_vm.stats['number_of_categories'])+\" \")])])])])]),_c('a-col',{attrs:{\"span\":6}},[_c('table',{staticClass:\"axpi-basic-table\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"colspan\":\"2\"}},[_c('div',{staticClass:\"table-header-wrapper\"},[_c('div',{staticClass:\"table-header-left\"},[_c('b',[_vm._v(\"Spend\")]),_c('br'),_vm._v(\" \"+_vm._s(_vm.dateRange)+\" \")]),_c('div',{staticClass:\"table-header-right\"},[_c('a-icon',{attrs:{\"type\":\"dollar\"}})],1)])])])]),_c('tbody',[_c('tr',[_c('td',[_vm._v(\"Spend Managed\")]),_c('td',[_vm._v(\" \"+_vm._s(_vm.stats['spend_managed'] ? _vm.formatCost({cost: _vm.stats['spend_managed'], cost_currency: 'USD'}) : '-')+\" \")])]),_c('tr',[_c('td',[_vm._v(\"Orders Classified\")]),_c('td',[_vm._v(_vm._s(_vm.stats['orders_classified_percentage'] ? _vm.stats['orders_classified_percentage'] : '-'))])]),_c('tr',[_c('td',[_vm._v(\"Total Spend\")]),_c('td',[_vm._v(\" \"+_vm._s(_vm.stats['total_spend'] ? _vm.formatCost({cost: _vm.stats['total_spend'], cost_currency: 'USD'}) : '-')+\" \")])])])])]),_c('a-col',{attrs:{\"span\":6}},[_c('table',{staticClass:\"axpi-basic-table\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"colspan\":\"2\"}},[_c('div',{staticClass:\"table-header-wrapper\"},[_c('div',{staticClass:\"table-header-left\"},[_c('b',[_vm._v(\"Demand\")]),_c('br'),_vm._v(\" \"+_vm._s(_vm.dateRange)+\" \")]),_c('div',{staticClass:\"table-header-right\"},[_c('a-icon',{attrs:{\"type\":\"up-circle\"}})],1)])])])]),_c('tbody',[_c('tr',[_c('td',[_vm._v(\"Roche Demand Change\")]),_c('td',[_vm._v(\" - \")])]),_c('tr',[_c('td',[_vm._v(\"Market Demand Change\")]),_c('td',[_vm._v(\"-\")])]),_c('tr',[_c('td',[_vm._v(\"Market Demand Volatility\")]),_c('td',[_vm._v(\" - \")])])])])]),_c('a-col',{attrs:{\"span\":6}},[_c('table',{staticClass:\"axpi-basic-table\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"colspan\":\"2\"}},[_c('div',{staticClass:\"table-header-wrapper\"},[_c('div',{staticClass:\"table-header-left\"},[_c('b',[_vm._v(\"Risk\")]),_c('br'),_vm._v(\" Current Data \")]),_c('div',{staticClass:\"table-header-right\"},[_c('a-icon',{attrs:{\"type\":\"alert\"}})],1)])])])]),_c('tbody',[_c('tr',[_c('td',[_vm._v(\"Risk Level\")]),_c('td',[_vm._v(\" - \")])]),_c('tr',[_c('td',[_vm._v(\"Suppliers at Risk\")]),_c('td',[_vm._v(\"-\")])])])])])],1)],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- Loading -->\n    <div v-if=\"isLoading\" class=\"loader stats-wrapper\">\n      <a-spin></a-spin>\n      <span class=\"loader-description\">Loading stats...</span>\n    </div>\n    <!-- / Loading -->\n\n    <!-- Loaded -->\n    <div v-if=\"!isLoading && stats\" class=\"stats-wrapper\">\n      <a-row :gutter=\"20\">\n        <!-- Overview -->\n        <a-col :span=\"6\">\n          <table class=\"axpi-basic-table\">\n            <thead>\n            <tr>\n              <th colspan=\"2\">\n                <div class=\"table-header-wrapper\">\n                  <div class=\"table-header-left\">\n                    <b>Data Overview</b><br>\n                    Current Data\n                  </div>\n                  <div class=\"table-header-right\">\n                    <a-icon type=\"database\"></a-icon>\n                  </div>\n                </div>\n              </th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr>\n              <td>Suppliers</td>\n              <td>\n                {{ stats['number_of_suppliers'] }}\n              </td>\n            </tr>\n            <tr>\n              <td>Business Units</td>\n              <td>\n                {{ stats['number_of_organisational_units'] }}\n              </td>\n            </tr>\n            <tr>\n              <td>Categories</td>\n              <td>\n                {{ stats['number_of_categories'] }}\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </a-col>\n        <!-- / Overview -->\n        <!-- Spend -->\n        <a-col :span=\"6\">\n          <table class=\"axpi-basic-table\">\n            <thead>\n            <tr>\n              <th colspan=\"2\">\n                <div class=\"table-header-wrapper\">\n                  <div class=\"table-header-left\">\n                    <b>Spend</b><br>\n                    {{ dateRange }}\n                  </div>\n                  <div class=\"table-header-right\">\n                    <a-icon type=\"dollar\"></a-icon>\n                  </div>\n                </div>\n              </th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr>\n              <td>Spend Managed</td>\n              <td>\n                {{ stats['spend_managed'] ? formatCost({cost: stats['spend_managed'], cost_currency: 'USD'}) : '-' }}\n              </td>\n            </tr>\n            <tr>\n              <td>Orders Classified</td>\n              <td>{{ stats['orders_classified_percentage'] ? stats['orders_classified_percentage'] : '-' }}</td>\n            </tr>\n            <tr>\n              <td>Total Spend</td>\n              <td>\n                {{ stats['total_spend'] ? formatCost({cost: stats['total_spend'], cost_currency: 'USD'}) : '-' }}\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </a-col>\n        <!-- / Spend -->\n        <!-- Demand -->\n        <a-col :span=\"6\">\n          <table class=\"axpi-basic-table\">\n            <thead>\n            <tr>\n              <th colspan=\"2\">\n                <div class=\"table-header-wrapper\">\n                  <div class=\"table-header-left\">\n                    <b>Demand</b><br>\n                    {{ dateRange }}\n                  </div>\n                  <div class=\"table-header-right\">\n                    <a-icon type=\"up-circle\"></a-icon>\n                  </div>\n                </div>\n              </th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr>\n<!--              <td>{{ user.client.name }} Demand Change</td>-->\n              <td>Roche Demand Change</td>\n              <td>\n                -\n              </td>\n            </tr>\n            <tr>\n              <td>Market Demand Change</td>\n              <td>-</td>\n            </tr>\n            <tr>\n              <td>Market Demand Volatility</td>\n              <td>\n                -\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </a-col>\n        <!-- / Demand -->\n        <!-- Risk -->\n        <a-col :span=\"6\">\n          <table class=\"axpi-basic-table\">\n            <thead>\n            <tr>\n              <th colspan=\"2\">\n                <div class=\"table-header-wrapper\">\n                  <div class=\"table-header-left\">\n                    <b>Risk</b><br>\n                    Current Data\n                  </div>\n                  <div class=\"table-header-right\">\n                    <a-icon type=\"alert\"></a-icon>\n                  </div>\n                </div>\n              </th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr>\n              <td>Risk Level</td>\n              <td>\n                -\n              </td>\n            </tr>\n            <tr>\n              <td>Suppliers at Risk</td>\n              <td>-</td>\n            </tr>\n            </tbody>\n          </table>\n        </a-col>\n        <!-- / Risk -->\n      </a-row>\n    </div>\n    <!-- / Loaded -->\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Orders from \"../../mixins/Orders\";\nimport {mapGetters} from \"vuex\";\n\nconst _ = require('lodash');\n\nexport default {\n  name: \"DashboardStats\",\n  props: ['filters'],\n  mixins: [Orders],\n  data() {\n    return {\n      isLoading: false,\n      stats: []\n    }\n  },\n  computed: {\n    ...mapGetters('auth', {\n      user: 'user'\n    }),\n\n    dateRange() {\n      if (this.filters['filters_enabled'].length && this.filters['filters_enabled'].includes('date_range')) {\n        if (this.filters['date_range'] == 'last-5-years') {\n          return 'Last 5 Years';\n        } else if (this.filters['date_range'] == 'last-12-months') {\n          return 'Last 12 Months';\n        } else if (this.filters['date_range'] == 'last-month') {\n          return 'Last Month'\n        }\n      }\n      return 'Last 12 Months';\n    }\n  },\n  created() {\n    this.fetch();\n  },\n  methods: {\n    fetch() {\n      let vm = this;\n      vm.isLoading = true;\n      axios.post(window.API_BASE + '/intelligence/stats', this.getSearchParams()).then(r => {\n        vm.isLoading = false;\n        vm.stats = r.data;\n      }).catch(e => {\n        console.log(e);\n        vm.isLoading = false;\n        vm.stats = null;\n        vm.$message.error('Error loading stats');\n      });\n    },\n\n    getSearchParams() {\n      let filters = {};\n\n      _.each(this.filters['filters_enabled'], key => {\n        filters[key] = this.filters[key];\n      });\n\n      if (!Object.keys(filters).includes('date_range')) {\n        filters['date_range'] = 'last-12-months';\n      }\n\n      return filters;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.loader {\n  text-align: center;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  border: 1px solid #ECECEC;\n}\n\n.loader-description {\n  margin-left: 10px;\n}\n\n.stats-wrapper {\n  /*border: 1px solid #ECECEC;*/\n}\n\n.axpi-basic-table thead tr {\n  border-bottom: 2px solid #e8e8e8;\n  color: rgba(0, 0, 0, 0.85);\n}\n\n.axpi-basic-table tbody tr {\n  border-bottom: none;\n}\n\n.axpi-basic-table tr td:last-child {\n  text-align: right;\n}\n\n.table-header-wrapper {\n  display: flex;\n  flex-direction: row;\n}\n\n.table-header-left {\n  flex-grow: 1;\n  font-weight: normal;\n}\n\n.table-header-right {\n  flex-shrink: 1;\n  font-size: 30px;\n  display: flex;\n  align-items: center;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardStats.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardStats.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DashboardStats.vue?vue&type=template&id=f33e5174&scoped=true&\"\nimport script from \"./DashboardStats.vue?vue&type=script&lang=js&\"\nexport * from \"./DashboardStats.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DashboardStats.vue?vue&type=style&index=0&id=f33e5174&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f33e5174\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-popover',{attrs:{\"placement\":\"bottomRight\",\"trigger\":\"click\"}},[_c('template',{slot:\"title\"},[_c('div',{staticClass:\"filter-title-wrapper\"},[_c('div',{staticClass:\"left\"},[_c('a-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){$event.preventDefault();return _vm.clear($event)}}},[_vm._v(\"Clear\")])],1),_c('div',{staticClass:\"center\"},[_vm._v(\" Filters \")]),_c('div',{staticClass:\"right\"},[_c('a-button',{attrs:{\"disabled\":!_vm.hasUnsavedChanges,\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.save}},[_vm._v(\"Save \")])],1)])]),_c('template',{slot:\"content\"},[_c('div',{staticClass:\"filters-inner\"},[_c('inline-filter',{attrs:{\"filters\":_vm.filtersLocal,\"id\":\"date_range\",\"label\":\"Date range\",\"type\":\"categorical\",\"options\":_vm.dateRangeOptions},on:{\"filter-updated\":_vm.handleFilterUpdated}})],1)]),_c('a-button',{attrs:{\"icon\":\"filter\"}},[_vm._v(\"Filter\")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-popover placement=\"bottomRight\" trigger=\"click\">\n    <template slot=\"title\">\n      <div class=\"filter-title-wrapper\">\n        <div class=\"left\">\n          <a-button size=\"small\" @click.prevent=\"clear\">Clear</a-button>\n        </div>\n        <div class=\"center\">\n          Filters\n        </div>\n        <div class=\"right\">\n          <a-button :disabled=\"!hasUnsavedChanges\" @click=\"save\"\n                    type=\"primary\" size=\"small\">Save\n          </a-button>\n        </div>\n      </div>\n    </template>\n    <template slot=\"content\">\n      <div class=\"filters-inner\">\n\n        <inline-filter :filters=\"filtersLocal\"\n                       id=\"date_range\"\n                       label=\"Date range\"\n                       type=\"categorical\"\n                       @filter-updated=\"handleFilterUpdated\"\n                       :options=\"dateRangeOptions\"></inline-filter>\n\n<!--        <inline-filter :filters=\"filters\"-->\n<!--                       id=\"date_range\"-->\n<!--                       label=\"Date range\"-->\n<!--                       type=\"categorical\"-->\n<!--                       @filter-updated=\"handleFilterUpdated\"-->\n<!--                       :options=\"dateRangeOptions\"></inline-filter>-->\n\n      </div>\n    </template>\n    <a-button icon=\"filter\">Filter</a-button>\n  </a-popover>\n</template>\n\n<script>\nimport InlineFilter from \"../../components/Orders/InlineFilter\";\n\nconst _ = require('lodash');\n\nexport default {\n  name: \"IntelligenceFilters\",\n  props: ['filters'],\n  components: {InlineFilter},\n  data() {\n    return {\n      filtersLocal: null,\n      hasUnsavedChangesFromEvent: false,\n      dateRangeOptions: [\n        {\n          value: 'last-5-years',\n          label: 'Last 5 years'\n        },\n        {\n          value: 'last-12-months',\n          label: 'Last 12 months'\n        },\n        {\n          value: 'last-month',\n          label: 'Last month'\n        }\n      ]\n    }\n  },\n  created() {\n    this.filtersLocal = _.cloneDeep(this.filters);\n  },\n  computed: {\n    hasUnsavedChanges() {\n      let hasUnsaved = false;\n\n      let diffOne = _.difference(this.filters.filters_enabled, this.filtersLocal.filters_enabled);\n      let diffTwo = _.difference(this.filtersLocal.filters_enabled, this.filters.filters_enabled);\n      if (_.merge(diffOne, diffTwo).length) {\n        hasUnsaved = true;\n      }\n\n      return (hasUnsaved || this.hasUnsavedChangesFromEvent);\n    }\n  },\n  methods: {\n    handleFilterUpdated() {\n      // this.$emit('filter-updated');\n      this.hasUnsavedChangesFromEvent = true;\n    },\n\n    clear() {\n      this.filtersLocal.filters_enabled = [];\n    },\n\n    save() {\n      this.$emit('set-filters', _.cloneDeep(this.filtersLocal));\n      this.$emit('filter-updated');\n      this.hasUnsavedChangesFromEvent = false;\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IntelligenceFilters.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IntelligenceFilters.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./IntelligenceFilters.vue?vue&type=template&id=07ffb68b&scoped=true&\"\nimport script from \"./IntelligenceFilters.vue?vue&type=script&lang=js&\"\nexport * from \"./IntelligenceFilters.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07ffb68b\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"intellegence\">\n    <!-- Header -->\n    <div class=\"page-header\">\n      <h1 class=\"page-title\">Axiom Insights</h1>\n      <div class=\"actions\">\n        <intelligence-filters\n            @filter-updated=\"handleFilterUpdated\"\n            @set-filters=\"setFilters\"\n            :filters=\"filters\"\n        ></intelligence-filters>\n\n        <a-button icon=\"pie-chart\" @click.prevent=\"viewAllClusters\" type=\"primary\">All Clusters\n        </a-button>\n      </div>\n    </div>\n    <!-- / Header -->\n\n    <!-- Stats -->\n    <div class=\"stats\">\n      <dashboard-stats :filters=\"filters\" :key=\"reloadKey\"></dashboard-stats>\n    </div>\n    <!-- / Stats -->\n\n    <!-- Insights -->\n    <div class=\"insights\">\n      <insights :filters=\"filters\" :key=\"reloadKey\"></insights>\n    </div>\n    <!-- / Insights -->\n  </div>\n</template>\n\n<script>\nimport Insights from \"./Intelligence/Insights.vue\"\nimport DashboardStats from \"./Intelligence/DashboardStats\";\nimport IntelligenceFilters from \"./Intelligence/IntelligenceFilters\";\n\nexport default {\n  components: {IntelligenceFilters, DashboardStats, Insights},\n  methods: {\n    viewAllClusters() {\n      this.$router.push('/intelligence/clusters');\n    },\n\n    incrementReloadKey() {\n      this.reloadKey += 1;\n    },\n\n    setFilters(filters) {\n      this.filters = filters;\n    },\n\n    handleFilterUpdated() {\n      this.incrementReloadKey();\n    }\n  },\n  data() {\n    return {\n      reloadKey: 1,\n      filters: {\n        filters_enabled: {},\n        date_range: 'last-12-months'\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.stats {\n  padding-top: 30px;\n}\n\n.insights {\n  padding-top: 20px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intelligence.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intelligence.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Intelligence.vue?vue&type=template&id=7133ef9c&scoped=true&\"\nimport script from \"./Intelligence.vue?vue&type=script&lang=js&\"\nexport * from \"./Intelligence.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Intelligence.vue?vue&type=style&index=0&id=7133ef9c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7133ef9c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}