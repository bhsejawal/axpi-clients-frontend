(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-product"],{"0678":function(t,e,i){},"0bf5":function(t,e,i){},"0e0c":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"approved-badge"},[i("img",{staticClass:"leaf",attrs:{src:"/img/leaf.jpg",width:"15",alt:"Leaf"}}),i("span",[i("a-tag",{attrs:{color:"green"}},[t._v("Approved")])],1)])},n=[],s={name:"ApprovedBadge"},o=s,r=(i("6207"),i("2877")),c=Object(r["a"])(o,a,n,!1,null,"73bc5896",null);e["a"]=c.exports},1744:function(t,e,i){},"1f45":function(t,e,i){},"22d9":function(t,e,i){"use strict";i("0678")},2385:function(t,e,i){"use strict";i("be32")},"28dc":function(t,e,i){"use strict";i("53c5")},"2df0":function(t,e,i){"use strict";i("f61c")},"2ee2":function(t,e,i){"use strict";e["a"]={methods:{isInStock:function(t){return t&&0!==t||null==t},isOutOfStock:function(t){return null!==t&&0===t},getStockText:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return 0===t?i?"Out of stock, "+i+" lead time":"Out of stock":t&&t>0?t+" in stock"+(e?" and ready to ship":""):"In stock"+(e?" and ready to ship":"")}}}},"302f":function(t,e,i){},"3e48":function(t,e,i){"use strict";i("be26")},"4a1f":function(t,e,i){"use strict";i("9688")},"53c5":function(t,e,i){},5593:function(t,e,i){"use strict";i("eb1e")},5767:function(t,e,i){"use strict";i("7965")},6207:function(t,e,i){"use strict";i("c5b5")},"786e":function(t,e,i){},7965:function(t,e,i){},"7cff":function(t,e,i){},"7e12":function(t,e,i){var a=i("da84"),n=i("58a8").trim,s=i("5899"),o=a.parseFloat,r=1/o(s+"-0")!==-1/0;t.exports=r?function(t){var e=n(String(t)),i=o(e);return 0===i&&"-"==e.charAt(0)?-0:i}:o},"93c3":function(t,e,i){"use strict";i("7cff")},9688:function(t,e,i){},9880:function(t,e,i){"use strict";i("b9fd")},a392:function(t,e,i){"use strict";i("1f45")},ac89:function(t,e,i){"use strict";i("786e")},b1c1:function(t,e,i){"use strict";i("7db0");var a=i("2ef0");e["a"]={data:function(){return{unitOptions:[{type:"length",unit:"meter",display:"m"},{type:"area",unit:"meter ** 2",display:"m²"},{type:"volume",unit:"meter ** 3",display:"m³"},{type:"time",unit:"second",display:"s"},{type:"angle",unit:"rad",display:"radians"},{type:"mass",unit:"kilogram",display:"kg"},{type:"temperature",unit:"kelvin",display:"K"},{type:"frequency",unit:"1 / second",display:"s<sup>-1</sup>"},{type:"velocity",unit:"meter / second",display:"m/s"},{type:"acceleration",unit:"meter / second ** 2",display:"m/s²"},{type:"force",unit:"kilogram * meter / second ** 2",display:"N"},{type:"energy",unit:"kilogram * meter ** 2 / second ** 2",display:"J"},{type:"power",unit:"kilogram * meter ** 2 / second ** 3",display:"W"},{type:"momentum",unit:"meter * kilogram / second",display:"kg m s<sup>-1</sup>"},{type:"density",unit:"kilogram / meter ** 3",display:"kg/m³"},{type:"pressure",unit:"kilogram / meter ** 2",display:"Pa"},{type:"electric potential",unit:"kilogram * meter ** 2 / ampere / second ** 3",display:"V"},{type:"current",unit:"ampere",display:"A"},{type:"count",unit:"dimensionless",display:""},{type:"count",unit:"count",display:""},{type:"count",unit:"percentage",display:"%"},{type:"sound intensity",unit:"decibel",display:"dB"}]}},methods:{formatUnit:function(t){var e=a.find(this.unitOptions,{unit:t});return e?e.display:t}}}},b54d:function(t,e,i){"use strict";i("1744")},b97c5:function(t,e,i){"use strict";i("f734")},b9fd:function(t,e,i){},be26:function(t,e,i){},be32:function(t,e,i){},c35a:function(t,e,i){var a=i("23e7"),n=i("7e12");a({target:"Number",stat:!0,forced:Number.parseFloat!=n},{parseFloat:n})},c5b5:function(t,e,i){},d434:function(t,e,i){"use strict";i("302f")},d998:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"product-show"},[i("loading-screen",{attrs:{"is-loading":t.isLoading||t.isLoadingDocuments||t.isLoadingDetails||t.isSavingDescription||t.isLoadingPrices}}),t.product&&(t.fromShop||t.fromBasket)?i("a-page-header",{on:{back:t.handleBackButton}},[i("template",{slot:"title"},[t._v(" "+t._s(t.product.name)+" "),t.product.certified?i("approved-badge",{staticStyle:{"margin-left":"20px"}}):t._e(),i("has-banned-materials-badge",{staticStyle:{"margin-left":"20px"},attrs:{"product-id":t.product["_id"]}})],1),i("template",{slot:"extra"},[i("view-toggler")],1)],2):t._e(),!t.product||t.fromShop||t.fromBasket?t._e():i("a-page-header",{attrs:{title:t.product.name}},[i("template",{slot:"extra"},[i("view-toggler")],1)],2),i("div",{staticClass:"product-details-top"},[t.productVendorMapping&&t.productVendorMapping.vendors&&t.productVendorMapping.vendors.names?i("div",{staticClass:"product-details-top-property"},[i("b",[t._v("Vendors:")]),t._l(t.productVendorMapping.vendors.names,(function(t,e){return i("a-badge",{key:e,attrs:{count:t}})}))],2):t._e(),t.productVendorMapping&&t.productVendorMapping.vendors?t._e():i("div",{staticClass:"product-details-top-property"},[i("b",[t._v("Vendors:")]),i("a-badge",{attrs:{count:t.product["vendor"]}})],1),i("div",{staticClass:"product-details-top-property"},[i("b",[t._v("Manufacturer:")]),t._v(" "+t._s(t.product["manufacturer"]?t.product["manufacturer"]:"-")+" ")]),i("div",{staticClass:"product-details-top-property"},[i("b",[t._v("Category:")]),t._v(" "+t._s(t.getCategory(t.product))+" ")]),i("div",{staticClass:"product-details-top-property"},[i("b",[t._v("Product Code:")]),t._v(" "+t._s(t.product["productCode"]?t.product["productCode"]:"-")+" ")]),i("div",{staticClass:"product-details-top-property"},[i("b",[t._v("Catalog Code:")]),t._v(" "+t._s(t.product["catalogCode"]?t.product["catalogCode"]:"-")+" ")])]),t.product?i("div",{staticClass:"product-show-section"},[i("a-row",{attrs:{gutter:10}},[i("a-col",{attrs:{span:9}},[i("image-carousel",{attrs:{urls:t.product["imageURLs"]}})],1),i("a-col",{attrs:{span:9}},[i("div",{staticClass:"price-description",staticStyle:{"margin-bottom":"15px"}},[i("h3",{staticStyle:{display:"inline"}},[t._v("Price: ")]),i("span",{staticClass:"price"},[t._v(" "+t._s(t.selectedPrice?t.formatCostInPence2dp({cost:t.selectedPrice.price,cost_currency:t.selectedPrice.price_currency?t.selectedPrice.price_currency:"USD"}):"-")+" ")]),t._v(" ("+t._s(t.formatCostInPence2dp({cost:t.pricePerUnit,cost_currency:t.selectedPrice&&t.selectedPrice.price_currency?t.selectedPrice.price_currency:"USD"}))+"/"+t._s(t.unit)+") "),i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.scrollToPrices(e)}}},[t._v("View more")])]),i("div",{staticStyle:{"margin-bottom":"10px"}},[i("h3",{staticStyle:{display:"inline"}},[t._v("Description")]),"edit"!=t.view||t.isEditingDescription?t._e():i("a-button",{staticStyle:{display:"inline","margin-left":"10px"},attrs:{size:"small",icon:"edit",type:"default"},on:{click:function(e){return e.preventDefault(),t.editDescription(e)}}})],1),"edit"!==t.view?i("div",[t.descriptionTooLong?i("div",[i("div",{domProps:{innerHTML:t._s(t.descriptionToShow)}}),i("div",{staticStyle:{"margin-top":"10px"}},[t.descriptionShowMore?i("a",{staticStyle:{"margin-top":"5px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.toggleDescriptionShowMore(e)}}},[t._v("View less "),i("a-icon",{style:{fontSize:"10px"},attrs:{type:"up"}})],1):t._e(),t.descriptionShowMore?t._e():i("a",{staticStyle:{"margin-top":"5px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.toggleDescriptionShowMore(e)}}},[t._v("View more "),i("a-icon",{style:{fontSize:"10px"},attrs:{type:"down"}})],1)])]):t._e(),t.descriptionTooLong?t._e():i("div",{domProps:{innerHTML:t._s(t.description)}})]):t._e(),"edit"===t.view?i("div",[t.isEditingDescription?i("div",[i("div",{staticClass:"quill-editor-wrapper"},[i("quill-editor",{ref:"myQuillEditor",model:{value:t.descriptionLocalEditing,callback:function(e){t.descriptionLocalEditing=e},expression:"descriptionLocalEditing"}})],1),i("div",{staticStyle:{"margin-top":"10px"}},[t.isEditingDescription?i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"default"},on:{click:function(e){return e.preventDefault(),t.cancelEditDescription(e)}}},[t._v("Cancel ")]):t._e(),t.isEditingDescription?i("a-button",{attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.saveDescription(e)}}},[t._v("Save")]):t._e()],1)]):i("div",{domProps:{innerHTML:t._s(t.description)}})]):t._e()]),i("a-col",{attrs:{span:6}},[i("div",{staticClass:"add-to-basket-wrapper"},[i("div",{staticClass:"top-row"},[i("div",{staticClass:"left"},[i("span",{staticClass:"price"},[t._v(t._s(t.selectedPrice?t.formatCostInPence2dp({cost:t.selectedPrice.price,cost_currency:t.selectedPrice.price_currency?t.selectedPrice.price_currency:"USD"}):"-"))]),t._v(" ("+t._s(t.formatCostInPence2dp({cost:t.pricePerUnit,cost_currency:t.selectedPrice&&t.selectedPrice.price_currency?t.selectedPrice.price_currency:"USD"}))+"/"+t._s(t.unit)+") ")]),i("div",{staticClass:"right"},[i("co2e-indicator",{attrs:{product:t.product}})],1)]),i("div",{staticClass:"stock-wrapper"},[i("span",{staticClass:"stock-text",class:{"in-stock":t.isInStock(t.stockForSelectedPrice?t.stockForSelectedPrice.stock:null),"out-of-stock":t.isOutOfStock(t.stockForSelectedPrice?t.stockForSelectedPrice.stock:null)}},[t._v(t._s(t.getStockText(t.stockForSelectedPrice?t.stockForSelectedPrice.stock:null,!1,t.stockForSelectedPrice?t.stockForSelectedPrice.lead_time:null)))])]),t.product.effectiveness?i("div",{staticClass:"effectiveness-wrapper"},[i("a-tag",{attrs:{color:"blue"}},[i("a-icon",{attrs:{type:"bulb"}}),t._v(" "+t._s(t.formatEffectiveness(t.product.effectiveness))+" Effectiveness ")],1)],1):t._e(),i("div",{staticClass:"general-details"},[i("div",{staticClass:"general-details-row"},[i("div",{staticClass:"left"},[t._v(" Dispatches from ")]),i("div",{staticClass:"right"},[t.product?i("dispatches-from",{attrs:{product:t.product}}):t._e()],1)]),i("div",{staticClass:"general-details-row"},[i("div",{staticClass:"left"},[t._v(" Sold by ")]),i("div",{staticClass:"right"},[i("a-dropdown",[i("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return t.preventDefault()}}},[t._v(" "+t._s(t.selectedPrice?t.selectedPrice.supplier_name:"Select supplier")+" "),i("a-icon",{attrs:{type:"down"}})],1),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},t._l(t.prices,(function(e,a){return i("a-menu-item",{key:a},[i("a",{attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),function(){return t.selectPrice(e)}()}}},[t._v(t._s(e.supplier_name))])])})),1)],1)],1)])]),i("div",{staticClass:"address-selector-wrapper"},[i("address-selector-inline")],1),"edit"!==t.view&&t.selectedPrice?i("div",{staticClass:"quantity-changer-wrapper"},[i("div",{staticClass:"quantity-adder-wrapper"},[t.isProductInBasket?t._e():i("a-input-group",{staticClass:"quantity-input-group",attrs:{compact:""}},[i("a-button",{attrs:{icon:"minus"},on:{click:function(e){return e.preventDefault(),t.decrementQuantityToAdd(e)}}}),i("a-input",{staticClass:"quantity-input",attrs:{placeholder:"1",type:"number"},model:{value:t.quantityToAdd,callback:function(e){t.quantityToAdd=e},expression:"quantityToAdd"}}),i("a-button",{attrs:{icon:"plus"},on:{click:function(e){return e.preventDefault(),t.incrementQuantityToAdd(e)}}})],1),t.isProductInBasket?t._e():i("a-button",{staticClass:"add-button button-yellow",attrs:{type:"default"},on:{click:function(e){return e.preventDefault(),function(){return t.addToBasket()}()}}},[t._v("Add to basket ")])],1),t.isProductInBasket?i("div",{staticClass:"quantity-changer"},[i("a-input-group",{staticClass:"quantity-input-group",attrs:{compact:""}},[i("a-button",{attrs:{icon:"minus"},on:{click:function(e){return e.preventDefault(),function(){return t.decrementProductQuantity({product:t.product,selectedPriceId:t.selectedPrice.id})}()}}}),i("a-input",{staticClass:"quantity-input",attrs:{type:"number",value:t.quantityOfProductInBasket},on:{change:function(e){return t.setProductQuantity({quantity:e.target.value,id:t.product["_id"],selectedPriceId:t.selectedPrice.id})}}}),i("a-button",{attrs:{icon:"plus"},on:{click:function(e){return e.preventDefault(),function(){return t.incrementProductQuantity({product:t.product,selectedPriceId:t.selectedPrice.id})}()}}})],1)],1):t._e()]):t._e()])])],1)],1):t._e(),i("div",{staticClass:"suggested-products-wrapper"},[t.product?i("suggested-products",{attrs:{product:t.product}}):t._e()],1),i("div",{key:t.reloadKey,staticClass:"page-inner-wrapper"},[i("div",{ref:"product-navbar",staticClass:"product-navbar",class:{fixed:t.isNavbarFixed}},[i("div",{staticClass:"nav-link"},[i("a-tabs",{on:{tabClick:t.handleTabClicked},model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},[i("a-tab-pane",{key:"properties",attrs:{tab:"Properties"}}),i("a-tab-pane",{key:"pricing",attrs:{tab:"Pricing"}}),i("a-tab-pane",{key:"environment",attrs:{tab:"Environment"}}),i("a-tab-pane",{key:"documents",attrs:{tab:"Documents"}})],1)],1)]),"edit"!==t.view?i("a-row",{staticClass:"page-sections-cols",attrs:{gutter:20,type:"flex"}},[i("a-col",{attrs:{span:12}},[i("div",{ref:"properties-tab",staticClass:"page-section page-section-col"},[i("h2",[t._v("Properties")]),i("specifications-tab")],1)]),i("a-col",{attrs:{span:12}},[i("div",{ref:"pricing-tab",staticClass:"page-section page-section-col"},[i("h2",[t._v("Pricing")]),i("pricing-tab",{attrs:{prices:t.prices,stocks:t.stocks}})],1)])],1):t._e(),"edit"===t.view?i("div",{ref:"properties-tab",staticClass:"page-section"},[i("h2",[t._v("Properties")]),i("specifications-tab")],1):t._e(),"edit"===t.view?i("div",{ref:"pricing-tab",staticClass:"page-section"},[i("h2",[t._v("Pricing")]),i("pricing-tab",{attrs:{prices:t.prices,stocks:t.stocks}})],1):t._e(),i("div",{ref:"environment-tab",staticClass:"page-section"},[i("h2",[t._v("Environment")]),i("environment-tab")],1),i("div",{ref:"documents-tab",staticClass:"page-section"},[i("h2",[t._v("Documents")]),i("documents-tab")],1)],1)],1)},n=[],s=(i("a4d3"),i("e01a"),i("4de4"),i("7db0"),i("fb6a"),i("5530")),o=i("2f62"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-carousel",{attrs:{arrows:"","dots-class":"slick-dots slick-thumb"},scopedSlots:t._u([{key:"customPaging",fn:function(e){return i("a",{},[i("img",{attrs:{src:t.getImgUrl(e.i)}})])}}])},t._l(t.urls,(function(t,e){return i("div",{key:e},[i("img",{attrs:{src:t}})])})),0)},c=[],d={props:["urls"],data:function(){return{}},methods:{getImgUrl:function(t){return this.urls[t]}}},l=d,u=(i("d434"),i("2877")),p=Object(u["a"])(l,r,c,!1,null,"4c0f5fd0",null),m=p.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"padding-top":"15px"}},[i("table",{staticClass:"axpi-basic-table"},[t._m(0),i("tbody",[t._l(t.documents,(function(e,a){return i("tr",{key:a},[i("td",[t._v(" "+t._s(e.description)+" ")]),i("td",{staticStyle:{"text-align":"right"}},[i("a-button",{staticStyle:{"margin-right":"5px"},attrs:{icon:"download",size:"small"},on:{click:function(i){return i.preventDefault(),t.download(e.url)}}}),i("delete-document-button",{attrs:{product:t.product,document:e}})],1)])})),0===t.documents.length?i("tr",[i("td",{attrs:{colspan:"2"}},[t._v("No documents")])]):t._e()],2)]),"edit"===t.view?i("div",{staticClass:"upload-button-wrapper"},[i("upload-document-button-and-modal",{attrs:{product:t.product}})],1):t._e()])},g=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",[t._v("Document")]),i("th")])])}],h=(i("b0c0"),i("4360")),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-popover",{attrs:{placement:"topRight",trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("template",{slot:"title"},[i("div",{staticClass:"filter-title-wrapper"},[i("div",{staticClass:"center"},[t._v(" Are you sure you want to delete? ")])])]),i("template",{slot:"content"},[i("div",{staticClass:"popover-inner popconfirm"},[i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{disabled:t.isDeleting,size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("Cancel")]),i("a-button",{attrs:{disabled:t.isDeleting,type:"danger",size:"small"},on:{click:function(e){return e.preventDefault(),t.deleteDocument(e)}}},[t._v("Delete")])],1)]),i("a-button",{attrs:{disabled:t.isDeleting,size:"small",icon:"delete",type:"danger"}})],2)},_=[],b=i("bc3a"),y=i.n(b),w={name:"DeleteDocumentButton",props:["product","document"],data:function(){return{visible:!1,isDeleting:!1}},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])("productViewer",{loadDocuments:"loadDocuments"})),{},{deleteDocument:function(){var t=this;if(t.isDeleting)return!1;t.isDeleting=!0,y.a.delete(window.API_BASE+"/products/"+this.product["productCode"]+"/documents/"+this.document["_id"]).then((function(){t.isDeleting=!1,t.visible=!1,t.$message.success("Document deleted successfully"),t.loadDocuments()})).catch((function(e){console.log(e),t.isDeleting=!1,t.$message.error("Error deleting document")}))}})},k=w,S=Object(u["a"])(k,v,_,!1,null,"e15dad6a",null),D=S.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-button",{attrs:{type:"primary"},on:{click:t.showModal}},[i("a-icon",{attrs:{type:"upload"}}),t._v(" Click to Upload ")],1),i("loading-screen",{attrs:{"is-loading":t.isSaving}}),i("a-modal",{attrs:{centered:!0,width:700,"mask-closable":!1,title:"Upload Document",footer:null},model:{value:t.shouldShowModal,callback:function(e){t.shouldShowModal=e},expression:"shouldShowModal"}},[i("div",[i("a-form-item",{attrs:{label:"Description"}},[i("a-input",{attrs:{size:"large",type:"text"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1),i("a-form-item",{attrs:{label:"Document"}},[i("a-upload",{attrs:{"file-list":t.fileList,disabled:t.fileList.length,remove:t.handleRemove,"before-upload":t.beforeUpload}},[i("a-button",[i("a-icon",{attrs:{type:"upload"}}),t._v(" Select File ")],1)],1)],1),i("a-button",{attrs:{disabled:!t.canUpload,type:"primary",loading:t.uploading},on:{click:t.handleUpload}},[t._v("Upload ")])],1)],1)},C=[],A=(i("99af"),i("c975"),i("a434"),i("2909")),P={name:"UploadDocumentButtonAndModal",props:["product"],data:function(){return{shouldShowModal:!1,fileDescription:"",fileList:[],isSaving:!1,description:"",uploading:!1}},watch:{shouldShowModal:function(t){!1===t&&(this.description="",this.fileList=[])}},computed:{uploadUrl:function(){return window.API_BASE+"/products/"+this.product.productCode+"/documents"},canUpload:function(){return this.description&&this.fileList.length}},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])("productViewer",{loadDocuments:"loadDocuments"})),{},{showModal:function(){this.shouldShowModal=!0},closeModal:function(){this.shouldShowModal=!1},handleRemove:function(t){var e=this.fileList.indexOf(t),i=this.fileList.slice();i.splice(e,1),this.fileList=i},beforeUpload:function(t){return this.fileList=[].concat(Object(A["a"])(this.fileList),[t]),!1},handleUpload:function(){var t=this,e=this.fileList,i=new FormData;i.append("file",e[0]),i.append("description",this.description),this.uploading=!0,y()({method:"post",url:this.uploadUrl,data:i,headers:{"Content-Type":"multipart/form-data"}}).then((function(){t.uploading=!1,t.shouldShowModal=!1,t.loadDocuments()})).catch((function(e){console.log(e),t.uploading=!1,t.$message.error("Error uploading document")}))}})},O=P,E=Object(u["a"])(O,M,C,!1,null,"2515d256",null),x=E.exports,L={name:"DocumentsTab",components:{UploadDocumentButtonAndModal:x,DeleteDocumentButton:D},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(o["c"])("productViewer",{product:"product",documents:"documents",view:"view"})),Object(o["c"])("auth",{apiToken:"apiToken"})),{},{headers:function(){var t={},e=h["a"].getters["auth/apiToken"];return e&&(t["Authorization"]="Bearer "+e),t},uploadUrl:function(){return window.API_BASE+"/products/"+this.product.productCode+"/documents"}}),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])("productViewer",{loadDocuments:"loadDocuments"})),{},{handleChange:function(t){"done"===t.file.status?(this.$message.success("Upload successful"),this.loadDocuments()):"error"===t.file.status&&this.$message.error("".concat(t.file.name," file upload failed."))},getDownloadLink:function(t){return window.IMAGE_STORAGE_BASE+"/"+t},download:function(t){window.open(this.getDownloadLink(t),"_blank")}}),data:function(){return{}}},T=L,B=(i("4a1f"),Object(u["a"])(T,f,g,!1,null,"2473688e",null)),I=B.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("table",{staticClass:"axpi-basic-table"},["edit"===t.view?i("thead",[i("tr",["edit"!==t.view?i("th",{attrs:{width:"300"}},[t._v("Field Name")]):i("th",[t._v("Field Name")]),i("th",{attrs:{width:"200"}},[t._v("Value")]),"edit"==t.view?i("th",{attrs:{width:"130"}},[t._v("Normalised Value")]):t._e(),"edit"==t.view?i("th"):t._e(),"edit"==t.view?i("th"):t._e()])]):t._e(),i("tbody",[i("edit-quantity-row",{attrs:{product:t.product}}),i("edit-measure-row",{attrs:{product:t.product}}),t._l(t.numericDetailsToShow,(function(t,e){return i("specification-row",{key:e,attrs:{detail:t}})})),t._l(t.categoricalDetailsToShow,(function(t,e){return i("categorical-specification-row",{key:e,attrs:{detail:t}})})),t.isAddingNewProperty?i("tr",[i("td",[i("div",{staticClass:"lhs-wrapper"},[i("div",[i("a-select",{staticStyle:{width:"150px"},model:{value:t.newDetails.variableType,callback:function(e){t.$set(t.newDetails,"variableType",e)},expression:"newDetails.variableType"}},[i("a-select-option",{attrs:{value:"numerical"}},[t._v("Numerical")]),i("a-select-option",{attrs:{value:"categorical"}},[t._v("Categorical")])],1)],1),i("div",[i("a-input",{attrs:{placeholder:"Property name"},model:{value:t.newDetails.propertyName,callback:function(e){t.$set(t.newDetails,"propertyName",e)},expression:"newDetails.propertyName"}})],1)])]),i("td",["categorical"==t.newDetails.variableType?i("a-input",{attrs:{placeholder:"Value"},model:{value:t.newDetails.propertyValue,callback:function(e){t.$set(t.newDetails,"propertyValue",e)},expression:"newDetails.propertyValue"}}):t._e()],1),i("td",["numerical"==t.newDetails.variableType?i("a-input",{attrs:{placeholder:"Value"},model:{value:t.newDetails.normalisedUnitMagnitude,callback:function(e){t.$set(t.newDetails,"normalisedUnitMagnitude",e)},expression:"newDetails.normalisedUnitMagnitude"}}):t._e()],1),i("td",["numerical"==t.newDetails.variableType?i("a-select",{staticStyle:{width:"100%"},model:{value:t.newDetails.normalisedUnitBase,callback:function(e){t.$set(t.newDetails,"normalisedUnitBase",e)},expression:"newDetails.normalisedUnitBase"}},t._l(t.unitOptions,(function(e,a){return i("a-select-option",{key:a,attrs:{value:e.unit}},[t._v(" "+t._s("dimensionless"==e.unit?"dimensionless":null)+" "+t._s("count"==e.unit?"count":null)+" "),i("span",{domProps:{innerHTML:t._s(e.display)}})])})),1):t._e()],1),i("td",{staticClass:"text-right"},[i("a-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small",type:"default"},on:{click:function(e){return e.preventDefault(),t.cancel(e)}}},[t._v("Cancel ")]),i("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("Save")]),i("loading-screen",{attrs:{"is-loading":t.isSaving}})],1)]):t._e()],2)]),t.isAddingNewProperty||"edit"!==t.view?t._e():i("div",{staticStyle:{"margin-top":"30px"}},[i("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return e.preventDefault(),t.addNewProperty(e)}}},[t._v("Add Property ")])],1)])},U=[],V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",{attrs:{width:"300"}},[i("loading-screen",{attrs:{"is-loading":t.isSaving||t.isLoadingDetails}}),t._v(" "+t._s(t.localDetail["propertyName"])+" ")],1),i("td",[i("span",{domProps:{innerHTML:t._s(t.getPropertyValue(t.localDetail))}})]),t.isEditing||"edit"!=t.view?t._e():i("td",[t.localDetail["inequality"]&&"between"!==t.localDetail["inequality"]?i("span",{staticStyle:{"padding-right":"5px"}},[t._v(t._s(t.getInequalityLabel(t.localDetail["inequality"])))]):t._e(),t.localDetail["inequality"]&&"between"===t.localDetail["inequality"]?t._e():i("span",{domProps:{innerHTML:t._s(t.formatVal(t.localDetail["normalisedUnitMagnitude"]))}}),t.localDetail["inequality"]&&"between"===t.localDetail["inequality"]?i("span",{domProps:{innerHTML:t._s(t.formatRange(t.localDetail))}}):t._e()]),t.isEditing||"edit"!=t.view?t._e():i("td",[i("span",{attrs:{span:t.formatUnit(t.localDetail.normalisedUnitBase)}})]),t.isEditing||"edit"!=t.view?t._e():i("td",{staticClass:"text-right"},[t.isEditing?t._e():i("a-button",{attrs:{size:"small",icon:"edit",type:"default"},on:{click:function(e){return e.preventDefault(),t.edit(e)}}}),t.isEditing?t._e():i("delete-product-detail-button",{staticStyle:{"margin-left":"6px"},attrs:{product:t.product,details:t.localDetail}})],1),t.isEditing&&"edit"==t.view?i("td",{attrs:{colspan:"2"}},[i("div",{staticClass:"editing-fields-wrapper"},[i("div",{staticClass:"input-padding-right"},[i("a-select",{staticStyle:{width:"110px"},model:{value:t.details.inequality,callback:function(e){t.$set(t.details,"inequality",e)},expression:"details.inequality"}},t._l(t.inequalityOptions,(function(e,a){return i("a-select-option",{key:a,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),"between"!==t.details.inequality?i("div",{staticClass:"input-padding-right"},[i("a-input",{model:{value:t.details.normalisedUnitMagnitude,callback:function(e){t.$set(t.details,"normalisedUnitMagnitude",e)},expression:"details.normalisedUnitMagnitude"}})],1):t._e(),"between"===t.details.inequality?i("div",{staticClass:"input-padding-right inequality-input-wrapper"},[i("a-input",{model:{value:t.details.rangeMin,callback:function(e){t.$set(t.details,"rangeMin",e)},expression:"details.rangeMin"}}),i("span",{staticClass:"inequality-input-to"},[t._v("to")]),i("a-input",{model:{value:t.details.rangeMax,callback:function(e){t.$set(t.details,"rangeMax",e)},expression:"details.rangeMax"}})],1):t._e(),i("a-select",{staticStyle:{width:"150px"},model:{value:t.details.normalisedUnitBase,callback:function(e){t.$set(t.details,"normalisedUnitBase",e)},expression:"details.normalisedUnitBase"}},t._l(t.unitOptions,(function(e,a){return i("a-select-option",{key:a,attrs:{value:e.unit}},[t._v(" "+t._s("dimensionless"==e.unit?"dimensionless":null)+" "+t._s("count"==e.unit?"count":null)+" "),i("span",{domProps:{innerHTML:t._s(e.display)}})])})),1)],1)]):t._e(),t.isEditing&&"edit"==t.view?i("td",{staticClass:"text-right"},[t.isEditing?i("a-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small",type:"default"},on:{click:function(e){return e.preventDefault(),t.cancel(e)}}},[t._v("Cancel ")]):t._e(),t.isEditing?i("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("Save")]):t._e()],1):t._e()])},j=[],q=(i("a9e3"),i("c35a"),i("ac1f"),i("1276"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-popover",{attrs:{placement:"topRight",trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("template",{slot:"title"},[i("div",{staticClass:"filter-title-wrapper"},[i("div",{staticClass:"center"},[t._v(" Are you sure you want to delete? ")])])]),i("template",{slot:"content"},[i("div",{staticClass:"popover-inner popconfirm"},[i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{disabled:t.isDeleting,size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("Cancel")]),i("a-button",{attrs:{disabled:t.isDeleting,type:"danger",size:"small"},on:{click:function(e){return e.preventDefault(),t.deleteProperty(e)}}},[t._v("Delete")])],1)]),i("a-button",{attrs:{disabled:t.isDeleting,size:"small",icon:"delete",type:"danger"}})],2)}),F=[],N={name:"DeleteProductDetailButton",props:["product","details"],data:function(){return{visible:!1,isDeleting:!1}},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])("productViewer",{loadDetails:"loadDetails"})),{},{deleteProperty:function(){var t=this;if(t.isDeleting)return!1;t.isDeleting=!0,y.a.post(window.API_BASE+"/products/"+this.product["_id"]+"/delete-detail",{propertyName:t.details.propertyName,normalisedUnitMagnitude:t.details.normalisedUnitMagnitude,normalisedUnitBase:t.details.normalisedUnitBase,inequality:t.details.inequality}).then((function(){t.isDeleting=!1,t.visible=!1,t.$message.success("Property deleted successfully"),t.loadDetails()})).catch((function(e){console.log(e),t.isDeleting=!1,t.$message.error("Error deleting property")}))}})},z=N,Q=Object(u["a"])(z,q,F,!1,null,"02fbba8e",null),R=Q.exports,H=i("b1c1"),W=i("2ef0"),K={data:function(){return{inequalityOptions:[{label:"=",value:null},{label:">",value:">"},{label:">=",value:">="},{label:"<",value:"<"},{label:"<=",value:"<="},{label:"Between",value:"between"}]}},methods:{getInequalityLabel:function(t){if("between"===t)return null;var e=W.find(this.inequalityOptions,{value:t});return e?e.value:"-"}}},J={name:"SpecificationRow",components:{DeleteProductDetailButton:R},mixins:[H["a"],K],props:["detail"],data:function(){return{isEditing:!1,localDetail:{},details:{},isSaving:!1}},created:function(){this.localDetail=this.detail},computed:Object(s["a"])({},Object(o["c"])("productViewer",{product:"product",isLoadingDetails:"isLoadingDetails",view:"view"})),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])("productViewer",{loadDetails:"loadDetails"})),{},{getPropertyValue:function(t){return t["propertyValues"]&&t["propertyValues"].length?t["propertyValues"][0]:t["normalisedUnitMagnitude"]&&t["normalisedUnitBase"]?t["normalisedUnitMagnitude"]+" "+this.formatUnit(t["normalisedUnitBase"]):"-"},edit:function(){this.isEditing=!0,this.localDetail.uncertainty?(this.localDetail.rangeMin=this.localDetail.normalisedUnitMagnitude-this.localDetail.uncertainty,this.localDetail.rangeMax=this.localDetail.normalisedUnitMagnitude+this.localDetail.uncertainty):(this.localDetail.rangeMin=this.localDetail.normalisedUnitMagnitude,this.localDetail.rangeMax=this.localDetail.normalisedUnitMagnitude),this.details=Object(s["a"])({},this.localDetail)},cancel:function(){this.details={},this.isEditing=!1},formatVal:function(t){if(t<1){var e=Number.parseFloat(t).toExponential(3),i=e.split("e");t=i[0]+" x 10<sup>"+i[1]+"</sup>"}return t},formatRange:function(t){var e=t.normalisedUnitMagnitude-t.uncertainty,i=t.normalisedUnitMagnitude+t.uncertainty;return this.formatVal(e)+" - "+this.formatVal(i)},save:function(){var t=this,e=this;if(e.isSaving=!0,this.details.inequality&&"between"===this.details.inequality){var i=this.details.rangeMin,a=this.details.rangeMax,n=(Number(a)+Number(i))/2,s=Number(a)-Number(n);this.details.normalisedUnitMagnitude=n,this.details.uncertainty=s}y.a.post(window.API_BASE+"/products/"+this.product["_id"]+"/details",e.details).then((function(){e.isSaving=!1,e.isEditing=!1,e.localDetail=e.details})).catch((function(i){e.isSaving=!1,console.log(i),t.$message.error("Error saving property")}))}})},G=J,Y=(i("2df0"),Object(u["a"])(G,V,j,!1,null,"53807570",null)),X=Y.exports,Z=i("7b84"),tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",[i("loading-screen",{attrs:{"is-loading":t.isSaving||t.isLoadingDetails}}),t._v(" "+t._s(t.localDetail["propertyName"])+" ")],1),i("td",[t.isEditing?t._e():i("span",[t._v(t._s(t.localDetail.propertyValue))]),t.isEditing?i("a-input",{model:{value:t.details.propertyValue,callback:function(e){t.$set(t.details,"propertyValue",e)},expression:"details.propertyValue"}}):t._e()],1),"edit"==t.view?i("td",[t._v(" - ")]):t._e(),"edit"==t.view?i("td"):t._e(),"edit"==t.view?i("td",{staticClass:"text-right"},[t.isEditing?t._e():i("a-button",{attrs:{size:"small",icon:"edit",type:"default"},on:{click:function(e){return e.preventDefault(),t.edit(e)}}}),t.isEditing?t._e():i("delete-product-detail-button",{staticStyle:{"margin-left":"6px"},attrs:{product:t.product,details:t.localDetail}}),t.isEditing?i("a-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small",type:"default"},on:{click:function(e){return e.preventDefault(),t.cancel(e)}}},[t._v("Cancel ")]):t._e(),t.isEditing?i("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("Save")]):t._e()],1):t._e()])},et=[],it={name:"CategoricalSpecificationRow",components:{DeleteProductDetailButton:R},mixins:[H["a"]],props:["detail"],data:function(){return{isEditing:!1,localDetail:{},details:{},isSaving:!1}},created:function(){this.localDetail=this.detail},computed:Object(s["a"])({},Object(o["c"])("productViewer",{product:"product",isLoadingDetails:"isLoadingDetails",view:"view"})),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])("productViewer",{loadDetails:"loadDetails"})),{},{getPropertyValue:function(t){return t["propertyValues"]&&t["propertyValues"].length?t["propertyValues"][0]:"-"},edit:function(){this.isEditing=!0,this.details=Object(s["a"])({},this.localDetail)},cancel:function(){this.details={},this.isEditing=!1},formatVal:function(t){if(t<1){var e=Number.parseFloat(t).toExponential(3),i=e.split("e");t=i[0]+" x 10<sup>"+i[1]+"</sup>"}return t},save:function(){var t=this,e=this;e.isSaving=!0,y.a.post(window.API_BASE+"/products/"+this.product["_id"]+"/details",e.details).then((function(){e.isSaving=!1,e.isEditing=!1,e.localDetail=e.details})).catch((function(i){e.isSaving=!1,console.log(i),t.$message.error("Error saving property")}))}})},at=it,nt=(i("93c3"),Object(u["a"])(at,tt,et,!1,null,"bac720ba",null)),st=nt.exports,ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",[i("loading-screen",{attrs:{"is-loading":t.isSaving}}),t._v(" Quantity ")],1),i("td",[i("span",[t._v(t._s(t.rawValue))])]),"edit"==t.view?i("td",[t.isEditing?t._e():i("span",{domProps:{innerHTML:t._s(t.normalisedValueMagnitudeFormatted)}}),t.isEditing?i("a-input",{model:{value:t.normalisedQuantityEditing.normalisedUnitMagnitude,callback:function(e){t.$set(t.normalisedQuantityEditing,"normalisedUnitMagnitude",e)},expression:"normalisedQuantityEditing.normalisedUnitMagnitude"}}):t._e()],1):t._e(),"edit"==t.view?i("td",[t.isEditing?t._e():i("span",{domProps:{innerHTML:t._s(t.normalisedUnitBaseFormatted)}})]):t._e(),"edit"==t.view?i("td",{staticClass:"text-right"},[t.isEditing?t._e():i("a-button",{attrs:{size:"small",icon:"edit",type:"default"},on:{click:function(e){return e.preventDefault(),t.edit(e)}}}),t.isEditing?i("a-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small",type:"default"},on:{click:function(e){return e.preventDefault(),t.cancel(e)}}},[t._v("Cancel ")]):t._e(),t.isEditing?i("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("Save")]):t._e()],1):t._e()])},rt=[],ct=i("2ef0"),dt={name:"EditQuantityRow",props:["product"],mixins:[H["a"]],data:function(){return{isSaving:!1,isEditing:!1,normalisedQuantity:{},normalisedQuantityEditing:{}}},created:function(){this.product.normalisedQuantity&&(this.normalisedQuantity=ct.cloneDeep(this.product.normalisedQuantity))},methods:{formatVal:function(t){if(t<1){var e=Number.parseFloat(t).toExponential(3),i=e.split("e");t=i[0]+" x 10<sup>"+i[1]+"</sup>"}return t},edit:function(){this.isEditing=!0,this.normalisedQuantityEditing=Object(s["a"])({},this.normalisedQuantity)},cancel:function(){this.normalisedQuantityEditing={},this.isEditing=!1},save:function(){var t=this;t.isSaving=!0,y.a.post(window.API_BASE+"/products/"+this.product["_id"]+"/update-quantity",this.normalisedQuantityEditing).then((function(){t.isSaving=!1,t.isEditing=!1,t.normalisedQuantity=t.normalisedQuantityEditing})).catch((function(e){console.log(e),t.isSaving=!1,t.$message.error("Error saving quantity")}))}},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])("productViewer",{view:"view"})),{},{rawValue:function(){return this.normalisedQuantity.rawMagnitude?this.normalisedQuantity.rawMagnitude+" "+this.normalisedQuantity.unit:""},normalisedValueMagnitudeFormatted:function(){return this.normalisedQuantity.normalisedUnitMagnitude?this.formatVal(this.normalisedQuantity.normalisedUnitMagnitude):""},normalisedUnitBaseFormatted:function(){return this.normalisedQuantity.normalisedUnitBase?this.formatUnit(this.normalisedQuantity.normalisedUnitBase):""}})},lt=dt,ut=(i("5593"),Object(u["a"])(lt,ot,rt,!1,null,"490aec9b",null)),pt=ut.exports,mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{class:{hidden:"edit"!==t.view&&!t.rawValue}},[i("td",[i("loading-screen",{attrs:{"is-loading":t.isSaving}}),t._v(" Measure ")],1),i("td",[i("span",[t._v(t._s(t.rawValue))])]),"edit"==t.view?i("td",[t.isEditing?t._e():i("span",{domProps:{innerHTML:t._s(t.normalisedValueMagnitudeFormatted)}}),t.isEditing?i("a-input",{model:{value:t.normalisedMeasureEditing.normalisedUnitMagnitude,callback:function(e){t.$set(t.normalisedMeasureEditing,"normalisedUnitMagnitude",e)},expression:"normalisedMeasureEditing.normalisedUnitMagnitude"}}):t._e()],1):t._e(),"edit"==t.view?i("td",[t.isEditing?t._e():i("span",{domProps:{innerHTML:t._s(t.normalisedUnitBaseFormatted)}}),t.isEditing?i("a-select",{staticStyle:{width:"100%"},model:{value:t.normalisedMeasureEditing.normalisedUnitBase,callback:function(e){t.$set(t.normalisedMeasureEditing,"normalisedUnitBase",e)},expression:"normalisedMeasureEditing.normalisedUnitBase"}},t._l(t.unitOptions,(function(e,a){return i("a-select-option",{key:a,attrs:{value:e.unit}},[t._v(" "+t._s("dimensionless"==e.unit?"dimensionless":null)+" "+t._s("count"==e.unit?"count":null)+" "),i("span",{domProps:{innerHTML:t._s(e.display)}})])})),1):t._e()],1):t._e(),"edit"==t.view?i("td",{staticClass:"text-right"},[t.isEditing?t._e():i("a-button",{attrs:{size:"small",icon:"edit",type:"default"},on:{click:function(e){return e.preventDefault(),t.edit(e)}}}),t.isEditing?i("a-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small",type:"default"},on:{click:function(e){return e.preventDefault(),t.cancel(e)}}},[t._v("Cancel ")]):t._e(),t.isEditing?i("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("Save")]):t._e()],1):t._e()])},ft=[],gt=i("2ef0"),ht={name:"EditMeasureRow",props:["product"],mixins:[H["a"]],data:function(){return{isSaving:!1,isEditing:!1,normalisedMeasure:{},normalisedMeasureEditing:{}}},created:function(){this.product.normalisedMeasure&&(this.normalisedMeasure=gt.cloneDeep(this.product.normalisedMeasure))},methods:{formatVal:function(t){if(t<1){var e=Number.parseFloat(t).toExponential(3),i=e.split("e");t=i[0]+" x 10<sup>"+i[1]+"</sup>"}return t},edit:function(){this.isEditing=!0,this.normalisedMeasureEditing=Object(s["a"])({},this.normalisedMeasure)},cancel:function(){this.normalisedMeasureEditing={},this.isEditing=!1},save:function(){var t=this;t.isSaving=!0,y.a.post(window.API_BASE+"/products/"+this.product["_id"]+"/update-measure",this.normalisedMeasureEditing).then((function(){t.isSaving=!1,t.isEditing=!1,t.normalisedMeasure=t.normalisedMeasureEditing})).catch((function(e){console.log(e),t.isSaving=!1,t.$message.error("Error saving measure")}))}},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])("productViewer",{view:"view"})),{},{rawValue:function(){return this.normalisedMeasure.rawMagnitude?this.normalisedMeasure.rawMagnitude+" "+this.normalisedMeasure.unit:""},normalisedValueMagnitudeFormatted:function(){return this.normalisedMeasure.normalisedUnitMagnitude?this.formatVal(this.normalisedMeasure.normalisedUnitMagnitude):""},normalisedUnitBaseFormatted:function(){return this.normalisedMeasure.normalisedUnitBase?this.formatUnit(this.normalisedMeasure.normalisedUnitBase):""}})},vt=ht,_t=(i("ac89"),Object(u["a"])(vt,mt,ft,!1,null,"87bd4e1c",null)),bt=_t.exports,yt=i("2ef0"),wt={name:"SpecificationsTabs",components:{SpecificationRow:X,CategoricalSpecificationRow:st,LoadingScreen:Z["default"],EditQuantityRow:pt,EditMeasureRow:bt},mixins:[H["a"]],computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])("productViewer",{details:"details",product:"product",view:"view"})),{},{numericDetailsToShow:function(){var t=yt.cloneDeep(this.details);t.push(this.detailsToAppend);var e=yt.flatten(t),i=yt.filter(e,(function(t){return!(t.variableType&&"categorical"===t.variableType)}));return yt.uniqBy(i,"propertyName")},categoricalDetailsToShow:function(){var t=yt.cloneDeep(this.details);t.push(this.detailsToAppend);var e=yt.flatten(t),i=yt.filter(e,(function(t){return t.variableType&&"categorical"===t.variableType}));return yt.uniqBy(i,"propertyName")}}),data:function(){return{isAddingNewProperty:!1,newDetails:{},isSaving:!1,detailsToAppend:[]}},methods:{addNewProperty:function(){this.newDetails={variableType:"numerical"},this.isAddingNewProperty=!0},save:function(){var t=this,e=this;e.isSaving=!0,y.a.post(window.API_BASE+"/products/"+this.product["_id"]+"/details",this.newDetails).then((function(){e.isSaving=!1,e.detailsToAppend.push(e.newDetails),e.isAddingNewProperty=!1})).catch((function(i){e.isSaving=!1,console.log(i),t.$message.error("Error saving property")}))},cancel:function(){this.isAddingNewProperty=!1}}},kt=wt,St=(i("b54d"),Object(u["a"])(kt,$,U,!1,null,"213a0fc8",null)),Dt=St.exports,Mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.canEditProducts?i("a-radio-group",{model:{value:t.viewToUse,callback:function(e){t.viewToUse=e},expression:"viewToUse"}},[i("a-radio-button",{attrs:{value:"view"}},[i("a-icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"eye"}}),t._v(" View ")],1),i("a-radio-button",{attrs:{value:"edit"}},[i("a-icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"edit"}}),t._v(" Edit ")],1)],1):t._e()],1)},Ct=[],At={name:"ViewToggler",computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(o["c"])("auth",{canEditProducts:"canEditProducts"})),Object(o["c"])("productViewer",{view:"view"})),{},{viewToUse:{get:function(){return this.view},set:function(t){this.setView(t)}}}),methods:Object(s["a"])({},Object(o["b"])("productViewer",{setView:"setView"}))},Pt=At,Ot=Object(u["a"])(Pt,Mt,Ct,!1,null,"51c561e2",null),Et=Ot.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"address-selector-link",on:{click:function(e){return e.preventDefault(),t.openSelectAddressModal(e)}}},[i("div",{staticClass:"left"},[i("a-icon",{attrs:{type:"environment"}})],1),i("div",{staticClass:"right"},[t._v(" "+t._s(t.selectedAddress?t.formatAddressShort(t.selectedAddress,"Deliver to "+t.user.client.name+" - "):"No address selected")+" ")])]),i("a-modal",{attrs:{centered:"",title:"Select Address",footer:null},model:{value:t.addressSelectorVisible,callback:function(e){t.addressSelectorVisible=e},expression:"addressSelectorVisible"}},[t.isLoading?i("div",{staticClass:"loader"},[i("a-spin")],1):t._e(),"list"===t.view?i("div",{staticClass:"addresses"},[t._l(t.addresses,(function(e,a){return i("div",{key:a,staticClass:"address-selection"},[i("a-button",{attrs:{block:""},on:{click:function(i){return i.preventDefault(),function(){return t.selectAddressAndCloseModal(e)}()}}},[t._v(t._s(t.formatAddress(e))+" ")])],1)})),i("div",{staticClass:"add-address-button"},[i("a-button",{attrs:{type:"link"},on:{click:function(e){return e.preventDefault(),function(){return t.setView("create")}()}}},[t._v("Or add a new address")])],1)],2):t._e(),"create"===t.view?i("div",[i("a-form",{attrs:{layout:"vertical",form:t.form},on:{submit:t.attemptSaveAddress}},[i("a-form-item",{attrs:{label:"Address Line One"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address_line_one",{rules:[{required:!0,message:"Address line one is required"}]}],expression:"['address_line_one', { rules: [{ required: true, message: 'Address line one is required' }] }]"}]})],1),i("a-form-item",{attrs:{label:"Address Line Two"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address_line_two"],expression:"['address_line_two']"}]})],1),i("a-form-item",{attrs:{label:"City"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["city",{rules:[{required:!0,message:"City is required"}]}],expression:"['city', { rules: [{ required: true, message: 'City is required' }] }]"}]})],1),i("a-row",{attrs:{gutter:20}},[i("a-col",{attrs:{span:12}},[i("a-form-item",{attrs:{label:"Province"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["province",{rules:[{required:!0,message:"Province is required"}]}],expression:"['province', { rules: [{ required: true, message: 'Province is required' }] }]"}]})],1)],1),i("a-col",{attrs:{span:12}},[i("a-form-item",{attrs:{label:"Postcode"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["postal_code",{rules:[{required:!0,message:"Postcode is required"}]}],expression:"['postal_code', { rules: [{ required: true, message: 'Postcode is required' }] }]"}]})],1)],1)],1),i("a-form-item",{attrs:{label:"Country"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["country",{rules:[{required:!0,message:"Country is required"}]}],expression:"['country', { rules: [{required: true, message: 'Country is required'}] }]"}],attrs:{"show-search":""}},t._l(t.countries,(function(e,a){return i("a-select-option",{key:a,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),i("a-form-item",{staticStyle:{"padding-bottom":"0","margin-bottom":"0"}},[i("a-space",[i("a-button",{attrs:{type:"primary","html-type":"submit",loading:t.isSaving}},[t._v("Save")]),i("a-button",{on:{click:function(){return t.setView("list")}}},[t._v("Cancel")])],1)],1)],1)],1):t._e()])],1)},Lt=[],Tt=i("c8c8"),Bt=i("78ec"),It={name:"AddressSelectorInline",mixins:[Tt["a"],Bt["a"]],data:function(){return{isLoading:!1,addresses:[],view:"list",addressSelectorVisible:!1,form:this.$form.createForm(this,{name:"new_address_form"})}},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])("shop",{selectedAddress:"selectedAddress"})),Object(o["c"])("auth",{user:"user"})),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])("shop",{selectAddress:"selectAddress"})),{},{setView:function(t){this.view=t},openSelectAddressModal:function(){this.addressSelectorVisible=!0,this.view="list",this.fetch()},selectAddressAndCloseModal:function(t){this.selectAddress(t),this.addressSelectorVisible=!1},fetch:function(){var t=this;y.a.get(window.API_BASE+"/addresses").then((function(e){t.isLoading=!1,t.addresses=e.data})).catch((function(e){console.log(e),t.isLoading=!1}))},attemptSaveAddress:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,i){t||e.saveAddress(i)}))},saveAddress:function(t){var e=this;e.isSaving=!0,y.a.post(window.API_BASE+"/addresses",t).then((function(t){e.isSaving=!1,e.selectAddress(t.data),e.form.resetFields(),e.view="list",e.addressSelectorVisible=!1})).catch((function(t){console.log(t),e.$message.error("Error saving address"),e.isSaving=!1}))}})},$t=It,Ut=(i("5767"),Object(u["a"])($t,xt,Lt,!1,null,"1734626c",null)),Vt=Ut.exports,jt=i("2d20"),qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"environment-tab"},[i("a-table",{staticClass:"axpi-table",attrs:{expandIconAsCell:!1,"expand-icon":t.getExpandIcon,"expand-icon-column-index":4,columns:t.columns,"data-source":t.tableData,pagination:!1},scopedSlots:t._u([{key:"icon",fn:function(e,a){return["Lifespan"==a.section?i("a-icon",{staticClass:"section-icon",attrs:{type:"clock-circle"}}):t._e(),"Materials"==a.section?i("a-icon",{staticClass:"section-icon",attrs:{type:"copy"}}):t._e(),"Transport"==a.section?i("a-icon",{staticClass:"section-icon",attrs:{type:"car"}}):t._e(),"Certifications"==a.section?i("a-icon",{staticClass:"section-icon",attrs:{type:"safety-certificate"}}):t._e()]}},{key:"section",fn:function(e){return[i("span",{staticClass:"section-title"},[t._v(t._s(e))])]}},{key:"expandedRowRender",fn:function(e){return e.innerTableColumns?i("a-table",{attrs:{columns:e.innerTableColumns,"data-source":e.innerTableData,pagination:!1,loading:e.isLoading},scopedSlots:t._u([{key:"from_address",fn:function(e){return[t._v(" "+t._s(e?t.formatAddress(e):"-")+" ")]}},{key:"to_address",fn:function(e){return[t._v(" "+t._s(e?t.formatAddress(e):"-")+" ")]}},{key:"recyclable",fn:function(e){return[null==e?i("a-tag",{attrs:{color:"blue"}},[t._v("Unknown")]):t._e(),1==e?i("a-tag",{attrs:{color:"green"}},[t._v("Yes")]):t._e(),0==e?i("a-tag",{attrs:{color:"red"}},[t._v("No")]):t._e()]}},{key:"tags",fn:function(e,a){return[t.isMaterialBanned(a.material)?i("a-tag",{attrs:{color:"#000"}},[t._v("Banned")]):t._e()]}},{key:"actions",fn:function(a,n){return[i("div",{staticClass:"actions"},["edit"===t.view?i("delete-property-button",{attrs:{"product-id":t.productId,type:e.section,id:n.id},on:{"material-deleted":t.handleMaterialDeleted,"certification-deleted":t.handleCertificationDeleted,"transportation-deleted":t.handleTransportationDeleted}}):t._e()],1)]}}],null,!1,811521021)}):t._e()}},{key:"measure",fn:function(e,a){return[a.isLoading?i("a-spin"):t._e(),"Materials"!==a.section||a.isLoading?t._e():i("span",[t.totalMaterialCo2e?i("a-tag",{attrs:{color:"blue"}},[t._v(t._s(t.totalMaterialCo2e)+"kg CO2e")]):t._e(),t.totalMaterialWater?i("a-tag",{attrs:{color:"blue"}},[t._v(t._s(t.totalMaterialWater)+"L Water")]):t._e()],1),"Transport"!==a.section||a.isLoading?t._e():i("span",[t.totalTransportCo2e?i("a-tag",{attrs:{color:"blue"}},[t._v(t._s(t.totalTransportCo2e)+"kg CO2e")]):t._e()],1),"Certifications"!==a.section||a.isLoading?t._e():i("span",t._l(a.innerTableData,(function(e,a){return i("a-tag",{key:a,attrs:{color:"blue"}},[t._v(" "+t._s(e.name)+" ")])})),1),"Lifespan"===a.section&&!a.isLoading&&a.innerTableData&&a.innerTableData[0]?i("span",[i("a-tag",{attrs:{color:"blue"}},[t._v(" "+t._s(a.innerTableData[0].lifespan_formatted)+" ")]),i("a-tag",{attrs:{color:"blue"}},[t._v(" "+t._s(a.innerTableData[0].usage)+" ")])],1):t._e(),"Lifespan"!==a.section||a.isLoading||a.innerTableData.length?t._e():i("span",[i("a-tag",{attrs:{color:"red"}},[t._v(" Unknown ")])],1)]}},{key:"tags",fn:function(e,a){return[t.hasBannedMaterials&&"Materials"===a.section?i("a-tag",{attrs:{color:"#000"}},[t._v("Has Banned Materials")]):t._e()]}},{key:"actions",fn:function(e,a){return[a.actionButton&&"edit"===t.view?i("div",{staticClass:"actions"},[i("a-button",{staticClass:"action-button",attrs:{type:"primary",icon:"plus"},on:{click:function(t){return t.preventDefault(),a.actionButtonClicked(t)}}},[t._v(t._s(a.actionButton)+" ")])],1):t._e()]}}],null,!0)}),i("add-material-modal",{attrs:{"product-id":t.productId,visible:t.addMaterialModalVisible,"is-loading-material-options":t.isLoadingMaterialOptions,"material-options":t.materialOptions,"is-loading-aspect-options":t.isLoadingAspectOptions,"aspect-options":t.aspectOptions},on:{"material-added":t.handleMaterialAdded,"close-modal":t.closeAddMaterialModal}}),i("add-transportation-modal",{attrs:{"product-id":t.productId,visible:t.addTransportationModalVisible,"transportation-options":t.transportOptions,"is-loading-transportation-options":t.isLoadingTransportOptions},on:{"transportation-added":t.handleTransportationAdded,"close-modal":t.closeAddTransportationModal}}),i("add-certification-modal",{attrs:{"product-id":t.productId,visible:t.addCertificationModalVisible,"is-loading-certification-options":t.isLoadingCertificationOptions,"certification-options":t.certificationOptions},on:{"certification-added":t.handleCertificationAdded,"close-modal":t.closeAddCertificationModal}})],1)},Ft=[],Nt=(i("d81d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:"Add Material","confirm-loading":t.isSaving},on:{ok:t.attemptSaveMaterial},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[i("a-form",{attrs:{layout:"vertical"}},[i("a-form-item",{attrs:{label:"Aspect"}},[i("a-select",{attrs:{disabled:t.isLoadingAspectOptions,"show-search":"",size:"large"},model:{value:t.form.aspect,callback:function(e){t.$set(t.form,"aspect",e)},expression:"form.aspect"}},t._l(t.aspectDropdownOptions,(function(e){return i("a-select-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),i("a-form-item",{attrs:{label:"Material"}},[i("a-select",{attrs:{disabled:t.isLoadingMaterialOptions,"show-search":"",size:"large"},model:{value:t.form.material,callback:function(e){t.$set(t.form,"material",e)},expression:"form.material"}},t._l(t.materialDropdownOptions,(function(e){return i("a-select-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),i("a-form-item",{attrs:{label:"Weight"}},[i("a-input-group",{staticStyle:{width:"100%"},attrs:{compact:""}},[i("a-input",{staticStyle:{width:"calc(100% - 150px)"},attrs:{size:"large"},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}}),i("a-select",{staticStyle:{width:"150px"},attrs:{size:"large"},model:{value:t.form.weight_unit,callback:function(e){t.$set(t.form,"weight_unit",e)},expression:"form.weight_unit"}},[i("a-select-option",{attrs:{value:"kg"}},[t._v(" kg ")]),i("a-select-option",{attrs:{value:"lb"}},[t._v(" lb ")])],1)],1)],1)],1)],1)}),zt=[],Qt=i("2ef0"),Rt={name:"AddMaterialModal",props:["visible","productId","isLoadingMaterialOptions","materialOptions","isLoadingAspectOptions","aspectOptions"],data:function(){return{isSaving:!1,form:{aspect:null,material:null,weight:null,weight_unit:"kg"}}},computed:{showModal:{get:function(){return this.visible},set:function(t){t||this.closeModal()}},materialDropdownOptions:function(){return this.materialOptions?Qt.map(this.materialOptions,"name"):[]},aspectDropdownOptions:function(){return this.aspectOptions?Qt.map(this.aspectOptions,"name"):[]}},methods:{closeModal:function(){this.$emit("close-modal")},resetForm:function(){this.form={aspect:null,material:null,weight:null,weight_unit:"kg"}},attemptSaveMaterial:function(){var t=this;t.isSaving=!0,y.a.post(window.API_BASE+"/products/"+this.productId+"/esg/materials",this.form).then((function(){t.isSaving=!1,t.resetForm(),t.$emit("material-added")})).catch((function(e){console.log(e),t.isSaving=!1,t.$message.error("Error saving material")}))}}},Ht=Rt,Wt=Object(u["a"])(Ht,Nt,zt,!1,null,"1f41c2b0",null),Kt=Wt.exports,Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:"Add Certification","confirm-loading":t.isSaving},on:{ok:t.attemptSaveCertification},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[i("a-form",{attrs:{layout:"vertical"}},[i("a-form-item",{attrs:{label:"Certification"}},[i("a-select",{attrs:{disabled:t.isLoadingCertificationOptions,"show-search":"",size:"large"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},t._l(t.certificationDropdownOptions,(function(e){return i("a-select-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1)],1)],1)},Gt=[],Yt=i("2ef0"),Xt={name:"AddCertificationModal",props:["visible","productId","isLoadingCertificationOptions","certificationOptions"],data:function(){return{isSaving:!1,form:{name:null}}},computed:{certificationDropdownOptions:function(){return this.certificationOptions?Yt.map(this.certificationOptions,"name"):[]},showModal:{get:function(){return this.visible},set:function(t){t||this.closeModal()}}},methods:{closeModal:function(){this.$emit("close-modal")},resetForm:function(){this.form={name:null}},attemptSaveCertification:function(){var t=this;t.isSaving=!0,y.a.post(window.API_BASE+"/products/"+this.productId+"/esg/certifications",this.form).then((function(){t.isSaving=!1,t.resetForm(),t.$emit("certification-added")})).catch((function(e){console.log(e),t.isSaving=!1,t.$message.error("Error saving certification")}))}}},Zt=Xt,te=Object(u["a"])(Zt,Jt,Gt,!1,null,"cdd9cebc",null),ee=te.exports,ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-popover",{attrs:{placement:"topRight",trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("template",{slot:"title"},[i("div",{staticClass:"filter-title-wrapper"},[i("div",{staticClass:"center"},[t._v(" Are you sure you want to delete? ")])])]),i("template",{slot:"content"},[i("div",{staticClass:"popover-inner popconfirm"},[i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{disabled:t.isDeleting,size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("Cancel ")]),i("a-button",{attrs:{disabled:t.isDeleting,type:"danger",size:"small"},on:{click:function(e){return e.preventDefault(),function(){return t.deleteProperty()}()}}},[t._v("Delete ")])],1)]),i("a-button",{attrs:{disabled:t.isDeleting,size:"small",icon:"delete",type:"danger"}})],2)},ae=[],ne={name:"DeletePropertyButton",props:["type","id","productId"],data:function(){return{isDeleting:!1,visible:!1}},methods:{deleteProperty:function(){var t=this;t.isDeleting=!0,"Materials"===this.type&&y.a.delete(window.API_BASE+"/products/"+this.productId+"/esg/materials/"+this.id).then((function(){t.isDeleting=!1,t.$message.success("Material deleted successfully"),t.$emit("material-deleted")})).catch((function(e){console.log(e),t.isDeleting=!1,t.$message.error("Error deleting material")})),"Certifications"===this.type&&y.a.delete(window.API_BASE+"/products/"+this.productId+"/esg/certifications/"+this.id).then((function(){t.isDeleting=!1,t.$message.success("Certification deleted successfully"),t.$emit("certification-deleted")})).catch((function(e){console.log(e),t.isDeleting=!1,t.$message.error("Error deleting certification")})),"Transport"!==this.type&&"Transportation"!==this.type||y.a.delete(window.API_BASE+"/products/"+this.productId+"/esg/transportations/"+this.id).then((function(){t.isDeleting=!1,t.$message.success("Transport deleted successfully"),t.$emit("transportation-deleted")})).catch((function(e){console.log(e),t.isDeleting=!1,t.$message.error("Error deleting transportation")}))}}},se=ne,oe=Object(u["a"])(se,ie,ae,!1,null,"36b8db01",null),re=oe.exports,ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{centered:"",footer:!1,title:"Add Transportation","confirm-loading":t.isSaving},on:{ok:t.attemptSaveTransportation},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.isLoadingAddresses?i("div",{staticClass:"loader"},[i("a-spin")],1):t._e(),t.isLoadingAddresses?t._e():i("div",["main"===t.screen?i("a-form",{attrs:{layout:"vertical"}},[i("a-form-item",{attrs:{label:"Method"}},[i("a-select",{attrs:{disabled:t.isLoadingTransportationOptions,"show-search":"",size:"large"},model:{value:t.form.method,callback:function(e){t.$set(t.form,"method",e)},expression:"form.method"}},t._l(t.transportationDropdownOptions,(function(e){return i("a-select-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),i("a-form-item",{attrs:{label:"From"}},[i("a-select",{attrs:{"show-search":"",size:"large"},model:{value:t.form.from_address_id,callback:function(e){t.$set(t.form,"from_address_id",e)},expression:"form.from_address_id"}},t._l(t.addresses,(function(e){return i("a-select-option",{key:t.getKey("address",e.id),attrs:{value:e.id}},[t._v(" "+t._s(t.formatAddress(e))+" ")])})),1),i("a",{staticStyle:{"margin-top":"6px",display:"block"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.newFromAddress(e)}}},[t._v("+ New address")])],1),i("a-form-item",{attrs:{label:"To"}},[i("a-select",{attrs:{"show-search":"",size:"large"},model:{value:t.form.to_address_id,callback:function(e){t.$set(t.form,"to_address_id",e)},expression:"form.to_address_id"}},t._l(t.addresses,(function(e){return i("a-select-option",{key:t.getKey("to-address",e.id),attrs:{value:e.id}},[t._v(" "+t._s(t.formatAddress(e))+" ")])})),1),i("a",{staticStyle:{"margin-top":"6px",display:"block"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.newToAddress(e)}}},[t._v("+ New address")])],1),i("a-form-item",{staticStyle:{"padding-bottom":"0","margin-bottom":"0"}},[i("a-button",{attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.attemptSaveTransportation(e)}}},[t._v("Save Transportation")])],1)],1):t._e(),"create"===t.screen?i("a-form",{attrs:{layout:"vertical",form:t.newAddressForm},on:{submit:t.attemptSaveAddress}},[i("a-form-item",{attrs:{label:"Address Line One"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address_line_one",{rules:[{required:!0,message:"Address line one is required"}]}],expression:"['address_line_one', { rules: [{ required: true, message: 'Address line one is required' }] }]"}]})],1),i("a-form-item",{attrs:{label:"Address Line Two"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address_line_two"],expression:"['address_line_two']"}]})],1),i("a-form-item",{attrs:{label:"City"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["city",{rules:[{required:!0,message:"City is required"}]}],expression:"['city', { rules: [{ required: true, message: 'City is required' }] }]"}]})],1),i("a-form-item",{attrs:{label:"Province"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["province",{rules:[{required:!0,message:"Province is required"}]}],expression:"['province', { rules: [{ required: true, message: 'Province is required' }] }]"}]})],1),i("a-form-item",{attrs:{label:"Postcode"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["postal_code",{rules:[{required:!0,message:"Postcode is required"}]}],expression:"['postal_code', { rules: [{ required: true, message: 'Postcode is required' }] }]"}]})],1),i("a-form-item",{attrs:{label:"Country"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["country",{rules:[{required:!0,message:"Country is required"}]}],expression:"['country', { rules: [{required: true, message: 'Country is required'}] }]"}],attrs:{"show-search":""}},t._l(t.countries,(function(e,a){return i("a-select-option",{key:a,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),i("a-form-item",{staticStyle:{"padding-bottom":"0","margin-bottom":"0"}},[i("a-space",[i("a-button",{attrs:{type:"primary","html-type":"submit",loading:t.isSaving}},[t._v("Save")]),i("a-button",{on:{click:t.cancelCreatingNewAddress}},[t._v("Cancel")])],1)],1)],1):t._e()],1)])},de=[],le=i("2ef0"),ue=["Air Freight","Truck"],pe={name:"AddTransportationModal",props:["visible","productId","isLoadingTransportationOptions","transportationOptions"],mixins:[Tt["a"],Bt["a"]],data:function(){return{form:{from_address_id:null,to_address_id:null,method:null},isSaving:!1,isLoadingAddresses:!1,addresses:[],methodOptions:ue,screen:"main",newAddressFor:null,newAddressForm:this.$form.createForm(this,{name:"new_address_form"})}},computed:{showModal:{get:function(){return this.visible},set:function(t){t||this.closeModal()}},transportationDropdownOptions:function(){return this.transportationOptions?le.map(this.transportationOptions,"name"):[]}},created:function(){this.loadAddresses()},methods:{closeModal:function(){this.$emit("close-modal")},loadAddresses:function(){var t=this;t.isLoadingAddresses=!0,y.a.get(window.API_BASE+"/addresses").then((function(e){t.isLoadingAddresses=!1,t.addresses=e.data})).catch((function(e){console.log(e),t.isLoadingAddresses=!1,t.$message.error("Error loading addresses")}))},resetForm:function(){this.form={from_address_id:null,to_address_id:null,method:null}},attemptSaveTransportation:function(){var t=this;t.isSaving=!0,y.a.post(window.API_BASE+"/products/"+this.productId+"/esg/transportations",this.form).then((function(){t.isSaving=!1,t.resetForm(),t.$emit("transportation-added")})).catch((function(e){console.log(e),t.isSaving=!1,t.$message.error("Error saving transportation")}))},getKey:function(t,e){return t+"-"+e},newToAddress:function(){this.screen="create",this.newAddressFor="to"},newFromAddress:function(){this.screen="create",this.newAddressFor="from"},cancelCreatingNewAddress:function(){this.screen="main"},attemptSaveAddress:function(t){var e=this;t.preventDefault(),this.newAddressForm.validateFields((function(t,i){t||e.saveAddress(i)}))},saveAddress:function(t){var e=this,i=this;i.isSaving=!0,y.a.post(window.API_BASE+"/addresses",t).then((function(t){i.isSaving=!1,i.newAddressForm.resetFields(),i.loadAddresses(),"to"==e.newAddressFor&&(e.form.to_address_id=t.data.id),"from"==e.newAddressFor&&(e.form.from_address_id=t.data.id),i.screen="main"})).catch((function(t){console.log(t),i.$message.error("Error saving address"),i.isSaving=!1}))}}},me=pe,fe=Object(u["a"])(me,ce,de,!1,null,"1a2a6888",null),ge=fe.exports,he=i("81f6"),ve=i("2ef0"),_e=[{title:"",width:20,scopedSlots:{customRender:"icon"}},{title:"Section",dataIndex:"section",width:245,scopedSlots:{customRender:"section"}},{title:"Measure",dataIndex:"measure",scopedSlots:{customRender:"measure"}},{title:"",scopedSlots:{customRender:"tags"}},{title:"",dataIndex:"actions",scopedSlots:{customRender:"actions"}}],be={name:"EnvironmentTab",components:{DeletePropertyButton:re,AddMaterialModal:Kt,AddCertificationModal:ee,AddTransportationModal:ge},mixins:[Tt["a"]],data:function(){return{columns:_e,isLoadingMaterials:!1,materials:[],addMaterialModalVisible:!1,isLoadingCertifications:!1,certifications:[],addCertificationModalVisible:!1,isLoadingTransportations:!1,transportations:[],addTransportationModalVisible:!1,isLoadingMaterialOptions:!1,materialOptions:[],isLoadingProductLifespans:!1,productLifespans:[],isLoadingAspectOptions:!1,aspectOptions:[],isLoadingCertificationOptions:!1,certificationOptions:[],isLoadingTransportOptions:!1,transportOptions:[]}},created:function(){this.loadAspectOptions(),this.loadMaterialOptions(),this.loadCertificationOptions(),this.loadTransportOptions(),this.loadMaterials(),this.loadCertifications(),this.loadTransportations(),this.loadProductLifespans()},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])("productViewer",{product:"product",view:"view"})),{},{totalMaterialCo2e:function(){return Math.round(100*ve.sum(ve.map(this.materials,"co2e")))/100},totalMaterialWater:function(){return Math.round(100*ve.sum(ve.map(this.materials,"water")))/100},totalTransportCo2e:function(){return Math.round(100*ve.sum(ve.map(this.transportations,"co2e")))/100},productId:function(){return this.product["_id"]},materialsTableData:function(){var t=this;return ve.map(this.materials,(function(e){var i=ve.find(t.materialOptions,{name:e.material});return Object(s["a"])({weight_formatted:e.weight&&e.weight_unit?e.weight+" "+e.weight_unit:"-",co2e_formatted:e.co2e?Math.round(100*e.co2e)/100+" kg":"-",water_formatted:e.water?Math.round(100*e.water)/100+" kg":"-",recyclable:i?i.recyclable:null,recycled_content_percentage:i?i.recycled_content_percentage+"%":"0%"},e)}))},certificationsTableData:function(){return ve.map(this.certifications,(function(t){return t}))},transportationsTableData:function(){return ve.map(this.transportations,(function(t){return Object(s["a"])({co2e_formatted:t.co2e?Math.round(100*t.co2e)/100+" kg":"-"},t)}))},lifespansTableData:function(){return ve.map(this.productLifespans,(function(t){return Object(s["a"])({lifespan_formatted:t.lifespan+" "+t.lifespan_unit},t)}))},tableData:function(){var t=this;return[{section:"Materials",measure:"?",actionButton:"Add Material",actionButtonClicked:function(){t.openAddMaterialModal()},innerTableColumns:[{title:"Aspect",dataIndex:"aspect"},{title:"Material",dataIndex:"material"},{title:"Weight",dataIndex:"weight_formatted"},{title:"CO2e",dataIndex:"co2e_formatted"},{title:"Water",dataIndex:"water_formatted"},{title:"Recyclable",dataIndex:"recyclable",scopedSlots:{customRender:"recyclable"}},{title:"Recycled Content",dataIndex:"recycled_content_percentage"},{scopedSlots:{customRender:"tags"},width:100},{scopedSlots:{customRender:"actions"}}],innerTableData:this.materialsTableData,isLoading:this.isLoadingMaterials||this.isLoadingAspectOptions||this.isLoadingMaterialOptions},{section:"Transport",measure:"?",actionButton:"Add Transport",actionButtonClicked:function(){t.openAddTransportationModal()},innerTableData:this.transportationsTableData,innerTableColumns:[{title:"Method",dataIndex:"method"},{title:"From",dataIndex:"from_address",scopedSlots:{customRender:"from_address"}},{title:"To",dataIndex:"to_address",scopedSlots:{customRender:"to_address"}},{title:"CO2e",dataIndex:"co2e_formatted"},{scopedSlots:{customRender:"actions"}}],isLoading:this.isLoadingTransportations},{section:"Certifications",measure:this.certificationsTableData?this.certificationsTableData.length+" "+(1===this.certificationsTableData.length?"certification":"certifications"):"-",actionButton:"Add Certification",actionButtonClicked:function(){t.openAddCertificationModal()},innerTableColumns:[{title:"Name",dataIndex:"name"},{scopedSlots:{customRender:"actions"}}],innerTableData:this.certificationsTableData,isLoading:this.isLoadingCertifications||this.isLoadingCertificationOptions},{section:"Lifespan",measure:"",actionButton:"",actionButtonClicked:function(){},innerTableColumns:[{title:"Lifespan",dataIndex:"lifespan_formatted"},{title:"Usage",dataIndex:"usage"},{scopedSlots:{customRender:"actions"}}],innerTableData:this.lifespansTableData,isLoading:this.isLoadingProductLifespans}]},hasBannedMaterials:function(){var t=this,e=!1;return ve.each(this.materials,(function(i){var a=ve.find(t.materialOptions,{name:i.material});a&&a.banned&&(e=!0)})),e}}),methods:{loadAspectOptions:function(){var t=this;t.isLoadingAspectOptions=!0,y.a.get(window.API_COMMON_BASE+"/aspects").then((function(e){t.isLoadingAspectOptions=!1,t.aspectOptions=e.data})).catch((function(e){console.log(e),t.$message.error("Error loading aspect options")}))},loadMaterialOptions:function(){var t=this;t.isLoadingMaterialOptions=!0,y.a.get(window.API_COMMON_BASE+"/materials").then((function(e){t.isLoadingMaterialOptions=!1,t.materialOptions=e.data})).catch((function(e){console.log(e),t.$message.error("Error loading material dropdown options")}))},loadCertificationOptions:function(){var t=this;t.isLoadingCertificationOptions=!0,y.a.get(window.API_COMMON_BASE+"/certifications").then((function(e){t.isLoadingCertificationOptions=!1,t.certificationOptions=e.data})).catch((function(e){console.log(e),t.$message.error("Error loading certification options")}))},loadTransportOptions:function(){var t=this;t.isLoadingTransportOptions=!0,y.a.get(window.API_COMMON_BASE+"/transportation-methods").then((function(e){t.isLoadingTransportOptions=!1,t.transportOptions=e.data})).catch((function(e){console.log(e),t.$message.error("Error loading certification options")}))},loadMaterials:function(){var t=this;t.isLoadingMaterials=!0,y.a.get(window.API_BASE+"/products/"+this.productId+"/esg/materials").then((function(e){t.isLoadingMaterials=!1,t.materials=e.data})).catch((function(e){console.log(e),t.$message.error("Error loading materials")}))},openAddMaterialModal:function(){this.addMaterialModalVisible=!0},closeAddMaterialModal:function(){this.addMaterialModalVisible=!1},handleMaterialAdded:function(){this.addMaterialModalVisible=!1,he["a"].$emit("product-materials-updated"),this.loadMaterials()},handleMaterialDeleted:function(){he["a"].$emit("product-materials-updated"),this.loadMaterials()},loadCertifications:function(){var t=this;t.isLoadingCertifications=!0,y.a.get(window.API_BASE+"/products/"+this.productId+"/esg/certifications").then((function(e){t.isLoadingCertifications=!1,t.certifications=e.data})).catch((function(e){console.log(e),t.$message.error("Error loading certifications")}))},openAddCertificationModal:function(){this.addCertificationModalVisible=!0},closeAddCertificationModal:function(){this.addCertificationModalVisible=!1},handleCertificationAdded:function(){this.addCertificationModalVisible=!1,this.loadCertifications()},handleCertificationDeleted:function(){this.loadCertifications()},loadTransportations:function(){var t=this;t.isLoadingTransportations=!0,y.a.get(window.API_BASE+"/products/"+this.productId+"/esg/transportations").then((function(e){t.isLoadingTransportations=!1,t.transportations=e.data})).catch((function(e){console.log(e),t.$message.error("Error loading transportations")}))},loadProductLifespans:function(){var t=this;t.isLoadingProductLifespans=!0,y.a.get(window.API_BASE+"/products/"+this.productId+"/esg/lifespans").then((function(e){t.isLoadingProductLifespans=!1,t.productLifespans=e.data})).catch((function(e){console.log(e),t.$message.error("Error loading product lifespan")}))},openAddTransportationModal:function(){this.addTransportationModalVisible=!0},closeAddTransportationModal:function(){this.addTransportationModalVisible=!1},handleTransportationAdded:function(){this.addTransportationModalVisible=!1,this.loadTransportations()},handleTransportationDeleted:function(){this.loadTransportations()},isMaterialBanned:function(t){if(this.materialOptions){var e=ve.find(this.materialOptions,{name:t});return!!e&&e.banned}return!1},getExpandIcon:function(t){var e=t.expanded,i=t.record,a=t.onExpand,n=this.$createElement;return"Lifespan"!==i.section?n("a-button",{style:"font-weight: 500; padding-left: 0; padding-right; 0;",attrs:{type:"link"},on:Object(s["a"])({},{click:a.bind(this,[e,i])})},[n("span",[e?"Hide":"Expand"]),n("a-icon",{style:"font-size: 10px; font-weight: 500;",attrs:{type:e?"up":"down"}})]):n("a-button",{style:"opacity: 0; cursor: default;"})}}},ye=be,we=(i("9880"),Object(u["a"])(ye,qt,Ft,!1,null,null,null)),ke=we.exports,Se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"padding-top":"15px"}},[i("table",{staticClass:"axpi-basic-table"},[t._m(0),i("tbody",t._l(t.pricesWithStocks,(function(e,a){return i("tr",{key:a},[i("td",[t._v(t._s(e.supplier_name))]),i("td",[t._v(" "+t._s(e?t.formatCostInPence2dp({cost:e.price,cost_currency:"USD"}):"-")+" ")]),i("td",{staticClass:"stock-cell"},[t.isInStock(e.stock)?i("a-icon",{attrs:{type:"check-circle",theme:"twoTone","two-tone-color":"#52c41a"}}):t._e(),t.isOutOfStock(e.stock)?i("a-icon",{attrs:{type:"close-circle",theme:"twoTone","two-tone-color":"#FF0000"}}):t._e(),i("span",{staticClass:"availability-text"},[t._v(t._s(t.getStockText(e.stock)))])],1)])})),0)])])},De=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",{attrs:{width:"200"}},[t._v("Supplier")]),i("th",{attrs:{width:"100"}},[t._v("Price")]),i("th",[t._v("Availability")])])])}],Me=i("2ee2"),Ce=i("2ef0"),Ae={name:"PricingTab",props:["prices","stocks"],mixins:[jt["a"],Me["a"]],data:function(){return{isLoading:!1}},computed:{pricesWithStocks:function(){var t=this;return Ce.map(this.prices,(function(e){return Object(s["a"])(Object(s["a"])({},e),{},{stock:t.getStockForSupplier(e.supplier_id)})}))}},methods:{getStockForSupplier:function(t){var e=Ce.find(this.stocks,{supplier_id:t});return void 0!==e?e.stock:null}}},Pe=Ae,Oe=(i("22d9"),Object(u["a"])(Pe,Se,De,!1,null,"6135d89d",null)),Ee=Oe.exports,xe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"title"},[t._m(0),i("div",{staticClass:"right"},[i("a-button",{staticClass:"left-button",attrs:{type:"default",shape:"circle",icon:"left",size:"large"},on:{click:function(e){return e.preventDefault(),t.scrollLeft(e)}}}),i("a-button",{attrs:{type:"default",shape:"circle",icon:"right",size:"large"},on:{click:function(e){return e.preventDefault(),t.scrollRight(e)}}})],1)]),t.isLoading?i("div",[i("a-spin")],1):t._e(),t.isLoading?t._e():i("div",[0===t.suggestedProducts.length?i("a-alert",{attrs:{message:"No suggested products to show",banner:""}}):t._e(),i("div",{ref:"carousel",staticClass:"carousel-container"},t._l(t.suggestedProducts,(function(t,e){return i("div",{key:e,staticClass:"carousel-card"},[i("suggested-product-card",{attrs:{suggestion:t}})],1)})),0)],1)])},Le=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left"},[i("h2",[t._v("Recommended Products")])])}],Te=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"suggested-product-card-wrapper"},[i("div",{staticClass:"suggested-product-card",on:{click:function(e){return e.preventDefault(),t.navigateToProduct(t.product)}}},[i("div",{staticClass:"top",style:{backgroundImage:"url("+t.getImageSrc(t.product)+")"}}),i("div",{staticClass:"bottom"},[i("div",{staticClass:"left"},[i("div",{staticClass:"title"},[t._v(" "+t._s(t.truncate(t.product.name,50))+" ")]),i("div",{staticClass:"category"},[t._v(" "+t._s(t.getCategory(t.product))+" ")])]),i("div",{staticClass:"right"},[t.isLoadingPrices?i("a-spin",{attrs:{size:"small"}}):i("div",[t._v(t._s(t.priceRange))]),t.suggestion.cheaper?i("a-tag",{staticStyle:{"margin-right":"0 !important",display:"inline-block"},attrs:{color:"blue"}},[t._v("Cost Effective ")]):t._e(),t.suggestion.more_effective?i("a-tag",{staticStyle:{"margin-right":"0 !important",display:"inline-block"},attrs:{color:"blue"}},[t._v("More Effective ")]):t._e(),t.suggestion.in_stock?i("a-tag",{staticStyle:{"margin-right":"0 !important",display:"inline-block"},attrs:{color:"blue"}},[t._v("In Stock ")]):t._e(),t.suggestion.more_environmentally_friendly?i("a-tag",{staticStyle:{"margin-right":"0 !important",display:"inline-block"},attrs:{color:"green"}},[t._v(" Environmentally Friendly ")]):t._e()],1)])])])},Be=[],Ie=i("2ef0"),$e={name:"SuggestedProductCard",props:["suggestion"],mixins:[jt["a"]],data:function(){return{prices:[],isLoadingPrices:!0}},computed:{product:function(){return this.suggestion.product},priceRange:function(){var t=this.prices;if(t&&t.length){var e=Ie.orderBy(t,"price"),i=Ie.first(e),a=Ie.last(e);if(i!==a){var n=this.formatCostInPence2dp({cost:i.price,cost_currency:"USD"}),s=this.formatCostInPence2dp({cost:a.price,cost_currency:"USD"});return n+" - "+s}return this.formatCostInPence2dp({cost:i.price,cost_currency:"USD"})}return"-"}},created:function(){this.loadPrices()},methods:{getImageSrc:function(t){if(t["imageURLs"]&&t["imageURLs"].length)return t["imageURLs"][0]},loadPrices:function(){var t=this;t.isLoadingPrices=!0,y.a.get(window.API_BASE+"/products/"+this.product["_id"]+"/prices").then((function(e){t.isLoadingPrices=!1,t.prices=e.data})).catch((function(e){console.log(e),t.isLoadingPrices=!1,t.$message.error("Error loading product prices")}))},truncate:function(t,e){return t&&t.length>e?t.slice(0,e)+"...":t},getCategory:function(t){return t.taxonomyCategory?t.taxonomyCategory[t.taxonomyCategory.length-1]:"Miscellaneous"},navigateToProduct:function(t){var e=t.id;e||(e=t["_id"]),this.$router.push("/products/"+e)}}},Ue=$e,Ve=(i("28dc"),Object(u["a"])(Ue,Te,Be,!1,null,"6a64a87c",null)),je=Ve.exports,qe={name:"SuggestedProducts",props:["product"],components:{SuggestedProductCard:je},data:function(){return{isLoading:!1,suggestedProducts:[]}},watch:{product:function(){this.loadSuggestedProducts()}},created:function(){this.loadSuggestedProducts()},methods:{loadSuggestedProducts:function(){var t=this,e=this.product.id;e||(e=this.product["_id"]),t.isLoading=!0,y.a.get(window.API_BASE+"/products/"+e+"/suggestions").then((function(e){t.suggestedProducts=e.data,t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1,t.$message.error("Error loading suggested products")}))},scrollLeft:function(){var t=400,e=this.$refs["carousel"],i=e.scrollLeft;i-t<=0?e.scrollTo({left:0,top:0,behaviour:"smooth"}):e.scrollTo({left:i-t,top:0,behaviour:"smooth"})},scrollRight:function(){var t=400,e=this.$refs["carousel"],i=e.scrollLeft,a=e.scrollWidth;i+t>=a?e.scrollTo({left:a,top:0,behaviour:"smooth"}):e.scrollTo({left:i+t,top:0,behaviour:"smooth"})}}},Fe=qe,Ne=(i("f82d"),Object(u["a"])(Fe,xe,Le,!1,null,"e0dda77c",null)),ze=Ne.exports,Qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"co2e-indicator"},[t.isLoading?i("a-spin",{attrs:{size:"small"}}):t._e(),!t.isLoading&&t.co2e?i("img",{staticClass:"leaf",attrs:{src:"/img/leaf.jpg",width:"15",alt:"Leaf"}}):t._e(),!t.isLoading&&t.co2e?i("span",[t._v(t._s(t.formatCo2e(t.co2e))+"kg CO2e")]):t._e()],1)},Re=[],He={name:"Co2eIndicator",props:["product"],data:function(){return{isLoading:!0,co2e:0}},created:function(){this.getCo2e();var t=this;he["a"].$on("product-materials-updated",(function(){t.getCo2e()}))},computed:{productId:function(){var t=this.product.id;return t||(t=this.product["_id"]),t}},watch:{product:function(){this.getCo2e()}},methods:{getCo2e:function(){var t=this;t.isLoading=!0,y.a.get(window.API_BASE+"/products/"+this.productId+"/esg/co2e").then((function(e){t.co2e=e.data,t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1,t.co2e=null}))},formatCo2e:function(t){return Math.round(100*t)/100}}},We=He,Ke=(i("2385"),Object(u["a"])(We,Qe,Re,!1,null,"e34dddac",null)),Je=Ke.exports,Ge=i("0e0c"),Ye=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-tag",{class:{hidden:!t.hasBannedMaterials},attrs:{color:"#000"}},[t._v(" Has Banned Materials ")])},Xe=[],Ze={props:["productId"],name:"HasBannedMaterialsBadge",data:function(){return{isLoading:!1,hasBannedMaterials:!1}},watch:{productId:function(){this.determineIfHasBannedMaterials()}},created:function(){this.determineIfHasBannedMaterials();var t=this;he["a"].$on("product-materials-updated",(function(){t.determineIfHasBannedMaterials()}))},methods:{determineIfHasBannedMaterials:function(){var t=this;t.isLoading=!0,y.a.get(window.API_BASE+"/products/"+this.productId+"/esg/has-banned-materials").then((function(e){t.isLoading=!1,t.hasBannedMaterials=Boolean(e.data)})).catch((function(e){console.log(e),t.isLoading=!1}))}}},ti=Ze,ei=(i("3e48"),Object(u["a"])(ti,Ye,Xe,!1,null,"787f2ece",null)),ii=ei.exports,ai=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dispatches-from-wrapper"},[t.isLoading?i("a-spin",{attrs:{size:"small"}}):t._e(),t.isLoading||"Unknown"!=t.dispatchesFrom?t._e():i("a-tag",{attrs:{color:"red"}},[t._v(" Unknown ")]),t.isLoading||"Unknown"===t.dispatchesFrom?t._e():i("span",[t._v(" "+t._s(t.dispatchesFrom)+" ")])],1)},ni=[],si={name:"DispatchesFrom",props:["product"],created:function(){this.fetch()},watch:{product:function(){this.fetch()}},data:function(){return{isLoading:!1,dispatchesFrom:""}},methods:{fetch:function(){var t=this;t.isLoading=!0,y.a.get(window.API_BASE+"/products/"+this.product["_id"]+"/dispatches-from").then((function(e){t.dispatchesFrom=e.data,t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1,t.$message.error("Error loading dispatches from")}))}}},oi=si,ri=(i("a392"),Object(u["a"])(oi,ai,ni,!1,null,"7ad289a2",null)),ci=ri.exports,di=i("2ef0"),li={name:"Show",components:{DispatchesFrom:ci,HasBannedMaterialsBadge:ii,ApprovedBadge:Ge["a"],Co2eIndicator:Je,AddressSelectorInline:Vt,ViewToggler:Et,DocumentsTab:I,SpecificationsTab:Dt,ImageCarousel:m,EnvironmentTab:ke,PricingTab:Ee,SuggestedProducts:ze},mixins:[jt["a"],Me["a"]],data:function(){return{descriptionShowMore:!1,descriptionLocal:"",descriptionLocalEditing:"",isEditingDescription:!1,isSavingDescription:!1,quantityToAdd:1,reloadKey:1,isMounted:!1,selectedTab:"properties",isNavbarFixed:!1}},created:function(){this.attemptLoadProduct()},mounted:function(){this.isMounted=!0},watch:{$route:function(){this.attemptLoadProduct()}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(o["c"])("productViewer",{product:"product",productVendorMapping:"productVendorMapping",isLoading:"isLoading",isLoadingDocuments:"isLoadingDocuments",isLoadingDetails:"isLoadingDetails",isLoadingPrices:"isLoadingPrices",isLoadingStocks:"isLoadingStocks",view:"view",prices:"prices",stocks:"stocks",selectedPrice:"selectedPrice",stockForSelectedPrice:"stockForSelectedPrice"})),Object(o["c"])("shop",{basket:"basket"})),{},{productId:function(){return this.product?this.product["id"]?this.product["id"]:this.product["_id"]:null},isProductInBasket:function(){var t=this;return di.filter(this.basket,(function(e){return"product"===e.itemType&&e.id===t.productId&&e.selectedPriceId===t.selectedPrice.id})).length>0},quantityOfProductInBasket:function(){var t=this;return di.find(this.basket,(function(e){return"product"===e.itemType&&e.id===t.productId&&e.selectedPriceId===t.selectedPrice.id})).quantity},fromShop:function(){return this.$route.query.fromShop},fromBasket:function(){return this.$route.query.fromBasket},description:function(){return this.descriptionLocal?this.descriptionLocal:this.product["description"]},descriptionTooLong:function(){var t=this.product["description"].length;return t>1e3},descriptionToShow:function(){return this.descriptionShowMore?this.description:this.description.substring(0,1e3)},pricePerUnit:function(){var t=this.selectedPrice?this.selectedPrice.price:null,e=this.product.normalisedQuantity?this.product.normalisedQuantity.normalisedUnitMagnitude:null;return t&&e?t/e:"-"},unit:function(){return this.product.normalisedQuantity?"dimensionless"===this.product.normalisedQuantity.normalisedUnitBase?"unit":this.product.normalisedQuantity.normalisedUnitBase:"-"}}),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(o["b"])("productViewer",{loadProduct:"loadProduct",selectPrice:"selectPrice"})),Object(o["b"])("shop",{addProductToBasket:"addProductToBasket",incrementProductQuantity:"incrementProductQuantity",decrementProductQuantity:"decrementProductQuantity",setProductQuantity:"setProductQuantity"})),{},{formatEffectiveness:function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},getCategory:function(t){return t.taxonomyCategory?t.taxonomyCategory[t.taxonomyCategory.length-1]:"Miscellaneous"},decrementQuantityToAdd:function(){var t=this;this.quantityToAdd&&!isNaN(this.quantityToAdd)?(this.quantityToAdd--,this.quantityToAdd<1&&(this.quantityToAdd=1)):this.quantityToAdd=1,this.$nextTick((function(){t.$forceUpdate()}))},incrementQuantityToAdd:function(){var t=this;this.quantityToAdd&&!isNaN(this.quantityToAdd)?this.quantityToAdd++:this.quantityToAdd=1,this.$nextTick((function(){t.$forceUpdate()}))},handleTabClicked:function(t){this.$refs[t+"-tab"].scrollIntoView({behavior:"smooth"})},addToBasket:function(){var t=this.quantityToAdd;t||(t=1),this.addProductToBasket({product:this.product,quantity:t,selectedPrice:this.selectedPrice,selectedPriceId:this.selectedPrice.id,prices:this.prices})},toggleDescriptionShowMore:function(){this.descriptionShowMore=!this.descriptionShowMore},backToAllProducts:function(){this.$router.push("/products")},backToShop:function(){this.$router.push("/shop")},backToBasket:function(){this.$router.push("/shop/basket")},handleBackButton:function(){this.fromBasket&&this.backToBasket(),this.fromShop&&this.backToShop()},attemptLoadProduct:function(){this.loadProduct(this.$route.params.id),this.reset()},reset:function(){this.reloadKey+=1},editDescription:function(){this.isEditingDescription=!0,this.descriptionLocalEditing=this.description},cancelEditDescription:function(){this.isEditingDescription=!1},saveDescription:function(){var t=this;t.isSavingDescription=!0,y.a.post(window.API_BASE+"/products/"+this.product["_id"]+"/update-description",{description:this.descriptionLocalEditing}).then((function(){t.isSavingDescription=!1,t.isEditingDescription=!1,t.descriptionLocal=t.descriptionLocalEditing,t.descriptionLocalEditing=null})).catch((function(e){console.log(e),t.isSavingDescription=!1,t.$message.error("Error saving description")}))},scrollToPrices:function(){this.$refs["pricing-tab"].scrollIntoView({behavior:"smooth"})}})},ui=li,pi=(i("b97c5"),Object(u["a"])(ui,a,n,!1,null,"db15152a",null));e["default"]=pi.exports},eb1e:function(t,e,i){},f61c:function(t,e,i){},f734:function(t,e,i){},f82d:function(t,e,i){"use strict";i("0bf5")}}]);
//# sourceMappingURL=view-product.3bef2003.js.map